<html>
<head>
<script src="../../libs/tmlib.js"></script>
<script>
tm.main(function() {
    var canvas = tm.graphics.Canvas("#c");
    tm.dom.Element("#c").event.click(function() {
        canvas.saveAsImage();
    });

    canvas.resize(64, 240); //.fitWindow();
    canvas.globalCompositeOperation = "lighter";

    for (var i = 0; i < 240+40; i++) {
        var t = (Math.PI*2)/240 * i;
        canvas.fillStyle = tm.graphics.RadialGradient(32, i-20, 0, 32, i-20, 20).addColorStopList([
            { offset: 0.00, color: "rgba(150, 200, 255, 0.2)" },
            { offset: 0.30+Math.sin(t)*0.1, color: "rgba(150, 200, 255, 0.1)" },
            { offset: 1.00, color: "rgba(0, 0, 255, 0.0)" },
        ]).toStyle();
        canvas.fillRect(0, i-40, 64, 40);
    }

    var c2 = tm.graphics.Canvas("#c2");
    c2.resize(64, 800);

    var app = tm.app.CanvasApp();
    app.update = function() {
        c2.clear();
        var y = (app.frame*30) % 240;
        for (var i = 0; i < 6; i++) {
            c2.drawBitmap(canvas.getBitmap(), 0, i*240-240-y);
        }
    };
    app.run();
});
</script>
</head>
<body style="background:black">
<canvas id="c"></canvas>
<canvas id="c2"></canvas>
</body>
</html>