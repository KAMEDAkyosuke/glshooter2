/*
 bulletml.js v0.5.0-SNAPSHOT

 License
 http://daishihmr.mit-license.org/
*/
function g(a){throw a;}var i=void 0,k=!0,m=null,n=!1;function p(){return function(){}}var q={Ae:this};
(function(){function a(a,c){for(var d=0,f=a.length;d<f;d++)if(a[d].label==c)return a[d]}q.Ba=function(a){this.type='none';this.root=this;this.ya=[];this.Fc=[];this.Jc=[];if(a!==i){for(var c in a)a.hasOwnProperty(c)&&(a[c].label=c,a[c]instanceof q.Na?this.ya.push(a[c]):a[c]instanceof q.ka?this.Fc.push(a[c]):a[c]instanceof q.Lb&&this.Jc.push(a[c]));a=0;for(c=this.ya.length;a<c;a++)this.ya[a].Qa(this);a=0;for(c=this.Fc.length;a<c;a++)this.Fc[a].Qa(this);a=0;for(c=this.Jc.length;a<c;a++)this.Jc[a].Qa(this)}};
q.Ba.prototype.Zd=function(b){return a(this.ya,b)};q.Ba.prototype.zf=function(){for(var a=[],c=0,d=this.ya.length;c<d;c++){var f=this.ya[c];f.label&&0===f.label.indexOf('top')&&(a[a.length]=f.label)}return a};q.Ba.prototype.qf=function(a){var c;if(c=this.Zd(a))return c;g(Error("action labeled '"+a+"' is undefined."))};q.Ba.prototype.rf=function(b){return a(this.Fc,b)};q.Ba.prototype.sf=function(a){var c;if(c=this.rf(a))return c;g(Error("bullet labeled '"+a+"' is undefined."))};q.Ba.prototype.tf=function(b){return a(this.Jc,
b)};q.Ba.prototype.uf=function(a){var c;if(c=this.tf(a))return c;g(Error("fire labeled '"+a+"' is undefined."))};q.ka=function(){this.root=this.label=m;this.direction=new q.fb(0);this.speed=new q.ib(1);this.ya=[];this.Ga={};this.ia={}};q.ka.prototype.clone=function(a){var c=new q.ka;c.label=this.label;c.root=this.root;c.ya=this.ya;c.direction=new q.fb(a.Da(this.direction.value));c.direction.type=this.direction.type;c.speed=new q.ib(a.Da(this.speed.value));c.speed.type=this.speed.type;c.Ga=this.Ga;
c.ia=a.ia;return c};q.ka.prototype.Qa=function(a){this.root=a;for(var c=0,d=this.ya.length;c<d;c++)this.ya[c].Qa(a)};q.rc=function(a){this.root=m;this.label=a;this.wa=[]};q.rc.prototype.clone=function(a){var c=a.ia;a.ia=a.dd(this.wa);var d=this.root.sf(this.label).clone(a);a.ia=c;return d};q.rc.prototype.Qa=function(a){this.root=a};q.xa=function(){this.Ka=''};q.xa.prototype.Qa=function(a){this.root=a};q.Na=function(){this.Ka='action';this.root=this.label=m;this.Ta=[];this.wa=[]};q.Na.prototype=new q.xa;
q.Na.prototype.Qa=function(a){this.root=a;for(var c=0,d=this.Ta.length;c<d;c++)this.Ta[c].Qa(a)};q.Na.prototype.clone=function(){var a=new q.Na;a.label=this.label;a.root=this.root;a.Ta=this.Ta;return a};q.Kb=function(a){this.Ka='actionRef';this.label=a;this.root=m;this.wa=[]};q.Kb.prototype=new q.xa;q.Kb.prototype.clone=function(){var a=new q.Na;a.root=this.root;a.Ta.push(this);return a};q.Lb=function(){this.Ka='fire';this.ga=this.speed=this.direction=this.root=this.label=m;this.Ga=new q.Xc};q.Lb.prototype=
new q.xa;q.Lb.prototype.Qa=function(a){this.root=a;this.ga&&this.ga.Qa(a)};q.Yc=function(a){this.Ka='fireRef';this.label=a;this.wa=[]};q.Yc.prototype=new q.xa;q.tc=function(){this.Ka='changeDirection';this.direction=new q.fb;this.Ha=0};q.tc.prototype=new q.xa;q.uc=function(){this.Ka='changeSpeed';this.speed=new q.ib;this.Ha=0};q.uc.prototype=new q.xa;q.qc=function(){this.Ka='accel';this.bb=new q.Zc;this.eb=new q.bd;this.Ha=0};q.qc.prototype=new q.xa;q.wc=function(a){this.Ka='wait';this.value=a||0};
q.wc.prototype=new q.xa;q.ad=function(){this.Ka='vanish'};q.ad.prototype=new q.xa;q.vc=function(){this.Ka='repeat';this.pe=0;this.action=m;this.wa=[]};q.vc.prototype=new q.xa;q.vc.prototype.Qa=function(a){this.root=a;this.action&&this.action.Qa(a)};q.Wc=function(a,c){this.Ka='bind';this.Uf=a;this.of=c};q.Wc.prototype=new q.xa;q.$c=function(a,c){this.Ka='notify';this.jf=a;this.wa=c||m};q.$c.prototype=new q.xa;q.ze=new q.xa;q.fb=function(a){this.type='aim';this.value=a||0};q.ib=function(a){this.type=
'absolute';this.value=a===i?1:a};q.Zc=function(a){this.type='absolute';this.value=a||0};q.bd=function(a){this.type='absolute';this.value=a||0};q.Xc=function(a){a=a||{};this.offsetX=a.offsetX||0;this.offsetY=a.offsetY||0;this.za=k;a.za!==i&&(this.za=!!a.za)};q.Cd=function(a){this.value=a||0};q.Dd=function(a){this.value=a||0};q.Ad=function(a){this.value=!!a}})();q.ob=function(a){this.Id=a;this.xc=[];this.pb=-1;this.Ca=m;this.ia={}};
q.ob.prototype.next=function(){this.pb+=1;if(this.Ca!==m){var a=this.Ca.Ta[this.pb];if(a!==i){if(a instanceof q.Na)return this.ac(),this.Ca=a,this.ia=this.cd(),this.next();if(a instanceof q.Kb)return this.ac(),this.Ca=this.Id.qf(a.label),this.ia=this.dd(a.wa),this.next();if(a instanceof q.vc)return this.ia.Ub=0,this.ia.he=this.Da(a.pe)|0,this.ac(),this.Ca=a.action.clone(),this.ia=this.cd(),this.next();if(a instanceof q.Lb){var b=new q.Lb;b.ga=a.ga.clone(this);a.direction!==m&&(b.direction=new q.fb(this.Da(a.direction.value)),
b.direction.type=a.direction.type);a.speed!==m&&(b.speed=new q.ib(this.Da(a.speed.value)),b.speed.type=a.speed.type);b.Ga=a.Ga;return b}return a instanceof q.Yc?(this.ac(),this.Ca=new q.Na,this.Ca.Ta=[this.Id.uf(a.label)],this.ia=this.dd(a.wa),this.next()):a instanceof q.tc?(b=new q.tc,b.direction.type=a.direction.type,b.direction.value=this.Da(a.direction.value),b.Ha=this.Da(a.Ha),b):a instanceof q.uc?(b=new q.uc,b.speed.type=a.speed.type,b.speed.value=this.Da(a.speed.value),b.Ha=this.Da(a.Ha),b):
a instanceof q.qc?(b=new q.qc,b.bb.type=a.bb.type,b.bb.value=this.Da(a.bb.value),b.eb.type=a.eb.type,b.eb.value=this.Da(a.eb.value),b.Ha=this.Da(a.Ha),b):a instanceof q.wc?new q.wc(this.Da(a.value)):a instanceof q.ad?a:a instanceof q.Wc?(this.ia['$'+a.Uf]=this.Da(a.of),q.ze):a instanceof q.$c?a:m}this.$e();if(this.Ca===m)return m;if((a=this.Ca.Ta[this.pb])&&'repeat'==a.Ka)this.ia.Ub++,this.ia.Ub<this.ia.he&&(this.ac(),this.Ca=a.action.clone(),this.ia=this.cd());return this.next()}return m};
q.ob.prototype.ac=function(){this.xc.push({action:this.Ca,cursor:this.pb,scope:this.ia});this.pb=-1};q.ob.prototype.$e=function(){var a=this.xc.pop();a?(this.pb=a.cursor,this.Ca=a.action,this.ia=a.scope):(this.pb=-1,this.Ca=m,this.ia={})};
q.ob.prototype.Da=function(a){var b;if('number'===typeof a)return a;if(isNaN(b=Number(a))){if((b=this.ia[a])||(b=q.ka.qa[a]))return b;if('$rand'===a)return Math.random()}else return b;b={};for(var c in q.ka.qa)q.ka.qa.hasOwnProperty(c)&&(b[c]=q.ka.qa[c]);for(c in this.ia)this.ia.hasOwnProperty(c)&&(b[c]=this.ia[c]);b.$rand=Math.random();(c=this.xc[this.xc.length-1])&&(b.$loop={index:c.scope.Ub,count:c.scope.Ub+1,first:0===c.scope.Ub,last:c.scope.Ub+1>=c.scope.he});return(new Function('return '+a.split('$').join('this.$'))).apply(b)};
q.ob.prototype.dd=function(a){var b={};if(a)for(var c=0,d=a.length;c<d;c++)b['$'+(c+1)]=this.Da(a[c]);else for(c in this.ia)this.ia.hasOwnProperty(c)&&(b[c]=this.ia[c]);return b};q.ob.prototype.cd=function(){var a={},b;for(b in this.ia)this.ia.hasOwnProperty(b)&&(a[b]=this.ia[b]);return a};q.Ba.prototype.md=function(a){var b=new q.ob(this);if(a=this.Zd(a))b.Ca=a;return b};q.ka.prototype.md=function(){var a=new q.ob(this.root),b=new q.Na;b.root=this.root;b.Ta=this.ya;a.Ca=b;a.ia=this.ia;return a};
q.ka.qa={};q.ja=function(a){a=a||'';for(var b in q.ja)q.ja.hasOwnProperty(b)&&(q.Ae[a+b]=q.ja[b])};
q.ja.action=function(a){if(0<arguments.length)for(var b=0,c=arguments.length;b<c;b++)arguments[b]instanceof Function&&(arguments[b]=arguments[b]());if(a instanceof Array){b=0;for(c=a.length;b<c;b++)a[b]instanceof Function&&(a[b]=a[b]())}var d=new q.Na;if(a instanceof Array)a.some(function(a){return!(a instanceof q.xa)})&&g(Error('argument type error.')),d.Ta=a;else{b=0;for(c=arguments.length;b<c;b++)arguments[b]instanceof q.xa?d.Ta[b]=arguments[b]:g(Error('argument type error.'))}return d};
q.ja.$f=function(a,b){for(var c=0,d=arguments.length;c<d;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());a===i&&g(Error('label is required.'));d=new q.Kb(a);if(b instanceof Array)d.wa=b;else for(c=1;c<arguments.length;c++)d.wa.push(arguments[c]);return d};
q.ja.ga=function(a,b,c,d){for(var f=0,j=arguments.length;f<j;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());j=new q.ka;for(f=0;f<arguments.length;f++)arguments[f]instanceof q.fb?j.direction=arguments[f]:arguments[f]instanceof q.ib?j.speed=arguments[f]:arguments[f]instanceof q.Na?j.ya.push(arguments[f]):arguments[f]instanceof q.Kb?j.ya.push(arguments[f]):arguments[f]instanceof Array?j.ya.push(q.ja.action(arguments[f])):arguments[f]instanceof Object?j.Ga=arguments[f]:'string'===
typeof arguments[f]&&(j.label=arguments[f]);return j};q.ja.bg=function(a,b){for(var c=0,d=arguments.length;c<d;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());a===i&&g(Error('label is required.'));d=new q.rc(a);if(b instanceof Array)d.wa=b;else for(c=1;c<arguments.length;c++)d.wa.push(arguments[c]);return d};
q.ja.oa=function(a,b,c,d){for(var f=0,j=arguments.length;f<j;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());j=new q.Lb;for(f=0;f<arguments.length;f++)arguments[f]instanceof q.fb?j.direction=arguments[f]:arguments[f]instanceof q.ib?j.speed=arguments[f]:arguments[f]instanceof q.ka?j.ga=arguments[f]:arguments[f]instanceof q.rc?j.ga=arguments[f]:arguments[f]instanceof q.Xc?j.Ga=arguments[f]:arguments[f]instanceof q.Cd?j.Ga.offsetX=arguments[f].value:arguments[f]instanceof q.Dd?j.Ga.offsetY=
arguments[f].value:arguments[f]instanceof q.Ad&&(j.Ga.za=arguments[f].value);j.ga===i&&g(Error('bullet (or bulletRef) is required.'));return j};q.ja.hg=function(a,b){for(var c=0,d=arguments.length;c<d;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());a===i&&g(Error('label is required.'));d=new q.Yc(a);if(b instanceof Array)d.wa=b;else for(c=1;c<arguments.length;c++)d.wa.push(arguments[c]);return d};
q.ja.cg=function(a,b){for(var c=0,d=arguments.length;c<d;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());a===i&&g(Error('direction is required.'));b===i&&g(Error('term is required.'));c=new q.tc;c.direction=a instanceof q.fb?a:new q.fb(a);c.Ha=b;return c};
q.ja.dg=function(a,b){for(var c=0,d=arguments.length;c<d;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());a===i&&g(Error('speed is required.'));b===i&&g(Error('term is required.'));c=new q.uc;c.speed=a instanceof q.ib?a:new q.ib(a);c.Ha=b;return c};
q.ja.Zf=function(a,b,c){for(var d=0,f=arguments.length;d<f;d++)arguments[d]instanceof Function&&(arguments[d]=arguments[d]());f=new q.qc;for(d=0;d<arguments.length;d++)arguments[d]instanceof q.Zc?f.bb=a:arguments[d]instanceof q.bd?f.eb=b:f.Ha=arguments[d];f.bb===i&&f.eb===i&&g(Error('horizontal or vertical is required.'));f.Ha===i&&g(Error('term is required.'));return f};
q.ja.wait=function(a){for(var b=0,c=arguments.length;b<c;b++)arguments[b]instanceof Function&&(arguments[b]=arguments[b]());a===i&&g(Error('value is required.'));return new q.wc(a)};q.ja.rg=function(){return new q.ad};
q.ja.repeat=function(a,b){for(var c=0,d=arguments.length;c<d;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());a===i&&g(Error('times is required.'));b===i&&g(Error('action is required.'));d=new q.vc;d.pe=a;if(b instanceof q.Na||b instanceof q.Kb)d.action=b;else if(b instanceof Array)d.action=q.ja.action(b);else{for(var f=[],c=1;c<arguments.length;c++)f.push(arguments[c]);d.action=q.ja.action(f)}return d};q.ja.ag=function(a,b){return new q.Wc(a,b)};
q.ja.ng=function(a,b){return new q.$c(a,b)};q.ja.direction=function(a,b){for(var c=0,d=arguments.length;c<d;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());a===i&&g(Error('value is required.'));c=new q.fb(a);b!==i&&(c.type=b);return c};q.ja.speed=function(a,b){for(var c=0,d=arguments.length;c<d;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());a===i&&g(Error('value is required.'));c=new q.ib(a);b&&(c.type=b);return c};
q.ja.bb=function(a,b){for(var c=0,d=arguments.length;c<d;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());a===i&&g(Error('value is required.'));c=new q.Zc(a);b&&(c.type=b);return c};q.ja.eb=function(a,b){for(var c=0,d=arguments.length;c<d;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());a===i&&g(Error('value is required.'));c=new q.bd(a);b&&(c.type=b);return c};q.ja.gg=function(a){return new q.Xc(a)};q.ja.offsetX=function(a){return new q.Cd(a)};q.ja.offsetY=function(a){return new q.Dd(a)};
q.ja.za=function(a){return new q.Ad(a)};tm.Ja=tm.Ja||{};
(function(){function a(a){for(;a<=-Math.PI;)a+=2*Math.PI;for(;Math.PI<a;)a-=2*Math.PI;return a}function b(a,c){return Math.atan2(c.y-a.y,c.x-a.x)}tm.Ja.yb=tm.createClass({init:function(a){a||g(Error('argument is invalid.',a));this.Fd=a},Hc:function(a,c){var b=this.Fd.zf();if(c===i&&0<b.length){for(var d=[],h=0,G=b.length;h<G;h++)d[d.length]=this.Gd(a,b[h]);for(var u=function(){for(var a=d.length;a--;)d[a].call(this);u.jd==d.length&&(u.ec=k,this.dispatchEvent(tm.event.Event('completeattack')))},h=
d.length;h--;)d[h].Tc=u;u.jd=0;u.Pd=function(){this.jd++};u.jd=0;u.ec=n;u.pd=k;return u}return this.Gd(a,c)},Gd:function(a,c){function b(){b.fa+=1;this.fa=b.fa;var a=b.Gc,c=b.Ze;if(c)if(b.fa<b.gd?b.direction+=b.Qb:b.fa===b.gd&&(b.direction=b.qb),b.fa<b.hd?b.speed+=b.pc:b.fa===b.hd&&(b.speed=b.Yb),b.fa<b.ed?(b.Hb+=b.Ac,b.Jb+=b.Bc):b.fa===b.ed&&(b.Hb=b.yc,b.Jb=b.zc),this.x+=Math.cos(b.direction)*b.speed*a.Ib,this.y+=Math.sin(b.direction)*b.speed*a.Ib,this.x+=b.Hb*a.Ib,this.y+=b.Jb*a.Ib,a.qd(this)){if(a.wb||
this.wb)this.rotation=(b.direction+0.5*Math.PI)*Math.RAD_TO_DEG,this.speed=b.speed;if(!(b.fa<b.qe||b.ec)){for(var f;f=b.re.next();)switch(f.Ka){case 'fire':c.We.call(this,f,a,b,c);break;case 'wait':a=0;b.qe='number'===typeof f.value?b.fa+f.value:0!==(a=~~f.value)?b.fa+a:b.fa+eval(f.value);return;case 'changeDirection':c.Se.call(this,f,a,b);break;case 'changeSpeed':c.Te.call(this,f,b);break;case 'accel':c.Qe.call(this,f,b);break;case 'vanish':this.remove();break;case 'notify':c.Xe.call(this,f)}b.ec=
k;b.Tc?b.Tc.Pd():this.dispatchEvent(tm.event.Event('completeattack'))}}else this.remove(),b.ec=k,b.Tc?b.Tc.Pd():this.dispatchEvent(tm.event.Event('completeattack'))}a=function(a){var b={},c=tm.Ja.yb.gc,f;for(f in c)c.hasOwnProperty(f)&&(b[f]=c[f]);for(f in a)a.hasOwnProperty(f)&&(b[f]=a[f]);return b}(a);a.target||g(Error('target is undefined in config.'));c=c||'top';'string'===typeof c?b.re=this.Fd.md(c):c instanceof q.ka?b.re=c.md():(window.console.error(a,c),g(Error('\u5f15\u6570\u304c\u4e0d\u6b63')));
b.Ze=this;b.Gc=a;b.qe=-1;b.ec=n;b.direction=0;b.ee=0;b.speed=0;b.ge=0;b.Hb=0;b.Jb=0;b.Qb=0;b.qb=0;b.gd=-1;b.pc=0;b.Yb=0;b.hd=-1;b.Ac=0;b.yc=0;b.Bc=0;b.zc=0;b.ed=-1;b.fa=-1;b.pd=k;return b},Ve:function(a){function b(){this.x+=b.Rd;this.y+=b.Sd;b.Gc.qd(this)||(this.remove(),this.dispatchEvent(tm.event.Event('removed')))}a=function(a){var b={},c=tm.Ja.yb.gc,f;for(f in c)c.hasOwnProperty(f)&&(b[f]=c[f]);for(f in a)a.hasOwnProperty(f)&&(b[f]=a[f]);return b}(a);a.target||g(Error('target is undefined in config.'));
b.Gc=a;b.direction=0;b.speed=0;b.Rd=0;b.Sd=0;b.pd=k;return b},We:function(a,c,d,r){if(this.Lf===i||this.sb){var h={label:a.ga.label},G;for(G in a.ga.Ga)h[G]=a.ga.Ga[G];if(h=c.Nd(h)){var u=(G=!!a.ga.ya.length)?r.Ve(c):r.Hc(c,a.ga),ka=this,R={x:this.x+a.Ga.offsetX,y:this.y+a.Ga.offsetY};d.ee=u.direction=function(h){var r=eval(h.value)*Math.DEG_TO_RAD;switch(h.type){case 'aim':return c.target?a.Ga.za?b(R,c.target)+r:b(ka,c.target)+r:r-Math.PI/2;case 'absolute':return r-Math.PI/2;case 'relative':return d.direction+
r;default:return d.ee+r}}(a.direction||a.ga.direction);d.ge=u.speed=function(a){var b=eval(a.value);switch(a.type){case 'relative':return d.speed+b;case 'sequence':return d.ge+b;default:return b}}(a.speed||a.ga.speed);h.x=R.x;h.y=R.y;G&&(u.Rd=Math.cos(u.direction)*u.speed*c.Ib,u.Sd=Math.sin(u.direction)*u.speed*c.Ib);h.wb=!!h.wb;if(c.wb||h.wb)h.rotation=(u.direction+0.5*Math.PI)*Math.RAD_TO_DEG,h.speed=u.speed;h.addEventListener('enterframe',u);h.addEventListener('removed',function(){this.removeEventListener('enterframe',
u);this.removeEventListener('removed',arguments.callee)});c.Kd?c.Kd.addChild(h):this.parent&&this.parent.addChild(h)}}},Se:function(c,d,l){var r=eval(c.direction.value)*Math.DEG_TO_RAD,h=eval(c.Ha);switch(c.direction.type){case 'aim':c=d.target;if(!c)return;l.qb=b(this,c)+r;l.Qb=a(l.qb-l.direction)/h;break;case 'absolute':l.qb=r-Math.PI/2;l.Qb=a(l.qb-l.direction)/h;break;case 'relative':l.qb=l.direction+r;l.Qb=a(l.qb-l.direction)/h;break;case 'sequence':l.Qb=r,l.qb=l.direction+l.Qb*(h-1)}l.gd=l.fa+
h},Te:function(a,b){var c=eval(a.speed.value),d=eval(a.Ha);switch(a.speed.type){case 'absolute':b.Yb=c;b.pc=(b.Yb-b.speed)/d;break;case 'relative':b.Yb=c+b.speed;b.pc=(b.Yb-b.speed)/d;break;case 'sequence':b.pc=c,b.Yb=b.speed+b.pc*d}b.hd=b.fa+d},Qe:function(a,b){var c=eval(a.Ha);b.ed=b.fa+c;if(a.bb){var d=eval(a.bb.value);switch(a.bb.type){case 'absolute':case 'sequence':b.Ac=(d-b.Hb)/c;b.yc=d;break;case 'relative':b.Ac=d,b.yc=(d-b.Hb)*c}}else b.Ac=0,b.yc=b.Hb;if(a.eb)switch(d=eval(a.eb.value),a.eb.type){case 'absolute':case 'sequence':b.Bc=
(d-b.Jb)/c;b.zc=d;break;case 'relative':b.Bc=d,b.zc=(d-b.Jb)*c}else b.Bc=0,b.zc=b.Jb},Xe:function(a){var b=tm.event.Event(a.jf);if(a.wa)for(var c in a.wa)b[c]=a.wa[c];this.dispatchEvent(b)}});var c=function(){var a=tm.graphics.Canvas();a.resize(8,8);a.setTransformCenter();a.setLineStyle(0).setStrokeStyle('rgba(0,0,0,0)');a.setFillStyle(tm.graphics.RadialGradient(0,0,0,0,0,4).addColorStopList([{offset:0,color:'white'},{offset:0.5,color:'white'},{offset:1,color:'red'}]).toStyle()).fillCircle(0,0,4);
return a}();tm.Ja.ff=function(a){var b=tm.app.Sprite(8,8,c);b.label=a.label;return b};var d=m;tm.Ja.Qd=function(a){d===m&&(d=a.getRoot());return 0<=a.x&&a.x<APP.width&&0<=a.y&&a.y<APP.height};tm.Ja.fg=function(){return k};tm.Ja.yb.gc={Nd:tm.Ja.ff,qd:tm.Ja.Qd,og:0,wb:n,Ib:2,target:m,qa:{}};q.Ba.prototype.Hc=function(a){return tm.Ja.yb(this).Hc(a)}})();/*
 gls2.js v1.0-beta

 License
 http://daishihmr.mit-license.org/
*/
tm.preload(p());tm.main(function(){aa('#canvas2d').run()});var s=m,t,v,w,z,A,B,C,D,ba,E,ca,F,H,I,J,K,da,L,M,ea,N,fa,ga,ha,O,P,Q,aa=tm.createClass({superClass:tm.app.CanvasApp,Mc:0,lg:0,Dc:1,Xb:1,Td:1,Yd:[1E9,1E10],ba:m,init:function(a){s!==m&&g(Error("class 'gls2.GlShooter2' is singleton!!"));this.superInit(a);s=this;this.resize(480,640).fitWindow();this.fps=60;this.background='rgba(0,0,0,0)';this.keyboard=tm.input.Keyboard(window);this.replaceScene(tm.app.LoadingScene({assets:{tex0:'assets/tex0.png',tex1:'assets/tex1.png',laserR:'assets/laser_r.png',laserG:'assets/laser_g.png',
laserB:'assets/laser_b.png',laserH:'assets/laser_h.png',laserHead:'assets/laser_head.png',laserFoot:'assets/laser_foot.png',aura:'assets/aura.png',explode0:'assets/explode0.png',explode1:'assets/explode1.png',shotbullet:'assets/shotbullet.png',bomb:'assets/bomb.png',soundExplode:'assets/sen_ge_taihou03.mp3'},nextScene:function(){this.Ye();return t()}.bind(this)}))},draw:function(){this.canvas.globalCompositeOperation='copy'},Ye:function(){v.sa();w.sa();this.ba=z()},lf:function(){this.stop();tm.social.Nineleap.postRanking(this.Mc,
'')}});function S(){if(0!==s.Xb&&ia.soundExplode!==s.frame){var a=tm.asset.AssetManager.get('soundExplode');a.volume=0.1*s.Xb;a&&a.clone().play();ia.soundExplode=s.frame}}var ia={};tm.app.AnimationSprite.prototype.clone=function(){return tm.app.AnimationSprite(this.ss,this.width,this.height)};A={Pe:1,Me:2,Ne:2,Le:4,se:2,De:4,te:8,Ie:0.01,Ge:0.015,He:0.0010,Ee:0.015,Fe:0.0020,Je:0.75,Ke:2,Bd:900,Ce:120,Be:120,ye:7,we:0.02,xe:0.5,ve:0.01,sc:200,ue:50};(function(){var a=m,b={'0':{x:1,y:0},45:{x:0.7,y:-0.7},90:{x:0,y:-1},135:{x:-0.7,y:-0.7},180:{x:-1,y:0},225:{x:-0.7,y:0.7},270:{x:0,y:1},315:{x:0.7,y:0.7}};B=tm.createClass({superClass:tm.app.Sprite,type:0,Wa:0,jb:k,Vb:n,ba:m,speed:4.5,Bb:m,Ob:m,je:m,ce:m,cb:m,Nc:m,Ec:m,nd:m,od:m,init:function(b,d){this.superInit('tex1',64,64);this.type=d;this.ba=b;tm.Ja.yb.gc.target=this;this.boundingRadius=2;this.altitude=10;this.Ob=this.je=C(d,100);this.ce=C(3,100);this.cb=D(this,{redBody:'laserR',greenBody:'laserG',
blueBody:'laserB',hyperBody:'laserH',head:'laserHead',foot:'laserFoot',aura:'aura'});this.cb.visible=n;this.cb.addChildTo(b);this.Ue();this.Bb=[{x:-70,y:20,d:0.1,vb:n,rb:-0.7,v:k},{x:-40,y:40,d:0.1,vb:n,rb:-0.5,v:k},{x:40,y:40,d:0.1,vb:k,rb:0.5,v:k},{x:70,y:20,d:0.1,vb:k,rb:0.7,v:k}];this.Ec=tm.app.CanvasElement().addChildTo(this);for(var f=0,j=this.Bb.length;f<j;f++){var l=this.Bb[f];ba(this,l).setPosition(l.x,l.y).addChildTo(this.Ec)}this.Df=tm.app.CircleShape(140,140,{strokeStyle:'rgba(0,0,0,0)',
fillStyle:tm.graphics.RadialGradient(70,70,0,70,70,70).addColorStopList([{offset:0,color:'rgba(255,255,255,0.1)'},{offset:0.5,color:'rgba(255,255,255,0.1)'},{offset:1,color:'rgba(255,255,255,0.0)'}]).toStyle()}).addChildTo(this);this.Df.blendMode='lighter';this.nd=tm.app.CircleShape(80,80,{fillStyle:'rgba(0,0,0,0)',strokeStyle:tm.graphics.LinearGradient(0,0,0,80).addColorStopList([{offset:0,color:'rgba(255,255,100,0.0)'},{offset:0.4,color:'rgba(255,255,100,0.1)'},{offset:0.5,color:'rgba(255,255,255,1.0)'},
{offset:0.6,color:'rgba(255,255,100,0.1)'},{offset:1,color:'rgba(255,255,100,0.0)'}]).toStyle(),lineWidth:4}).addChildTo(this);this.nd.blendMode='lighter';this.nd.update=function(){this.rotation+=2;this.visible=1===b.Ma&&!b.ra};this.od=tm.app.CircleShape(80,80,{fillStyle:'rgba(0,0,0,0)',strokeStyle:tm.graphics.LinearGradient(0,0,0,80).addColorStopList([{offset:0,color:'rgba(255,255,100,0.0)'},{offset:0.4,color:'rgba(255,255,100,0.1)'},{offset:0.5,color:'rgba(255,255,255,1.0)'},{offset:0.6,color:'rgba(255,255,100,0.1)'},
{offset:1,color:'rgba(255,255,100,0.0)'}]).toStyle(),lineWidth:4}).addChildTo(this);this.od.blendMode='lighter';this.od.update=function(){this.rotation-=2;this.visible=1===b.Ma&&!b.ra};this.ic=tm.app.CanvasElement(80,80).addChildTo(this);this.ic.blendMode='lighter';this.ic.rotation=-90;this.ic.strokeStyle='rgba(180,180,255,0.4)';this.ic.update=function(){this.visible=b.ra};this.ic.draw=function(a){a.lineCap='round';var d=b.Rb/A.Bd;a.strokeStyle='rgba(50,50,255,0.4)';a.lineWidth='10';a.strokeArc(0,
0,40,0,2*d*Math.PI,n);a.strokeStyle='rgba(100,100,255,0.4)';a.lineWidth='6';a.strokeArc(0,0,40,0,2*d*Math.PI,n);a.strokeStyle='rgba(180,180,255,0.4)';a.lineWidth='2';a.strokeArc(0,0,40,0,2*d*Math.PI,n)};this.Af=tm.app.CircleShape(80,80,{fillStyle:tm.graphics.RadialGradient(40,40,0,40,40,35).addColorStopList([{offset:0,color:'rgba(0,0,50,0.0)'},{offset:0.9,color:'rgba(0,0,50,0.8)'},{offset:1,color:'rgba(0,0,50,0.0)'}]).toStyle(),strokeStyle:'rgba(0,0,0,0)'}).addChildTo(this);this.Af.update=function(){this.visible=
b.ra};a===m&&(a=E(this.ba.Fa))},Yf:function(){return[{x:-70,y:20,d:0.1,vb:n,rb:-0.7,v:k},{x:-40,y:40,d:0.1,vb:n,rb:-0.5,v:k},{x:40,y:40,d:0.1,vb:k,rb:0.5,v:k},{x:70,y:20,d:0.1,vb:k,rb:0.7,v:k}]},Ue:function(){this.Nc=tm.app.Sprite('tex0',20,20).addChildTo(this);this.Nc.setFrameIndex(5);this.Nc.blendMode='lighter';this.Nc.update=function(a){a=0.75+0.15*Math.sin(0.2*a.frame);this.scale.set(a,a)}},ub:-1,Ic:n,Eb:n,update:function(c){this.visible=this.Vb?0===c.frame%2:k;var d=c.keyboard;if(this.jb){var f=
d.getKeyAngle();f!==m&&(f=b[f],this.x+=f.x*this.speed*(this.Eb?0.75:1),this.y+=f.y*this.speed*(this.Eb?0.75:1));this.x=T(this.x,15,465);this.y=T(this.y,15,625);var j=d.getKey('c'),f=d.getKey('z');this.ub=j?this.ub+1:this.ub-1;this.ub=T(this.ub,-1,10);this.Eb=f&&j||10===this.ub;j=this.ba.ra?3:5;this.Ic=!this.Eb&&(0<=this.ub||f)&&0===c.frame%j;f&&(this.ub=0);this.cb.x=this.x;this.cb.y=this.y-40;if(this.Eb){f=0;for(j=this.Bb.length;f<j;f++)this.Bb[f].v=n;this.Ec.rotation=0}else{this.cb.visible=n;f=0;
for(j=this.Bb.length;f<j;f++)this.Bb[f].v=k}this.Ic&&(f=Math.sin(0.2*c.frame),j=this.Ob.oa(this.x-7-6*f,this.y-5,-90),j!==m&&j.addChildTo(this.ba),j=this.Ob.oa(this.x+7+6*f,this.y-5,-90),j!==m&&j.addChildTo(this.ba));d.getKeyDown('x')&&(1===this.ba.Ma&&!this.ba.ra?(this.ba.Rf(),ca(this).addChildTo(this.ba)):!this.ba.Sb&&0<this.ba.Xa&&(q.ka.qa.$rank=Math.clamp(q.ka.qa.$rank-0.02,0,1),F(this,this.ba).setPosition(Math.clamp(this.x,96,384),Math.max(this.y-320,192)).addChildTo(this.ba)))}this.ef(d);this.Re(d);
0===c.frame%2&&(a.clone(20).setPosition(this.x-5,this.y+20).addChildTo(this.ba),a.clone(20).setPosition(this.x+5,this.y+20).addChildTo(this.ba))},Db:function(){this.Eb=this.Ic=n;this.ba.hc()},ef:function(a){var b=this.Ec;b.rotation=this.jb&&a.getKey('left')?Math.max(b.rotation-3,-40):this.jb&&a.getKey('right')?Math.min(b.rotation+3,40):3<b.rotation?b.rotation-3:-3>b.rotation?b.rotation+3:0},Re:function(a){this.jb&&a.getKey('left')?this.Wa=T(this.Wa-0.2,-3,3):this.jb&&a.getKey('right')?this.Wa=T(this.Wa+
0.2,-3,3):0>this.Wa?this.Wa=T(this.Wa+0.2,-3,3):0<this.Wa&&(this.Wa=T(this.Wa-0.2,-3,3));a=3+~~this.Wa;this.setFrameIndex(a);return a}});ba=tm.createClass({superClass:tm.app.AnimationSprite,Ab:m,$:m,init:function(a,b){this.superInit(tm.app.SpriteSheet({image:'tex1',frame:{width:32,height:32},animations:{anim0:{frames:[136,137,138,152,153,154],next:'anim0',frequency:3},anim1:{frames:[137,138,152,153,154,136].reverse(),next:'anim1',frequency:3}}}),32,32);this.Ab=b;this.$=a;this.altitude=10;this.gotoAndPlay(b.vb?
'anim0':'anim1')},update:function(b){if(this.Ab.v){this.x=this.Ab.x*(this.$.ba.ra?1.5:1);this.y=this.Ab.y*(this.$.ba.ra?1.5:1);this.rotation=Math.radToDeg(this.Ab.d*this.Ab.rb);var d=this.parent.localToGlobal(this);this.Ab.v&&0===b.frame%2&&a.clone(40).setPosition(d.x,d.y).addChildTo(b.ba);this.$.Ic&&(d=this.$.Ob.oa(d.x,d.y,this.parent.rotation+this.rotation-90),d!==m&&d.addChildTo(b.ba))}else this.x=0,this.y=-40,this.currentFrameIndex=3}})})();(function(){var a=m;H=tm.createClass({superClass:tm.app.Sprite,speed:0,Pa:k,init:function(b){this.superInit('shotbullet',64,64);this.blendMode='lighter';a===m&&(a=I(16,1,0.9,tm.graphics.Canvas().resize(16,16).setFillStyle(tm.graphics.RadialGradient(8,8,0,8,8,8).addColorStopList([{offset:0,color:'rgba(255,255,255,1.0)'},{offset:1,color:'rgba(255,128,  0,0.0)'}]).toStyle()).fillRect(0,0,16,16).element));b!==i&&this.oc(b)},update:function(){this.x+=this.Vf;this.y+=this.Wf;(-60>this.x||540<this.x||-60>
this.y||700<this.y)&&this.remove()},oc:function(a){this.setFrameIndex(a,64,64);3===a?(this.speed=45,this.boundingRadius=48,this.setScale(2,2)):(this.speed=30,this.boundingRadius=32,this.setScale(1.5,1.5))},Lc:function(b){for(var d=0;d<b;d++){var f=a.clone().setPosition(this.x,this.y).addChildTo(this.parent),j=U(2,8),l=2*Math.random()*Math.PI;f.ma=Math.cos(l)*j;f.na=Math.sin(l)*j;f.scaleX=f.scaleY=(U(0.1,0.5)+U(0.1,0.5))/2;f.addEventListener('enterframe',function(){this.x+=this.ma;this.y+=this.na;
this.ma*=0.9;this.na*=0.9})}}});H.dc=function(){for(var a=[].concat(b),d=0,f=a.length;d<f;d++)a[d].remove()};var b=H.Ea=[];C=tm.createClass({Uc:m,init:function(a,d){this.Uc=[];for(var f=0;f<d;f++){var j=H(a),l=this;j.addEventListener('added',function(){b.push(this)});j.addEventListener('removed',function(){var a=b.indexOf(this);-1!==a&&b.splice(a,1);l.Uc.push(this)});this.Uc.push(j)}},oa:function(a,b,f){var j=this.Uc.pop();if(j===i)return m;var l=ja(f);j.Vf=Math.cos(l)*j.speed;j.Wf=Math.sin(l)*j.speed;
j.setPosition(a,b);j.rotation=f+90;return j}})})();(function(){var a=m;D=tm.createClass({superClass:tm.app.Sprite,$:m,ba:m,Sa:0,frame:0,oe:m,color:m,bf:n,head:m,$d:m,Ld:m,Pa:k,init:function(a,c){this.$=a;this.ba=a.ba;var d=this;this.oe=c;this.superInit(c.redBody,50,100);this.boundingHeightBottom=1;this.pg=0;this.origin.y=1;var f=this.Ld=tm.app.AnimationSprite(tm.app.SpriteSheet({image:c.aura,frame:{width:100,height:100},animations:{red:{frames:[0,1,2,3],next:'red',frequency:2},green:{frames:[4,5,6,7],next:'green',frequency:2},blue:{frames:[8,9,10,
11],next:'blue',frequency:2},hyper:{frames:[12,13,14,15],next:'hyper',frequency:2}}}),140,140);f.y=60;f.addChildTo(this);(this.$d=tm.app.AnimationSprite(tm.app.SpriteSheet({image:c.foot,frame:{width:120,height:80},animations:{red:{frames:[0,1,2,3],next:'red',frequency:2},green:{frames:[4,5,6,7],next:'green',frequency:2},blue:{frames:[8,9,10,11],next:'blue',frequency:2},hyper:{frames:[12,13,14,15],next:'hyper',frequency:2}}}),140,80)).addChildTo(this);f=this.head=tm.app.AnimationSprite(tm.app.SpriteSheet({image:c.head,
frame:{width:80,height:80},animations:{red:{frames:[0,1,2,3],next:'red',frequency:2},green:{frames:[4,5,6,7],next:'green',frequency:2},blue:{frames:[8,9,10,11],next:'blue',frequency:2},hyper:{frames:[12,13,14,15],next:'hyper',frequency:2}}}),130,130);f.addChildTo(this);f.update=function(){this.y=d.Sa-d.y;-10<this.y&&(this.y=-10);this.visible=0<d.Sa};this.oc('blue')},oc:function(b){this.color=b;this.image=tm.asset.AssetManager.get(this.oe[this.color+'Body']);this.srcRect.x=0;this.srcRect.y=0;this.srcRect.width=
this.image.width/16;this.Ld.gotoAndPlay(this.color);this.$d.gotoAndPlay(this.color);this.head.gotoAndPlay(this.color);a=I(16,1,0.9,tm.graphics.Canvas().resize(16,16).setFillStyle(tm.graphics.RadialGradient(8,8,0,8,8,8).addColorStopList([{offset:0,color:'rgba(255,255,255,1.0)'},{offset:1,color:'rgba(  0,  0,255,0.0)'}]).toStyle()).fillRect(0,0,16,16).element);'hyper'===b?(this.boundingWidth=this.width=75,this.head.setScale(1.5,1.5)):(this.boundingWidth=this.width=50,this.head.setScale(1,1));return this},
Lc:function(b,c){c=c||this.Sa;for(var d=0;d<b;d++){var f=a.clone().setPosition(this.x,c).addChildTo(this.ba),j=U(8,14),l=U(0,Math.PI);f.ma=Math.cos(l)*j;f.na=Math.sin(l)*j;f.scaleX=f.scaleY=(U(0.5,1.5)+U(0.5,1.5))/2;f.addEventListener('enterframe',function(){this.x+=this.ma;this.y+=this.na;this.ma*=0.95;this.na*=0.95})}},xf:function(b,c,d){c=c||this.x;d=d||this.Sa;for(var f=0;f<b;f++){var j=a.clone().setPosition(c,d).addChildTo(this.ba),l=U(12,20),r=U(0,Math.PI);j.ma=Math.cos(r)*l;j.na=Math.sin(r)*
l;j.scaleX=j.scaleY=(U(1,3)+U(1,3))/2;j.addEventListener('enterframe',function(){this.x+=this.ma;this.y+=this.na;this.ma*=0.95;this.na*=0.95})}},update:function(a){(this.visible=this.$.Eb)?(this.Sa=Math.max(0,this.Sa-40),this.height=this.y-this.Sa,0===a.frame%3&&(this.frame=(this.frame+1)%16)):this.Sa=this.y-40;this.bf=this.visible},draw:function(a){var c=this.srcRect,d=this._image.element;c.x=c.width*this.frame;a.context.drawImage(d,c.x,c.height-this.height,c.width,this.height,-this.width*this.origin.x,
-this.height*this.origin.y,this.width,this.height)},kg:function(){return this.Sa},Pf:function(a){this.Sa=a;this.head.update()}});D.prototype.getter('boundingHeightTop',function(){return this.position.y-this.Sa})})();(function(){F=tm.createClass({superClass:tm.app.Object2D,Pa:k,ba:m,init:function(b,c){this.superInit();this.$=b;this.ba=c;this.me=tm.app.CircleShape(300,300,{strokeStyle:'rgba(0,0,0,0)',fillStyle:tm.graphics.RadialGradient(150,150,0,150,150,150).addColorStopList([{offset:0,color:'rgba(255,255,255,0)'},{offset:0.5,color:'rgba(255,255,255,0)'},{offset:0.9,color:'rgba(255,255,255,1)'},{offset:1,color:'rgba(255,255,255,0)'}]).toStyle()}).setScale(0.1,0.1).addChildTo(this);this.me.tweener.clear().to({scaleX:5,
scaleY:5,alpha:0},500,'easeOutQuad').call(function(){this.remove()}.bind(this.me));this.Jd();a===m&&(a=I(60,1,0.92,tm.graphics.Canvas().resize(10,10).setFillStyle(tm.graphics.RadialGradient(5,5,0,5,5,5).addColorStopList([{offset:0,color:'rgba(255,255,255,1.0)'},{offset:1,color:'rgba(  0,  0,255,0.0)'}]).toStyle()).fillRect(0,0,10,10).element));this.r=this.a=0;this.b=8;this.fa=0;this.mc=1;this.addEventListener('added',function(){this.ba.Sb=k;this.$.Vb=k;this.ba.Xa-=1;this.ba.hc();this.ba.Va("drop 'BOMBER'!!",
k)});this.addEventListener('removed',function(){this.ba.Sb=n;this.$.Vb=n})},Jd:function(){this.Ua=tm.app.AnimationSprite(tm.app.SpriteSheet({image:'bomb',frame:{width:280,height:280},animations:{animation:{frames:Array.range(0,8),next:'animation',frequency:3}}}),400,400).addChildTo(this);this.Ua.gotoAndPlay('animation');this.Ua.blendMode='lighter';this.Ua.setScale(0.1,0.1);this.Ua.tweener.clear().to({scaleX:1,scaleY:1},200,'easeOutBack').call(function(){this.update=function(){this.scaleX=this.scaleY=
Math.randf(0.9,1.1)}}.bind(this.Ua))},update:function(){for(var b=0;b<this.b;b++){var c=this.a*this.mc+2*b*Math.PI/this.b;a.clone().setPosition(Math.cos(c)*this.r+this.x,Math.sin(c)*this.r+this.y).addChildTo(this.parent)}this.a+=0.04;b=0.015*this.fa;this.r=250*Math.sin(b);2*Math.PI<b?this.remove():Math.PI<b?(this.b=16,this.fa+=3.6,this.mc=-1):(this.b=8,this.fa+=1.8,this.mc=1)}});J=tm.createClass({superClass:F,init:function(a,c){this.superInit(a,c);this.addEventListener('added',function(){this.ba.Xa=
0})},Jd:function(){this.Ua=tm.app.AnimationSprite(tm.app.SpriteSheet({image:'bomb',frame:{width:280,height:280},animations:{animation:{frames:Array.range(0,8),next:'animation',frequency:3}}}),400,400).addChildTo(this);this.Ua.gotoAndPlay('animation');this.Ua.blendMode='lighter';this.Ua.setScale(0.1,0.1);this.Ua.tweener.clear().to({scaleX:0.5,scaleY:0.5},200,'easeOutBack').call(function(){this.update=function(){this.scaleX=this.scaleY=Math.randf(0.4,0.6)}}.bind(this.Ua))},update:function(){for(var b=
0;b<this.b;b++){var c=this.a*this.mc+2*b*Math.PI/this.b;a.clone().setPosition(Math.cos(c)*this.r+this.x,Math.sin(c)*this.r+this.y).setScale(0.7,0.7).addChildTo(this.parent)}this.a+=0.04;b=0.04*this.fa;this.r=100*Math.sin(b);Math.PI<b?this.remove():(this.b=8,this.fa+=1.8,this.mc=1)}});var a=m})();K=tm.createClass({qg:0,de:0,Vd:0,$:m,ba:m,aa:m,frame:0,background:m,init:function(a){this.ba=a;this.$=a.$;this.Qf();this.aa=da();this.frame=0},Qf:function(){this.ba.Fa.background=tm.graphics.LinearGradient(0,0,0,640).addColorStopList([{offset:0,color:'#338'},{offset:1,color:'#114'}]).toStyle()},update:function(){this.kf(this.frame);this.frame+=1},kf:function(a){a=this.aa.get(a);if(a!==m)if('function'===typeof a.value)a.value.call(this);else if(L[a.value]!==i){var b=L[a.value];if(b!==m)for(var c=0;c<
b.length;c++){var d=this.Cf(b[c]);a.stop&&d.addEventListener('enemyconsumed',function(){this.aa.zd=n}.bind(this))}}},Cf:function(a){this.Vd+=1;return M(this.ba,this,a.da,a.ca).setPosition(a.x,a.y).addChildTo(this.ba).Fb()},Ef:function(){this.de+=1}});K.create=function(a,b){if(0===b)return ea(a)};
da=tm.createClass({index:0,data:m,zd:n,init:function(){this.data={}},add:function(a,b,c){this.index+=a;this.data[this.index]={stop:c,value:b}},get:function(a){a=this.data[a];return a===i?m:a.stop===k?(this.zd=k,a):this.zd?m:a}});ea=tm.createClass({superClass:K,init:function(a){this.superInit(a);this.aa.add(0,function(){this.ba.Fa.direction=0.5*Math.PI;this.ba.Fa.speed=1});this.aa.add(200,'tankRD-center');this.aa.add(200,'tankRD-left');this.aa.add(20,'heri1-right');this.aa.add(60,'heri1-center');this.aa.add(60,'heri1-left');this.aa.add(60,'tankL-top');this.aa.add(50,'heri1-right');this.aa.add(20,'tankRD-center');this.aa.add(80,'heri1-center');this.aa.add(50,'heri1-left');this.aa.add(50,'heri1-center');this.aa.add(50,'fighter-m-1');
this.aa.add(50,'fighter-m-3');this.aa.add(50,'fighter-m-5');this.aa.add(70,'heri1-right');this.aa.add(20,'heri1-center');this.aa.add(20,'heri1-left');this.aa.add(20,'tankL-top');this.aa.add(20,'tankRD-left');this.aa.add(50,'heri1-right');this.aa.add(50,'heri1-center');this.aa.add(50,'heri1-center');this.aa.add(20,'tankRD-center');this.aa.add(20,'tankRD-left');this.aa.add(50,'heri1-right');this.aa.add(50,'heri1-center');this.aa.add(50,'heri1-left');this.aa.add(20,'tankL-top');this.aa.add(50,'heri1-right');
this.aa.add(1,function(){this.ba.Fa.tweener.clear().to({speed:5},5E3,'easeInOutQuad')});this.aa.add(100,'fighter-m-0');this.aa.add(50,'fighter-m-2');this.aa.add(50,'fighter-m-4');this.aa.add(50,'fighter-m-6');this.aa.add(50,'fighter-m-4');this.aa.add(50,'fighter-m-2');this.aa.add(150,'yukishiro',k);this.aa.add(50,'heri2-left');this.aa.add(50,'heri2-center');this.aa.add(50,'heri2-right');this.aa.add(50,'heri2-left');this.aa.add(50,'heri2-center');this.aa.add(50,'heri2-right');this.aa.add(50,'fighter-m-0');
this.aa.add(50,'heri2-center');this.aa.add(50,'heri2-right');this.aa.add(50,'heri2-left');this.aa.add(50,'heri2-center');this.aa.add(50,'heri2-right');this.aa.add(50,'fighter-m-6');this.aa.add(50,'heri2-center');this.aa.add(50,'heri2-right');this.aa.add(50,'heri2-left');this.aa.add(50,'heri2-center');this.aa.add(50,'heri2-right');this.aa.add(50,'fighter-m-0');this.aa.add(50,'heri2-center');this.aa.add(50,'heri2-right');this.aa.add(50,'heri2-left');this.aa.add(50,'heri2-center');this.aa.add(50,'heri2-right');
this.aa.add(50,'fighter-m-2');this.aa.add(50,'heri2-center');this.aa.add(50,'heri2-right');this.aa.add(50,'heri2-left');this.aa.add(50,'heri2-center');this.aa.add(50,'heri2-right');this.aa.add(100,'fighter-m-2')}});w={sa:function(){la();w.explosion=Array.range(0,2).map(function(a){return tm.app.AnimationSprite(tm.app.SpriteSheet({image:'explode'+a,frame:{width:100,height:100},animations:{'default':{frame:Array.range(0,64),next:m}}},100,100))});w.shockwaveImage=tm.graphics.Canvas().resize(100,100).setStrokeStyle('rgba(0,0,0,0)').setFillStyle(tm.graphics.RadialGradient(50,50,0,50,50,50).addColorStopList([{offset:0,color:'rgba(255,255,255,0)'},{offset:0.7,color:'rgba(255,255,255,0)'},{offset:0.95,color:'rgba(255,255,255,1)'},
{offset:1,color:'rgba(255,255,255,0)'}]).toStyle()).fillCircle(50,50,50);w.shockwaveImage=tm.graphics.Canvas().resize(100,100).setStrokeStyle('rgba(0,0,0,0)').setFillStyle(tm.graphics.RadialGradient(50,50,0,50,50,50).addColorStopList([{offset:0,color:'rgba(255,255,255,0)'},{offset:0.7,color:'rgba(255,255,255,0)'},{offset:0.95,color:'rgba(255,255,255,1)'},{offset:1,color:'rgba(255,255,255,0)'}]).toStyle()).fillCircle(50,50,50);w.particle16=I(16,1,0.9,tm.graphics.Canvas().resize(16,16).setFillStyle(tm.graphics.RadialGradient(8,
8,0,8,8,8).addColorStopList([{offset:0,color:'rgba(255,255,255,1.0)'},{offset:1,color:'rgba(255,128,  0,0.0)'}]).toStyle()).fillRect(0,0,16,16).element)},Lc:function(a,b,c){a=w.particle16.clone().setPosition(a,b).addChildTo(c);b=U(5,20);c=U(Math.PI,2*Math.PI);a.ma=Math.cos(c)*b;a.na=Math.sin(c)*b;a.scaleX=a.scaleY=(U(0.1,0.5)+U(0.1,0.5))/2;a.addEventListener('enterframe',function(){this.x+=this.ma;this.y+=this.na;this.ma*=0.9;this.na*=0.9})},jg:function(a,b,c){var d=tm.app.Sprite().setPosition(a,
b).setScale(0.1).setBlendMode('lighter').addChildTo(c);d.image=w.shockwaveImage;d.tweener.clear().to({scaleX:1.4,scaleY:1.4,alpha:0},800,'easeOutQuad').call(function(){d.remove()})},yf:function(a,b,c){a=tm.app.CircleShape(300,300,{strokeStyle:'rgba(0,0,0,0)',fillStyle:tm.graphics.RadialGradient(150,150,0,150,150,150).addColorStopList([{offset:0,color:'rgba(255,255,255,0)'},{offset:0.5,color:'rgba(255,255,255,0)'},{offset:0.9,color:'rgba(255,255,255,1)'},{offset:1,color:'rgba(255,255,255,0)'}]).toStyle()}).setPosition(a,
b).setScale(0.1,0.1);a.Pa=k;a.addChildTo(c);a.tweener.clear().to({scaleX:5,scaleY:5,alpha:0},500,'easeOutQuad').call(function(){this.remove()}.bind(a))},Xd:function(a,b,c,d){S();a=w.explosion.random().clone().addEventListener('animationend',function(){this.remove()}).setScale(0.75).setPosition(a,b).setRotation(360*Math.random()).gotoAndPlay();a.Pa=k;if(d!==i){var f=d.x,j=d.y;a.addEventListener('enterframe',function(){this.x+=f;this.y+=j;f*=0.99;j*=0.99})}a.addChildTo(c)},mf:function(a,b,c){S();var d=
w.explosion.random().clone().addEventListener('animationend',function(){this.remove()}).addEventListener('enterframe',function(){this.scaleX+=0.01;this.scaleY+=0.01}).setScale(0.5).setPosition(a,b).setRotation(360*Math.random()).gotoAndPlay();d.Pa=k;d.addChildTo(c);d=w.explosion.random().clone().addEventListener('animationend',function(){this.remove()}).addEventListener('enterframe',function(){this.rotation+=2;this.x+=0.7;this.y-=0.3;this.scaleX+=0.01;this.scaleY+=0.01}).setScale(0.5).setPosition(a+
12,b).setRotation(360*Math.random()).setBlendMode('lighter').gotoAndPlay();d.Pa=k;d.addChildTo(c);d=w.explosion.random().clone().addEventListener('animationend',function(){this.remove()}).addEventListener('enterframe',function(){this.rotation-=2;this.x-=0.7;this.y-=0.3;this.scaleX+=0.01;this.scaleY+=0.01}).setScale(0.5).setPosition(a-12,b).setRotation(360*Math.random()).setBlendMode('lighter').gotoAndPlay();d.Pa=k;d.addChildTo(c)},nf:function(a,b,c){S();for(var d=0;10>d;d++){var f=w.explosion.random().clone().addEventListener('animationend',
function(){this.remove()}).addEventListener('enterframe',function(){this.x+=2*Math.cos(this.a);this.y+=2*Math.sin(this.a);this.scaleX+=0.01;this.scaleY+=0.01}).setScale(0.7).setBlendMode(0===d%2?'lighter':'source-over').setPosition(a,b).gotoAndPlay();f.a=2*Math.PI*Math.random();f.Pa=k;f.addChildTo(c)}}};
N=tm.createClass({superClass:tm.app.Object2D,target:m,Gb:0,angle:0,alpha:1,Pa:k,reverse:n,init:function(a,b){this.superInit();this.target=a;this.reverse=b;this.angle=0;this.Gb=b?0:200;this.alpha=b?1:0},update:function(){if(this.target.parent===m)this.remove();else{for(var a=0;9>a;a++){var b=this.angle+2*a/9*Math.PI;I(80,this.alpha,0.9).setPosition(Math.cos(b)*this.Gb+this.target.x,Math.sin(b)*this.Gb+this.target.y).addChildTo(this.target.parent)}this.angle+=0.05;this.Gb+=this.reverse?4:-4;this.alpha+=
this.reverse?-0.01:0.05;(0>this.Gb||200<this.Gb)&&this.remove()}}});
ca=tm.createClass({superClass:tm.app.Object2D,target:m,angle:0,Pa:k,init:function(a){this.superInit();this.target=a;this.angle=0},update:function(){if(this.target.parent===m)this.remove();else{for(var a=0;5>a;a++)I(80,1,0.9).setPosition(40*Math.cos(this.angle-0.5*Math.PI)+this.target.x+Math.rand(-2,2),40*Math.sin(this.angle-0.5*Math.PI)+this.target.y+Math.rand(-2,2)).addChildTo(this.target.parent);this.angle+=0.2;2*Math.PI<this.angle&&this.remove()}}});fa=tm.createClass({superClass:tm.graphics.Canvas,ba:m,fc:m,init:function(a){this.superInit('#scoreLabel');this.ba=a;this.resize(480,640).fitWindow();this.setText('20px Orbitron','left','top');this.fillStyle='rgba(255,255,255,0.01)';this.fc=ma(200)},update:function(){this.clear();this.strokeStyle=this.fillStyle='rgba(255,255,255,0.4)';var a;this.setText("20px 'Ubuntu Mono'",'right','top');score=(''+Math.floor(this.ba.score)).padding(16,' ');a='';for(var b=0;b<score.length;b+=4)a+=score.substring(b,
b+4)+' ';this.fillText(a,192,5);this.setText("18px 'Ubuntu Mono'",'right','top');score=('+'+Math.floor(this.ba.va)).padding(8,' ');a='';for(b=0;b<score.length;b+=4)a+=score.substring(b,b+4)+' ';this.fillText(a,192,22);this.setText('bold 18px Orbitron','left','top');this.strokeText('rank '+~~(100*q.ka.qa.$rank),10,85);this.setText('bold 18px Orbitron','left','top');this.strokeText('max '+~~this.ba.Rc+' hit',10,105);0<~~this.ba.pa&&(this.setText('bold 40px Orbitron','left','top'),this.strokeText(~~this.ba.pa+
' HIT!!',10,125));for(b=0;b<this.ba.xb-1;b++)this.drawTexture(tm.asset.AssetManager.get('tex1'),192,0,64,64,5+32*b,40,32,32);this.fillStyle='rgba(255,255,255,0.5)';for(b=0;b<this.ba.Xa;b++)this.fillRect(5+25*b,601,20,20);this.fc.update();this.fc.draw(this)}});(function(){var a=16*Math.sqrt(3),b=12.8*Math.sqrt(3);ga=tm.createClass({superClass:tm.graphics.Canvas,ea:m,init:function(){this.superInit('#background');this.resize(480,640).fitWindow();this.ea=ha();this.ea.update=function(a){this.update(a.frame)}.bind(this);this.blendMode='lighter'},update:function(c){this.ea.ma=Math.cos(this.ea.direction)*this.ea.speed;this.ea.na=Math.sin(this.ea.direction)*this.ea.speed;for(this.ea.Ya+=this.ea.ma;96<this.ea.Ya;)this.ea.Ya-=96;for(;-96>this.ea.Ya;)this.ea.Ya+=
96;for(this.ea.$a+=this.ea.na;2*a<this.ea.$a;)this.ea.$a-=2*a;for(;this.ea.$a<2*-a;)this.ea.$a+=2*a;for(this.ea.Za+=0.8*this.ea.ma;25.6*3<this.ea.Za;)this.ea.Za-=25.6*3;for(;this.ea.Za<-25.6*3;)this.ea.Za+=25.6*3;for(this.ea.ab+=0.8*this.ea.na;2*b<this.ea.ab;)this.ea.ab-=2*b;for(;this.ea.ab<2*-b;)this.ea.ab+=2*b;0===c%2&&this.draw()},draw:function(){this.ea.background!==m?this.clearColor(this.ea.background,0,0):this.clear();this.lineWidth=0.2;this.strokeStyle=tm.graphics.LinearGradient(0,0,0,640).addColorStopList([{offset:0,
color:'rgba(255,255,255,1.0)'},{offset:1,color:'rgba(255,255,255,0.5)'}]).toStyle();this.beginPath();for(var c=0,d=this.ea.Ya-96;576>d;d+=48)for(var c=0===c?a:0,f=this.ea.$a-2*a+c;f<640+2*a;f+=2*a)this.line(d,f,d+32,f),this.line(d,f,d-16,f+a),this.line(d,f,d-16,f-a);this.stroke();this.strokeStyle=tm.graphics.LinearGradient(0,0,0,640).addColorStopList([{offset:0,color:'rgba(128,128,128,1.0)'},{offset:1,color:'rgba(128,128,128,0.5)'}]).toStyle();this.beginPath();c=0;for(d=this.ea.Za-25.6*3;d<480+25.6*
3;d+=25.6*1.5){c=0===c?b:0;for(f=this.ea.ab-2*b+c;f<640+2*b;f+=2*b)this.line(d,f,d+25.6,f),this.line(d,f,d-12.8,f+b),this.line(d,f,d-12.8,f-b)}this.stroke()}});ha=tm.createClass({superClass:tm.app.Object2D,Ya:0,$a:0,Za:0,ab:0,direction:0,speed:0,ma:0,na:0,background:m,init:function(){this.superInit();this.Za=this.ab=this.Ya=this.$a=0;this.direction=0.5*Math.PI;this.speed=1;this.na=this.ma=0}})})();function V(a,b){if(a.parent===m||b.parent===m)return n;var c=a.x+a.boundingWidthRight,d=a.y-a.boundingHeightTop,f=a.y+a.boundingHeightBottom,j=b.x-b.boundingWidthLeft,l=b.y-b.boundingHeightTop,r=b.y+b.boundingHeightBottom;return a.x-a.boundingWidthLeft<b.x+b.boundingWidthRight&&c>j&&d<r&&f>l};var W=tm.createClass({superClass:tm.app.Scene,_sceneResultCallback:m,init:function(){this.superInit()},Sf:function(a,b){'function'===typeof a?this.app.pushScene(a()):a instanceof tm.app.Scene&&this.app.pushScene(a);this._sceneResultCallback=b},finish:function(a){var b=this.app;b.popScene();(b=b.currentScene)&&b._sceneResultCallback&&b._sceneResultCallback.bind(b)(a)}});var na=tm.createClass({superClass:W,titleText:m,menu:m,descriptions:m,showExit:n,title:m,selections:[],description:m,box:m,cursor:m,_selected:0,_opened:n,_finished:n,init:function(a,b,c,d,f){this.superInit();this.titleText=a;this.menu=b;this._selected=~~c;this.showExit=!!f;this.descriptions=d?d:[].concat(b);this.showExit&&(b.push('exit'),this.descriptions.push('\u524d\u306e\u753b\u9762\u3078\u623b\u308a\u307e\u3059'));a=Math.max(50*(1+b.length),50)+40;this.box=tm.app.RectangleShape(384,a,{strokeStyle:'rgba(0,0,0,0)',
fillStyle:'rgba(1,2,48,0.8)'}).setPosition(240,320);this.box.width=1;this.box.height=1;this.box.tweener.to({width:384,height:a},200,'easeOutExpo').call(this._onOpen.bind(this));this.box.addChildTo(this);this.description=tm.app.Label('',14).setPosition(240,630).addChildTo(this)},_onOpen:function(){var a=320-25*this.menu.length;this.title=tm.app.Label(this.titleText,30).setPosition(240,a).addChildTo(this);this.selections=this.menu.map(function(b,c){var d=this;a+=50;var f=tm.app.Label(b).setPosition(240,
a).addChildTo(this);f.interactive=k;f.addEventListener('touchend',function(){d._selected===c?d.closeDialog(d._selected):d._selected=c});f.width=336;return f}.bind(this));this._createCursor();this._opened=k},_createCursor:function(){this.cursor=tm.app.RectangleShape(336,10,{strokeStyle:'rgba(0,0,0,0)',fillStyle:tm.graphics.LinearGradient(0,0,336,0).addColorStopList([{offset:0,color:'rgba(  0,255,100,0.0)'},{offset:0.2,color:'rgba(  0,255,100,0.3)'},{offset:0.5,color:'rgba(  0,255,255,0.5)'},{offset:0.8,
color:'rgba(  0,255,100,0.3)'},{offset:1,color:'rgba(  0,255,100,0.0)'}]).toStyle()}).addChildTo(this);this.cursor.blendMode='lighter';this.cursor.x=240;this.cursor.s=this._selected;this.cursor.y=this.selections[this._selected].y;this.cursor.update=function(){this.s!==this.parent._selected&&(this.s=this.parent._selected,this.tweener.clear(),this.tweener.to({y:this.parent.selections[this.parent._selected].y},200,'easeOutExpo'))}},update:function(a){this.description.text=this.descriptions[this._selected];
this._opened&&(this._finished?this.cursor.visible=0===~~(a.frame/2)%2:this.showExit&&a.keyboard.getKeyDown('x')?(this._selected=this.selections.length-1,this.closeDialog(this._selected)):a.keyboard.getKeyDown('z')||a.keyboard.getKeyDown('space')?this.closeDialog(this._selected):a.keyboard.getKeyDown('down')?(this._selected+=1,this._selected=T(this._selected,0,this.selections.length-1)):a.keyboard.getKeyDown('up')&&(this._selected-=1,this._selected=T(this._selected,0,this.selections.length-1)))},closeDialog:function(a){this._finished=
k;this.tweener.clear().wait(200).call(function(){this.cursor.remove();this.title.remove();this.selections.each(function(a){a.remove()});this.box.tweener.clear();this.box.tweener.to({width:1,height:1},200,'easeInExpo').call(function(){this.finish(a)}.bind(this))}.bind(this))},draw:function(a){a.fillStyle='rgba(0,0,0,0.8)';a.fillRect(0,0,480,640)}});function X(a,b,c,d,f,j,l){l===i&&(l=k);a.Sf(na(b,c,f,j,l),d)};I=tm.createClass({superClass:tm.app.CanvasElement,alpha:1,fd:0.85,size:0,image:m,Pa:k,init:function(a,b,c,d){this.superInit();this.width=this.height=this.size=a;b!==i&&(this.alpha=b);c!==i&&(this.fd=c);this.blendMode='lighter';this.image=d?d:tm.graphics.Canvas().resize(a,a).setFillStyle(tm.graphics.RadialGradient(0.5*a,0.5*a,0,0.5*a,0.5*a,0.5*a).addColorStopList([{offset:0,color:'rgba(255,255,255,0.1)'},{offset:1,color:'rgba(  0,  0,  0,0.0)'}]).toStyle()).fillRect(0,0,a,a).element},update:function(){this.alpha*=
this.fd;0.0010>this.alpha?this.remove():1<this.alpha&&(this.alpha=1)},draw:function(a){a.context.drawImage(this.image,-this.width*this.origin.x,-this.height*this.origin.y,this.width,this.height)},clone:function(){return I(this.size,this.mg,this.fd,this.image)}});
E=tm.createClass({superClass:I,Fa:m,init:function(a,b){b=b||20;this.superInit(b,1,0.82,tm.graphics.Canvas().resize(b,b).setFillStyle(tm.graphics.RadialGradient(0.5*b,0.5*b,0,0.5*b,0.5*b,0.5*b).addColorStopList([{offset:0,color:'rgba(255,255,255,0.5)'},{offset:1,color:'rgba(  0,  0,  0,0.0)'}]).toStyle()).fillRect(0,0,b,b).element);this.Fa=a},update:function(a){this.superClass.prototype.update.apply(this,a);this.x+=this.Fa.ma;this.y+=this.Fa.na+0.3},clone:function(a){return E(this.Fa,a)}});var ma=tm.createClass({width:0,label:m,Ia:m,fa:0,init:function(a){this.width=a;this.label=tm.app.Label('_',10).setAlign('left').setBaseline('top').setPosition(-this.width/2+4,-this.height/2+4).setFillStyle('rgba(255,255,255,0.5)');this.Ia=[]},af:function(a,b){b===k&&(this.Ia.clear(),this.Ia.push(''));5<this.Ia.length&&this.Ia.splice(1,this.Ia.length-4);this.Ia.push(a);return this},df:function(){this.Ia.clear();return this},clear:function(){this.label.text='_';return this},update:function(){var a=
this.label.text,a=a.substring(0,a.length-1);if(0!==this.Ia.length)if(''!==this.Ia[0]){var b=this.Ia[0][0];this.Ia[0]=this.Ia[0].substring(1);a+=b}else this.Ia.shift(),b=a.split('\n'),3<b.length&&(b.shift(),a=b.join('\n')),a+='\n';this.label.text=a+(0===this.fa%2?'_':' ');this.fa+=1},draw:function(a){a.save();a.context.globalCompositeOperation='source-over';a.translate(480-this.width-5,5);a.fillStyle='rgba(1,2,48,0.5)';a.fillRect(0,0,this.width,64);a.translate(5,5);a.fillStyle='rgba(255,255,255,0.5)';
a.setText(this.label.fontStyle,this.label.align,this.label.baseline);this.label._lines.each(function(b,c){a.fillText(b,0,this.label.textSize*c)}.bind(this));a.restore()}});function la(){function a(a){if(1>a)return m;var c=[],d=Math.random(),f,j;for(j=0;256>j;j+=~~a){f=Math.random();for(var l=0;l<a;l++)c[j+l]=b(d,f,l/a);d=f}d=c[256-~~a];f=c[0];for(l=0;l<a;l++)c[256-~~a+l]=b(d,f,l/a);return c}function b(a,b,c){c=0.5*(1-Math.cos(c*Math.PI));return a*(1-c)+b*c}for(var c=[],d=0,f=Math.pow(2,4);8>d;d++,f*=2){var j=a(256/f);if(j===m)break;c.push(j)}j=[].concat(c[0]);d=1;for(f=0.5;d<c.length;d++,f*=0.5)for(var l=0;256>l;l++)j[l]+=c[d][l]*f;for(d=0;d<j.length;d++)j[d]/=2};(function(){var a=m,b=m;t=tm.createClass({superClass:W,result:m,fa:0,lc:[],Kc:n,be:m,fe:0,Qc:0,init:function(){this.superInit();tm.app.Label('GL-Shooter 2',50).setPosition(240,160).addChildTo(this);tm.app.Label('version 1.0-beta',22).setPosition(432,192).setAlign('right').addChildTo(this);this.be=tm.app.Label().setPosition(240,256).addChildTo(this);tm.app.Label('press space key').setPosition(240,576).addChildTo(this);this.addEventListener('enter',function(){this.Kc=n;for(var a=(''+Math.floor(s.Mc)).padding(16,
' '),b='',f=0;f<a.length;f+=4)b+=a.substring(f,f+4)+' ';this.be.text='HIGH SCORE: '+b})},draw:function(a){a.fillStyle='black';a.fillRect(0,0,480,640)},update:function(a){this.Hd(80*Math.cos(0.01*this.fa)+240,80*Math.sin(0.01*this.fa)+320,0);this.Hd(80*Math.cos(0.01*this.fa+Math.PI)+240,80*Math.sin(0.01*this.fa+Math.PI)+320,1);(a.keyboard.getKeyDown('z')||a.keyboard.getKeyDown('space'))&&!this.Kc&&this.ke();this.fa+=1},Hd:function(c,d,f){if(!this.Kc){a===m&&(a=I(80,1,0.8,tm.graphics.Canvas().resize(80,
80).setFillStyle(tm.graphics.RadialGradient(40,40,0,40,40,40).addColorStopList([{offset:0,color:'rgba(255,255,255,0.1)'},{offset:1,color:'rgba(155,  0,  0,0.0)'}]).toStyle()).fillRect(0,0,80,80).element));b===m&&(b=I(80,1,0.8,tm.graphics.Canvas().resize(80,80).setFillStyle(tm.graphics.RadialGradient(40,40,0,40,40,40).addColorStopList([{offset:0,color:'rgba(255,255,255,0.1)'},{offset:1,color:'rgba(  0,  0,155,0.0)'}]).toStyle()).fillRect(0,0,80,80).element));f=0===f?a.clone().addChildTo(this):b.clone().addChildTo(this);
f.speed=0.6;var j=U(0,2*Math.PI),l=Y(0,20);f.setPosition(Math.cos(j)*l+c,Math.sin(j)*l+d);var r=this;f.update=function(){this.x+=Math.cos(j)*this.speed;this.y+=Math.sin(j)*this.speed;if(-50>this.x||530<this.x||-50>this.y||690<this.y){this.remove();var a=r.lc.indexOf(this);-1!==a&&r.lc.splice(a,1)}};this.lc.push(f)}},ke:function(){X(this,'MAIN MENU',['start','tutorial','setting','save score'],this.If,this.fe,['\u30b2\u30fc\u30e0\u3092\u958b\u59cb\u3057\u307e\u3059','\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3092\u958b\u59cb\u3057\u307e\u3059',
'\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u307e\u3059','\u30b2\u30fc\u30e0\u3092\u7d42\u4e86\u30579leap\u306b\u30b9\u30b3\u30a2\u3092\u767b\u9332\u3057\u307e\u3059'])},If:function(a){4!==a&&(this.fe=a);switch(a){case 0:this.tweener.clear().call(function(){this.Kc=k;for(var a=0,b=this.lc.length;a<b;a++)this.lc[a].speed=8}.bind(this)).wait(1E3).call(function(){s.ba.start(2);s.replaceScene(s.ba)}.bind(this));break;case 2:this.tb();break;case 3:s.lf()}},tb:function(){X(this,'SETTING',['bgm volume','sound volume',
'difficulty'],this.ud,this.Qc,['BGM\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8a2d\u5b9a\u3057\u307e\u3059','\u52b9\u679c\u97f3\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8a2d\u5b9a\u3057\u307e\u3059','\u96e3\u6613\u5ea6\u3092\u8a2d\u5b9a\u3057\u307e\u3059'])},ud:function(a){3!==a&&(this.Qc=a);switch(a){case 0:this.vd();break;case 1:this.wd();break;case 2:this.Of();break;default:this.ke()}},vd:function(){X(this,'BGM VOLUME','012345'.split(''),this.sd,s.Dc)},sd:function(a){6!==a&&(s.Dc=a);this.tb()},wd:function(){X(this,
'SE VOLUME','012345'.split(''),this.td,s.Xb)},td:function(a){6!==a&&(s.Xb=a);this.tb()},Of:function(){X(this,'DIFFICULTY',['easy','normal','hard','very hard','hell'],this.Hf,s.Td,['\u521d\u5fc3\u8005\u3067\u3082\u5b89\u5fc3\u3057\u3066\u6311\u6226\u53ef\u80fd\u306a\u5165\u9580\u30b3\u30fc\u30b9','\u666e\u901a\u306e\u96e3\u6613\u5ea6\u3002easy\u3067\u306f\u7269\u8db3\u308a\u306a\u3044\u4eba\u3078','\u4e00\u822c\u7684\u306a\u5f3e\u5e55STG\u306e\u96e3\u6613\u5ea6','hard\u306f\u30cc\u30eb\u3059\u304e\u308b\u3068\u3044\u3046\u4eba\u5411\u3051',
'\u6b7b\u306c\u304c\u3088\u3044'])},Hf:function(a){5!==a&&(s.Td=a);this.tb()},toString:function(){return'gls2.TitleScene'}})})();tm.createClass({superClass:W,init:function(){this.superInit();tm.app.Label('This is ShipSelectScene').setAlign('center').setBaseline('middle').setPosition(240,320).addChildTo(this)}});z=tm.createClass({superClass:W,$:m,score:0,va:0,pa:0,Rc:0,Aa:0,Cb:0,Zb:m,Fa:m,xb:3,Xa:0,cc:0,Md:3,cf:6,Sb:n,Ma:0,Oc:0,ra:n,jc:0,Rb:0,ae:m,le:m,Wd:m,kd:m,Ud:m,Od:m,Bf:m,Pc:m,nc:m,init:function(){z.Ed!==m&&g(Error("class 'gls2.GameScene' is singleton!!"));this.superInit();z.Ed=this;this.nc=fa(this);this.Fa=ga().ea;this.Fa.addChildTo(this);this.ae=z.nb().addChildTo(this);this.Wd=z.nb().addChildTo(this);this.kd=z.nb().addChildTo(this);this.le=z.nb().addChildTo(this);this.Ud=z.nb().addChildTo(this);this.Od=
z.nb().addChildTo(this);this.Bf=z.nb().addChildTo(this);tm.Ja.yb.gc.Kd=this;this.Pc=tm.app.Object2D();this.Pc.addChildTo(this);this.Pc.update=function(a){this.Kf(a)}.bind(this);this.addEventListener('exit',function(){this.nc.clear()})},addChild:function(a){a instanceof B?this.le.addChild(a):a instanceof M?a.kc?this.ae.addChild(a):this.Wd.addChild(a):a.Pa?this.kd.addChild(a):a instanceof O?this.Od.addChild(a):a===this.Pc||a===this.Fa||a instanceof z.nb?this.superClass.prototype.addChild.apply(this,
arguments):(console.error('unknown type child.'),g(Error(a)))},update:function(a){this.Zb.update(a.frame);this.ra&&(this.Rb-=1,0>=this.Rb&&this.hc());this.jc=Math.max(this.jc-1,0);0===a.frame%5&&this.nc.update();this.Aa-=A.we*A.xe;0>=this.Aa&&(this.Aa=0,0<this.pa&&(0===this.Cb&&(this.Cb=this.pa*A.ve),this.va=this.va*(this.pa-this.Cb)/this.pa,this.pa-=this.Cb,0>this.pa&&(this.Cb=this.pa=this.va=0)));a.keyboard.getKeyDown('escape')?this.app.replaceScene(t()):a.keyboard.getKeyDown('space')?this.Sc(0):
a.keyboard.getKeyDown('p')&&(a.canvas.saveAsImage(),this.Sc(0))},Kf:function(){this.$.jb===n&&v.erase();var a;a=[].concat(M.Ea);for(var b=[].concat(H.Ea),c=b.length;b[--c]!==i;)for(var d=a.length;a[--d]!==i;){var f=a[d],j=b[c];if(V(f,j)&&(j.Lc(1),j.remove(),f.Db(this.ra?A.Me:A.Pe))){this.ra===n&&this.bc(A.Ie);this.Mb(1);this.va+=f.score*(~~(this.pa/A.sc)+1);this.Cc(this.va);a.erase(f);break}}j=this.$.cb;if(this.$.cb.visible){a=[].concat(M.Ea);a.sort(function(a,b){return a.y-b.y});for(d=a.length;a[--d]!==
i;)if(f=a[d],V(f,j)){j.Pf(f.y+f.boundingHeightBottom);f.Db(this.ra?A.Le:A.Ne)?(this.bc(A.Ge),this.Mb(1),this.va+=f.score*(~~(this.pa/A.sc)+1),this.Cc(this.va)):(this.Mb(0.01),this.Aa=Math.max(this.Aa,0.05),this.bc(A.He));j.Lc(2);break}b={x:this.$.x,y:this.$.y,boundingWidthLeft:50,boundingWidthRight:50,boundingHeightTop:100,boundingHeightBottom:40};a=[].concat(M.Ea);for(d=a.length;a[--d]!==i;)f=a[d],V(f,b)&&(f.Db(this.ra?A.De:A.se)?(this.bc(A.Ee),this.Mb(1),this.va+=f.score*(~~(this.pa/A.sc)+1),this.Cc(this.va)):
(this.Mb(0.01),this.Aa=Math.max(this.Aa,0.05),this.bc(A.Fe)),j.xf(2,this.$.x,this.$.y-30))}if(this.Sb){v.erase();a=[].concat(M.Ea);for(d=a.length;a[--d]!==i;)f=a[d],f.Tb()&&f.Db(A.te);this.Aa=this.pa=0}if(this.ra){d=[].concat(H.Ea);for(f=d.length;d[--f]!==i;){j=d[f];b=[].concat(O.Ea);for(a=b.length;b[--a]!==i;)c=b[a],V(j,c)&&(c.La-=6-this.Oc,0>c.La&&(j.remove(),c.Pb(),this.Mb(1),this.va+=A.ue*(~~(this.pa/A.sc)+1),this.Cc(this.va)))}}if(this.$.Vb===n&&this.Sb===n&&0>=this.jc){for(d=O.Ea.length;O.Ea[--d]!==
i;)if(a=O.Ea[d],V(a,this.$)){this.$.Db();0<this.Xa?(q.ka.qa.$rank=Math.clamp(q.ka.qa.$rank-0.01,0,1),J(this.$,this).setPosition(this.$.x,this.$.y).addChildTo(this)):this.ie();break}for(d=M.Ea.length;M.Ea[--d]!==i;)if(f=M.Ea[d],!f.kc&&V(f,this.$)){this.$.Db();0<this.Xa?(q.ka.qa.$rank=Math.clamp(q.ka.qa.$rank-0.01,0,1),J(this.$,this).setPosition(this.$.x,this.$.y).addChildTo(this)):this.ie();break}}},start:function(a){this.nc.fc.df().clear();this.score=0;this.xb=3;this.Xa=this.cc=this.Md;this.Ma=0;
this.$!==m&&this.$.remove();M.dc();H.dc();v.dc();for(var b=[].concat(this.kd.children),c=0;c<b.length;c++)b[c].remove();b=[].concat(this.Ud.children);for(c=0;c<b.length;c++)b[c].remove();this.$=B(this,a);this.Tf(0);this.hc();this.Sb=n},Tf:function(a){this.Va('3...2...1...');this.Oc=this.Rc=this.Aa=this.pa=this.va=0;this.Zb=K.create(this,a);this.tweener.clear().wait(1E3).call(function(){this.rd()}.bind(this))},rd:function(){this.Va("Let's go!");this.$.setPosition(240,740).setFrameIndex(3).addChildTo(this);
this.$.jb=n;this.$.Vb=k;this.$.tweener.clear().moveBy(0,-180,1E3,'easeOutBack').call(function(){this.jb=k}.bind(this.$)).wait(2E3).call(function(){this.Vb=n}.bind(this.$));this.Xa=this.cc},ie:function(){w.Xd(this.$.x,this.$.y,this);this.Va('I was shot down.');this.$.jb=n;this.$.remove();this.xb-=1;this.Cb=this.pa=this.Aa=0;q.ka.qa.$rank=Math.clamp(q.ka.qa.$rank-0.03,0,1);0<this.xb?this.tweener.clear().wait(1E3).call(function(){this.cc=Math.min(this.cc+1,this.cf);this.rd()}.bind(this)):this.tweener.clear().wait(2E3).call(function(){this.Nf()}.bind(this))},
vf:function(){this.Va('System rebooted.',k);this.xb=3;this.Xa=this.cc=this.Md;this.rd()},eg:p(),wf:function(){this.app.replaceScene(oa())},ig:p(),Cc:function(a){var b=this.score;this.score+=a;for(a=0;a<s.Yd.length;a++){var c=s.Yd[a];b<c&&c<=this.score&&this.pf()}s.Mc=Math.max(s.Mc,this.score)},Mb:function(a){this.ra&&(a*=A.ye);this.Cb=0;this.pa+=a;this.Rc=Math.max(this.Rc,this.pa);1<=a&&(this.Aa=1)},bc:function(a){!(0<a&&1===this.Ma)&&!(0>a&&0===this.Ma)&&(this.ra&&(a*=A.Ke),this.Ma=Math.clamp(this.Ma+
a*A.Je,0,1),1===this.Ma?(this.Va('hyper system, ready.',k),N(this.$).addChildTo(this)):0===this.Ma&&this.hc())},Rf:function(){this.Va("'HYPER SYSTEM' start!!",k);this.ra=k;this.Ma=0;this.Oc=Math.min(this.Oc+1,5);q.ka.qa.$rank=Math.clamp(q.ka.qa.$rank+0.01,0,1);q.ka.qa.$hyperOff=0.5;this.Rb=A.Bd;this.jc=A.Ce;this.$.Ob=this.$.ce;this.$.cb.oc('hyper');w.yf(this.$.x,this.$.y,this);v.erase()},hc:function(){this.ra!==n&&(this.ra=n,N(this.$,k).addChildTo(this),this.$.Ob=this.$.je,this.$.cb.oc('blue'),q.ka.qa.$hyperOff=
1,this.jc=A.Be,this.Rb=0,v.erase())},pf:function(){this.Va('Extended.');this.xb+=1},Va:function(a,b){this.nc.fc.af(a,b)},Sc:function(a){X(this,'PAUSE',['resume','setting','exit game'],this.Jf,a,['\u30b2\u30fc\u30e0\u3092\u518d\u958b\u3057\u307e\u3059','\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u307e\u3059','\u30b2\u30fc\u30e0\u3092\u4e2d\u65ad\u3057\u3001\u30bf\u30a4\u30c8\u30eb\u753b\u9762\u306b\u623b\u308a\u307e\u3059'],n)},Jf:function(a){switch(a){case 1:this.tb();break;case 2:this.Mf()}},tb:function(){X(this,
'SETTING',['bgm volume','sound volume'],this.ud,this.Qc,['BGM\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8a2d\u5b9a\u3057\u307e\u3059','\u52b9\u679c\u97f3\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8a2d\u5b9a\u3057\u307e\u3059'])},ud:function(a){3!==a&&(this.Qc=a);switch(a){case 0:this.vd();break;case 1:this.wd();break;default:this.Sc()}},Mf:function(){X(this,'REARY?',['yes','no'],this.Ff,1,['\u30b2\u30fc\u30e0\u3092\u4e2d\u65ad\u3057\u3001\u30bf\u30a4\u30c8\u30eb\u753b\u9762\u306b\u623b\u308a\u307e\u3059','\u524d\u306e\u753b\u9762\u3078\u623b\u308a\u307e\u3059'],
n)},Ff:function(a){0===a?this.app.replaceScene(t()):this.Sc(1)},vd:function(){X(this,'BGM VOLUME','012345'.split(''),this.sd,s.Dc)},sd:function(a){6!==a&&(s.Dc=a);this.tb(1)},wd:function(){X(this,'SE VOLUME','012345'.split(''),this.td,s.Xb)},td:function(a){6!==a&&(s.Xb=a);this.tb(1)},Nf:function(){X(this,'CONTINUE?',['yes','no'],this.Gf,0,['\u30b7\u30b9\u30c6\u30e0\u3092\u518d\u8d77\u52d5\u3057\u3066\u51fa\u6483\u3057\u307e\u3059','\u4f5c\u6226\u5931\u6557\u3002\u9000\u5374\u3057\u307e\u3059'],n)},
Gf:function(a){switch(a){case 0:this.vf();break;case 1:this.wf()}},draw:function(a){this.Zb!==m&&(this.gf(a),this.hf(a))},gf:function(a){if(0<this.Aa){a.fillStyle='rgba(255,'+~~(255*this.Aa)+','+~~Math.min(255,512*this.Aa)+',0.5)';var b=500*this.Aa;a.fillRect(465,635-b,10,b)}},hf:function(a){1===this.Ma?0===this.app.frame%2&&(a.fillStyle='rgba(255,255,255,0.6)',a.fillRect(5,628,200,9)):(a.fillStyle='rgba(255,255,0,0.3)',a.fillRect(5,628,200,9),0<this.Ma&&(a.fillStyle='rgba(255,255,100,1.0)',a.fillRect(5,
628,200*this.Ma,9)))}});z.nb=tm.createClass({superClass:tm.app.Object2D,init:function(){this.superInit()}});z.Ed=m;tm.createClass({superClass:W,init:function(){this.superInit()},update:p()});var oa=tm.createClass({superClass:W,init:function(){this.superInit();var a=tm.app.Label('GAME OVER');a.fillStyle='red';a.setPosition(240,320).addChildTo(this);this.interactive=k;this.addEventListener('enter',function(){this.tweener.clear().wait(5E3).call(function(){this.app.replaceScene(t())}.bind(this))})},update:function(a){a.keyboard.getKeyDown('z')&&a.replaceScene(t())},draw:function(a){a.clear()}});tm.createClass({superClass:W,init:function(){this.superInit()},update:p()});(function(){M=tm.createClass({superClass:tm.app.CanvasElement,frame:0,direction:0,speed:0,$:m,ba:m,Zb:m,ca:m,da:m,La:0,sb:k,kc:n,score:0,kb:n,Vc:m,init:function(b,c,d,f){this.superInit();this.addEventListener('completeattack',function(){this.lb()});this.addEventListener('added',function(){this.frame=0;a.push(this)});this.addEventListener('removed',function(){this.dispatchEvent(tm.event.Event('enemyconsumed'));var b=a.indexOf(this);-1!==b&&a.splice(b,1)});this.sb=k;this.kb=n;this.ba=b;this.$=b.$;this.Zb=
c;this.da=d;this.ca=f;this.score=100;this.erase=n;this.da.sa.apply(this);this.ca.sa.apply(this);this.altitude=this.kc?1:10;this.Vc={x:0,y:0}},Fb:function(){this.da.Fb.apply(this);this.ca.Fb.apply(this);return this},lb:function(){this.da.lb.apply(this);this.ca.lb.apply(this)},update:function(){this.kb===n&&(0<=this.x-this.boundingWidthLeft&&480>this.x+this.boundingWidthRight&&0<=this.y-this.boundingHeightTop&&640>this.y+this.boundingHeightBottom)&&(this.kb=k,this.da.Wb.apply(this),this.ca.Wb.apply(this));
var a=this.x,c=this.y;this.da.update.apply(this);this.ca.update.apply(this);this.kc&&(this.x+=this.ba.Fa.ma,this.y+=this.ba.Fa.na);this.frame+=1;this.Vc.x=this.x-a;this.Vc.y=this.y-c},Db:function(a){if(!this.kb)return n;this.La-=a;return 0>=this.La?(this.ca.Pb.apply(this),a=U(0,5),2>a?this.ba.Va('enemy destroy.'):4>a?this.ba.Va(this.name+' destroy.'):this.ba.Va('ETR reaction gone.'),this.Zb.Ef(this),this.erase&&v.erase(),this.remove(),k):n},draw:function(a){this.ca.draw.call(this,a)},Tb:function(){return 0<=
this.x+this.width/2&&480>this.x-this.width/2&&0<=this.y+this.height/2&&640>this.y-this.height/2},Lf:function(){return this.sb}});M.dc=function(){for(var b=[].concat(a),c=0,d=b.length;c<d;c++)b[c].remove()};var a=M.Ea=[]})();(function(){P=tm.createClass({sa:function(){this.name='abstract enemy';this.La=9999},Fb:p(),lb:p(),update:p(),Wb:p(),draw:p(),Pb:function(){w.Xd(this.x,this.y,this.ba,this.Vc)}});P.ta=tm.createClass({superClass:P,init:function(){this.superInit()},sa:function(){this.name='kujo';this.La=2;this.la=a('tex1',64,64);this.boundingRadius=24;this.score=100},update:function(){this.scaleX=this.x<this.$.x?-1:1},draw:function(a){2>this.frame%4?this.la.setFrameIndex(7):this.la.setFrameIndex(8);this.la.draw(a)}});
P.ta=P.ta();P.ha=tm.createClass({superClass:P,init:function(){this.superInit()},sa:function(){this.name='kiryu';this.La=3;this.la=a('tex1',64,64);this.boundingRadius=24;this.score=300},update:function(){this.scaleX=this.x<this.$.x?-1:1},draw:function(a){2>this.frame%4?this.la.setFrameIndex(9):this.la.setFrameIndex(10);this.la.draw(a)}});P.ha=P.ha();P.ua=tm.createClass({superClass:P,init:function(){this.superInit()},sa:function(){this.name='natsuki';this.La=5;this.kc=k;this.la=a('tex1',48,48);this.boundingRadius=
24;this.score=300},update:function(){switch(~~(this.dir/(0.25*Math.PI))){case 0:this.la.setFrameIndex(16,64,64);break;case 1:this.la.setFrameIndex(24,64,64);break;case 2:this.la.setFrameIndex(23,64,64);break;case 3:this.la.setFrameIndex(11,64,64);break;case 4:this.la.setFrameIndex(12,64,64);break;case 5:this.la.setFrameIndex(13,64,64);break;case 6:this.la.setFrameIndex(14,64,64);break;case 7:this.la.setFrameIndex(15,64,64)}},draw:function(a){this.la.draw(a)},Pb:function(){w.mf(this.x,this.y,this.ba)}});
P.ua=P.ua();P.gb=tm.createClass({superClass:P,init:function(){this.superInit()},sa:function(){this.name='kurokawa';this.La=80;this.la=a('tex1',128,128);this.la.srcRect.x=320;this.la.srcRect.y=128;this.la.srcRect.width=128;this.la.srcRect.height=128;this.boundingWidth=100;this.boundingHeight=20;this.score=3E3},update:p(),draw:function(a){this.la.draw(a)},Pb:function(){w.nf(this.x,this.y,this.ba)}});P.gb=P.gb();P.$b=tm.createClass({superClass:P,init:function(){this.superInit()},sa:function(){this.name=
'yukishiro';this.erase=k;this.La=1500;this.score=5E4;this.boundingWidth=200;this.boundingHeight=80},draw:function(a){a.fillStyle='yellow';a.fillRect(-100,-40,200,80)}});P.$b=P.$b();var a=tm.createClass({superClass:tm.app.Sprite,init:function(a,c,d){this.superInit(a,c,d)},draw:function(a){var c=this.srcRect;a.context.drawImage(this._image.element,c.x,c.y,c.width,c.height,-this.width*this.origin.x,-this.height*this.origin.y,this.width,this.height)}})})();(function(){function a(a){var b=[].concat(a._listeners.enterframe);if(b)for(var f=0,j=b.length;f<j;f++)b[f]&&b[f].pd&&a.removeEventListener('enterframe',b[f])}function b(a,b){var f=v[b].Hc();a.addEventListener('enterframe',f);a.addEventListener('completeattack',function(){this.removeEventListener('enterframe',f)})}Q=tm.createClass({sa:p(),Fb:p(),lb:p(),update:p(),Wb:p()});Q.Ra=tm.createClass({superClass:Q,init:function(){this.superInit()},Fb:function(){var a=U(64,192);this.tweener.clear().wait(Y(10,
500)).move(this.x,a,7*a,'easeOutQuad').call(function(){b(this,'basic0-0')}.bind(this))},lb:function(){this.tweener.clear().wait(1E3).moveBy(0,-640,2E3,'easeInQuad').call(function(){this.remove()}.bind(this))}});Q.Ra=Q.Ra();Q.mb=tm.createClass({superClass:Q,init:function(){this.superInit()},Fb:function(){var a=U(192,320);this.tweener.clear().wait(Y(10,500)).move(this.x,a,7*a,'easeOutQuad').call(function(){b(this,'basic0-0')}.bind(this))},lb:function(){this.tweener.clear().wait(1E3).moveBy(0,-640,2E3,
'easeInQuad').call(function(){this.remove()}.bind(this))}});Q.mb=Q.mb();Q.ha=tm.createClass({superClass:Q,init:function(){this.superInit()},sa:function(){this.angle=0.5*Math.PI;this.yd=Y(0,60);this.speed=0},update:function(){this.frame===this.yd?this.speed=8:this.frame===this.yd+10?b(this,'basic1-0'):this.yd<this.frame&&this.y<this.$.y&&(this.angle+=Math.atan2(this.$.y-this.y,this.$.x-this.x)<this.angle?-0.02:0.02,this.angle=T(this.angle,0.5,Math.PI-0.5));this.x+=Math.cos(this.angle)*this.speed;this.y+=
Math.sin(this.angle)*this.speed;!this.Tb()&&this.kb&&this.remove();if(9E4>(this.x-this.$.x)*(this.x-this.$.x)+(this.y-this.$.y)*(this.y-this.$.y)||this.y>this.$.y)this.sb=n}});Q.ha=Q.ha();Q.Xf=tm.createClass({superClass:Q,init:function(){this.superInit()},sa:function(){this.speed=0.8;this.dir=0},Wb:function(){b(this,'basic2-0')},update:function(){this.x+=Math.cos(this.dir)*this.speed;this.y+=Math.sin(this.dir)*this.speed;this.kb&&!this.Tb()&&this.remove();this.sb=this.y<this.$.y}});Q.Oa=tm.createClass({superClass:Q,
init:function(){this.superInit()},sa:function(){this.speed=0.7;this.dir=0.25*Math.PI},Wb:function(){b(this,'basic2-0')},update:function(){this.x+=Math.cos(this.dir)*this.speed;this.y+=Math.sin(this.dir)*this.speed;this.kb&&!this.Tb()&&this.remove();this.sb=this.y<this.$.y}});Q.Oa=Q.Oa();Q.zb=tm.createClass({superClass:Q,init:function(){this.superInit()},sa:function(){this.speed=1;this.dir=Math.PI},Wb:function(){b(this,'basic2-0')},update:function(){this.x+=Math.cos(this.dir)*this.speed;this.y+=Math.sin(this.dir)*
this.speed;this.kb&&!this.Tb()&&this.remove();this.sb=this.y<this.$.y}});Q.zb=Q.zb();Q.hb=tm.createClass({superClass:Q,init:function(){this.superInit()},sa:function(){this.tweener.clear().moveBy(0,320,800,'easeOutQuad').call(function(){b(this,'kurokawa-1')}.bind(this))},update:function(){this.y+=0.5;this.kb&&!this.Tb()&&this.remove();this.sb=this.y<this.$.y}});Q.hb=Q.hb();Q.Oe=tm.createClass({superClass:Q,xd:m,init:function(a){this.superInit();this.xd=a},sa:function(){this.ld=this.ne=n;this.tweener.clear().move(240,
192,1200,'easeOutQuad').call(function(){this.ne=k;this.lb();var a=function(){var b=2*Math.random()*Math.PI,f=Math.randf(48,144);this.tweener.move(240+Math.cos(b)*f,192+0.5*Math.sin(b)*f,3E3,'easeInOutQuad').call(a)}.bind(this);a()}.bind(this))},update:function(){this.ne!==n&&(1500<this.frame&&this.ld===n)&&(console.log('end'),this.ld=k,a(this),this.tweener.clear().move(this.x,-100,1200,'easeInQuad').call(function(){this.remove()}.bind(this)))},lb:function(){if(!this.ld){var a=this.da.xd.shift();b(this,
a);this.da.xd.push(a)}}});Q.$b=Q.Oe(['honoka-1'])})();var Z=Q,$=P;
L={'heri1-left':[{da:Z.Ra,ca:$.ha,x:48,y:-100},{da:Z.mb,ca:$.ha,x:96,y:-100},{da:Z.Ra,ca:$.ha,x:144,y:-100},{da:Z.mb,ca:$.ha,x:192,y:-100},{da:Z.Ra,ca:$.ha,x:240,y:-100}],'heri1-center':[{da:Z.Ra,ca:$.ha,x:144,y:-100},{da:Z.mb,ca:$.ha,x:192,y:-100},{da:Z.Ra,ca:$.ha,x:240,y:-100},{da:Z.mb,ca:$.ha,x:288,y:-100},{da:Z.Ra,ca:$.ha,x:336,y:-100}],'heri1-right':[{da:Z.Ra,ca:$.ha,x:240,y:-100},{da:Z.mb,ca:$.ha,x:288,y:-100},{da:Z.Ra,ca:$.ha,x:336,y:-100},{da:Z.mb,ca:$.ha,x:384,y:-100},{da:Z.Ra,ca:$.ha,x:432,
y:-100}],'heri2-left':[{da:Z.ha,ca:$.ta,x:48,y:-100},{da:Z.ha,ca:$.ta,x:96,y:-100},{da:Z.ha,ca:$.ta,x:144,y:-100},{da:Z.ha,ca:$.ta,x:192,y:-100},{da:Z.ha,ca:$.ta,x:240,y:-100}],'heri2-center':[{da:Z.ha,ca:$.ta,x:144,y:-100},{da:Z.ha,ca:$.ta,x:192,y:-100},{da:Z.ha,ca:$.ta,x:240,y:-100},{da:Z.ha,ca:$.ta,x:288,y:-100},{da:Z.ha,ca:$.ta,x:336,y:-100}],'heri2-right':[{da:Z.ha,ca:$.ta,x:240,y:-100},{da:Z.ha,ca:$.ta,x:288,y:-100},{da:Z.ha,ca:$.ta,x:336,y:-100},{da:Z.ha,ca:$.ta,x:384,y:-100},{da:Z.ha,ca:$.ta,
x:432,y:-100}],'tankRD-left':[{da:Z.Oa,ca:$.ua,x:78,y:-50},{da:Z.Oa,ca:$.ua,x:28,y:-100},{da:Z.Oa,ca:$.ua,x:-22,y:-150},{da:Z.Oa,ca:$.ua,x:-72,y:-200},{da:Z.Oa,ca:$.ua,x:-122,y:-250}],'tankRD-center':[{da:Z.Oa,ca:$.ua,x:222,y:-50},{da:Z.Oa,ca:$.ua,x:172,y:-100},{da:Z.Oa,ca:$.ua,x:122,y:-150},{da:Z.Oa,ca:$.ua,x:72,y:-200},{da:Z.Oa,ca:$.ua,x:22,y:-250}],'tankL-top':[{da:Z.zb,ca:$.ua,x:550,y:-128},{da:Z.zb,ca:$.ua,x:620,y:-128},{da:Z.zb,ca:$.ua,x:690,y:-128},{da:Z.zb,ca:$.ua,x:760,y:-128},{da:Z.zb,ca:$.ua,
x:830,y:-128}],'fighter-m-0':[{da:Z.hb,ca:$.gb,x:96,y:-192}],'fighter-m-1':[{da:Z.hb,ca:$.gb,x:144,y:-192}],'fighter-m-2':[{da:Z.hb,ca:$.gb,x:192,y:-192}],'fighter-m-3':[{da:Z.hb,ca:$.gb,x:240,y:-192}],'fighter-m-4':[{da:Z.hb,ca:$.gb,x:288,y:-192}],'fighter-m-5':[{da:Z.hb,ca:$.gb,x:336,y:-192}],'fighter-m-6':[{da:Z.hb,ca:$.gb,x:384,y:-192}],yukishiro:[{da:Z.$b,ca:$.$b,x:240,y:-100}]};(function(){function a(a,b,c,d,f){return h.action([h.oa(h.direction(a,'absolute'),c,d,f,i,i),h.repeat(12,[h.oa(h.direction((b-a)/12,'sequence'),c,d,f,i,i)])])}function b(a,b,c,d,f){return h.action([h.oa(h.direction(b),d,f,i,i,i),h.repeat(a,[h.oa(h.direction((c-b)/a,'sequence'),d,f,i,i,i)])])}function c(a){return h.oa(h.direction(0),a||f,h.ga)}function d(a){return h.speed('$rank*2.0 + 1.40 + ('+(a===i?0:a)+'*0.1)')}function f(a){return h.speed('$rank*2.0 + 1.10 + ('+(a===i?0:a)+'*0.1)')}function j(a){return h.speed('$rank*2.0 + 0.80 + ('+
(a===i?0:a)+'*0.1)')}function l(a){return h.speed('$rank*2.0 + 0.50 + ('+(a===i?0:a)+'*0.1)')}function r(a){return h.wait(a+'*(1-$rank)*$hyperOff')}v={};var h=q.ja;v['basic0-0']=new q.Ba({top:h.action([c])});v['basic0-4']=new q.Ba({top:h.action([h.repeat(3,[h.repeat(5,[h.oa(h.direction(-20),h.speed('$loop.count*0.06+0.75'),h.ga),h.oa(h.direction(0),h.speed('$loop.count*0.06+0.75'),h.ga),h.oa(h.direction(20),h.speed('$loop.count*0.06+0.75'),h.ga)]),r(40)])])});v['basic1-0']=new q.Ba({top:h.action([h.repeat(999,
[r(20),c(function(a){return h.speed('$rank*2.0 + 1.70 + ('+(a===i?0:a)+'*0.1)')})])])});v['basic2-0']=new q.Ba({top:h.action([h.wait('120'),h.repeat(999,[r(50),c(d)])])});v['kurokawa-1']=new q.Ba({top0:h.action([h.repeat(3,[h.repeat(3,[h.repeat(3,[h.oa(h.direction(-45),d('$loop.count'),h.ga({frame:2}),h.offsetX(-45),h.za(k)),h.oa(h.direction(-15),d('$loop.count'),h.ga({frame:2}),h.offsetX(-45),h.za(k)),h.oa(h.direction(15),d('$loop.count'),h.ga({frame:2}),h.offsetX(-45),h.za(k)),h.oa(h.direction(45),
d('$loop.count'),h.ga({frame:2}),h.offsetX(-45),h.za(k)),h.oa(h.direction(-45),d('$loop.count'),h.ga({frame:2}),h.offsetX(45),h.za(k)),h.oa(h.direction(-15),d('$loop.count'),h.ga({frame:2}),h.offsetX(45),h.za(k)),h.oa(h.direction(15),d('$loop.count'),h.ga({frame:2}),h.offsetX(45),h.za(k)),h.oa(h.direction(45),d('$loop.count'),h.ga({frame:2}),h.offsetX(45),h.za(k))]),r(90)]),r(120)])]),top1:h.action([h.repeat(3,[h.oa(h.direction(0),d,h.ga({Nb:k,frame:3}),h.offsetX(-45),h.za(k)),r(45),h.oa(h.direction(0),
d,h.ga({Nb:k,frame:3}),h.offsetX(45),h.za(k)),r(45)])])});v['honoka-1']=new q.Ba({top0:h.action([h.wait(60),h.repeat(10,[b(6,-40,40,f,h.ga({Nb:k,frame:4})),r(30),b(7,-40,40,j,h.ga({Nb:k,frame:4})),r(30)])]),top1:h.action([h.wait(60),h.repeat(5,[b(2,-2,2,j(2),h.ga({frame:1})),b(3,-3,3,j(3),h.ga({frame:1})),b(4,-4,4,j(4),h.ga({frame:1})),b(5,-5,5,j(5),h.ga({frame:1})),r(110)])]),top2:h.action([h.repeat(20,[a(-10,-170,l,h.ga({Nb:k,frame:0}),h.offsetX(-80)),r(30)])]),top3:h.action([h.repeat(20,[a(10,
170,l,h.ga({Nb:k,frame:0}),h.offsetX(80)),r(30)])])});v.sa=function(){for(var a=0;500>a;a++)G.push(O());a=v.Gc=tm.Ja.yb.gc;a.qd=function(a){return!(a instanceof O)||!(-50>a.x||530<a.x||-50>a.y||690<a.y)};a.Nd=function(a){var b=G.shift(0);if(b)return u.push(b),b.setFrameIndex(a.frame===i?1:a.frame),a.Nb?(b.scaleX=1,b.scaleY=1,b.wb=n,b.update=function(){this.rotation+=15}):(b.scaleX=0.8,b.scaleY=1.5,b.wb=k),b;console.warn('\u5f3e\u304c\u8db3\u308a\u306a\u3044\uff01')};a.Qd=function(a){return-80<=a.x&&
560>a.x&&-80<=a.y&&720>a.y};a.Ib=4;q.ka.qa.$rank=0;q.ka.qa.$hyperOff=1};v.erase=function(){for(var a=[].concat(u),b=0,c=a.length;b<c;b++)a[b].Pb()};v.dc=function(){for(var a=[].concat(u),b=0,c=a.length;b<c;b++)a[b].remove()};O=tm.createClass({superClass:tm.app.Sprite,La:0,init:function(){this.superInit('tex0',20,20);this.boundingRadius=7;this.addEventListener('added',function(){this.La=50});this.addEventListener('removed',function(){G.push(this);var a=u.indexOf(this);-1!==a&&u.splice(a,1);this.clearEventListener('enterframe')})},
Pb:function(){tm.app.CircleShape(20,20,{strokeStyle:'rgba(0,0,0,0)',fillStyle:tm.graphics.RadialGradient(10,10,0,10,10,10).addColorStopList([{offset:0,color:'rgba(255,100,100,0.0)'},{offset:0.3,color:'rgba(255,100,100,0.0)'},{offset:0.7,color:'rgba(255,100,100,1.0)'},{offset:1,color:'rgba(255,100,100,1.0)'}]).toStyle()}).setPosition(this.x,this.y).setScale(0.1,0.1).addChildTo(this.parent).update=function(){this.scaleX+=0.1;this.scaleY+=0.1;this.alpha*=0.92;1E-4>this.alpha&&this.remove()};this.remove()}});
var G=[],u=O.Ea=[]})();var T,U,ja,Y,pa;T=function(a,b,c){return a<b?b:a>c?c:a};pa=Math.PI/180;ja=function(a){return a*pa};Y=function(a,b){return window.Math.floor(Math.random()*(b-a+1))+a};U=function(a,b){return window.Math.random()*(b-a)+a};
