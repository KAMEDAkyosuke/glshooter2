/*
 bulletml.js v0.5.0-SNAPSHOT

 License
 http://daishihmr.mit-license.org/
*/
function h(b){throw b;}var i=void 0,j=!0,k=null,l=!1;function n(){return function(){}}var q={sh:this};
(function(){function b(a,b){for(var f=0,g=a.length;f<g;f++)if(a[f].label==b)return a[f]}q.ia=function(a){this.type="none";this.root=this;this.Ma=[];this.Sd=[];this.ae=[];if(a!==i){for(var b in a)a.hasOwnProperty(b)&&(a[b].label=b,a[b]instanceof q.ob?this.Ma.push(a[b]):a[b]instanceof q.dc?this.Sd.push(a[b]):a[b]instanceof q.Lc&&this.ae.push(a[b]));a=0;for(b=this.Ma.length;a<b;a++)this.Ma[a].wb(this);a=0;for(b=this.Sd.length;a<b;a++)this.Sd[a].wb(this);a=0;for(b=this.ae.length;a<b;a++)this.ae[a].wb(this)}};
q.ia.prototype.ug=function(a){return b(this.Ma,a)};q.ia.prototype.Si=function(){for(var a=[],b=0,f=this.Ma.length;b<f;b++){var g=this.Ma[b];g.label&&0===g.label.indexOf("top")&&(a[a.length]=g.label)}return a};q.ia.prototype.Ji=function(a){var b;if(b=this.ug(a))return b;h(Error("action labeled '"+a+"' is undefined."))};q.ia.prototype.Ki=function(a){return b(this.Sd,a)};q.ia.prototype.Li=function(a){var b;if(b=this.Ki(a))return b;h(Error("bullet labeled '"+a+"' is undefined."))};q.ia.prototype.Mi=function(a){return b(this.ae,
a)};q.ia.prototype.Ni=function(a){var b;if(b=this.Mi(a))return b;h(Error("fire labeled '"+a+"' is undefined."))};q.dc=function(){this.root=this.label=k;this.direction=new q.Qb(0);this.speed=new q.Tb(1);this.Ma=[];this.Fa={};this.ra={}};q.dc.prototype.clone=function(a){var b=new q.dc;b.label=this.label;b.root=this.root;b.Ma=this.Ma;b.direction=new q.Qb(a.Ha(this.direction.value));b.direction.type=this.direction.type;b.speed=new q.Tb(a.Ha(this.speed.value));b.speed.type=this.speed.type;b.Fa=this.Fa;
b.ra=a.ra;return b};q.dc.prototype.wb=function(a){this.root=a;for(var b=0,f=this.Ma.length;b<f;b++)this.Ma[b].wb(a)};q.Cd=function(a){this.root=k;this.label=a;this.Ja=[]};q.Cd.prototype.clone=function(a){var b=a.ra;a.ra=a.Qe(this.Ja);var f=this.root.Li(this.label).clone(a);a.ra=b;return f};q.Cd.prototype.wb=function(a){this.root=a};q.La=function(){this.fb=""};q.La.prototype.wb=function(a){this.root=a};q.ob=function(){this.fb="action";this.root=this.label=k;this.Bb=[];this.Ja=[]};q.ob.prototype=new q.La;
q.ob.prototype.wb=function(a){this.root=a;for(var b=0,f=this.Bb.length;b<f;b++)this.Bb[b].wb(a)};q.ob.prototype.clone=function(){var a=new q.ob;a.label=this.label;a.root=this.root;a.Bb=this.Bb;return a};q.Kc=function(a){this.fb="actionRef";this.label=a;this.root=k;this.Ja=[]};q.Kc.prototype=new q.La;q.Kc.prototype.clone=function(){var a=new q.ob;a.root=this.root;a.Bb.push(this);return a};q.Lc=function(){this.fb="fire";this.oa=this.speed=this.direction=this.root=this.label=k;this.Fa=new q.Gd};q.Lc.prototype=
new q.La;q.Lc.prototype.wb=function(a){this.root=a;this.oa&&this.oa.wb(a)};q.ze=function(a){this.fb="fireRef";this.label=a;this.Ja=[]};q.ze.prototype=new q.La;q.Ed=function(){this.fb="changeDirection";this.direction=new q.Qb;this.Za=0};q.Ed.prototype=new q.La;q.Fd=function(){this.fb="changeSpeed";this.speed=new q.Tb;this.Za=0};q.Fd.prototype=new q.La;q.Bd=function(){this.fb="accel";this.Mb=new q.Ce;this.Pb=new q.Oe;this.Za=0};q.Bd.prototype=new q.La;q.Md=function(a){this.fb="wait";this.value=a||0};
q.Md.prototype=new q.La;q.Ne=function(){this.fb="vanish"};q.Ne.prototype=new q.La;q.Kd=function(){this.fb="repeat";this.Yg=0;this.action=k;this.Ja=[]};q.Kd.prototype=new q.La;q.Kd.prototype.wb=function(a){this.root=a;this.action&&this.action.wb(a)};q.we=function(a,b){this.fb="bind";this.Cj=a;this.Hi=b};q.we.prototype=new q.La;q.Ie=function(a,b){this.fb="notify";this.Ei=a;this.Ja=b||k};q.Ie.prototype=new q.La;q.ph=new q.La;q.Qb=function(a){this.type="aim";this.value=a||0};q.Tb=function(a){this.type=
"absolute";this.value=a===i?1:a};q.Ce=function(a){this.type="absolute";this.value=a||0};q.Oe=function(a){this.type="absolute";this.value=a||0};q.Gd=function(a){a=a||{};this.offsetX=a.offsetX||0;this.offsetY=a.offsetY||0;this.ma=j;a.ma!==i&&(this.ma=!!a.ma)};q.Xf=function(a){this.value=a||0};q.Yf=function(a){this.value=a||0};q.Mf=function(a){this.value=!!a}})();q.Ca=function(b){this.dg=b;this.Nd=[];this.hc=-1;this.Sa=k;this.ra={}};
q.Ca.prototype.next=function(){this.hc+=1;if(this.Sa!==k){var b=this.Sa.Bb[this.hc];if(b!==i){if(b instanceof q.ob)return this.fd(),this.Sa=b,this.ra=this.Pe(),this.next();if(b instanceof q.Kc)return this.fd(),this.Sa=this.dg.Ji(b.label),this.ra=this.Qe(b.Ja),this.next();if(b instanceof q.Kd)return this.ra.Yc=0,this.ra.Lg=this.Ha(b.Yg)|0,this.fd(),this.Sa=b.action.clone(),this.ra=this.Pe(),this.next();if(b instanceof q.Lc){var a=new q.Lc;a.oa=b.oa.clone(this);b.direction!==k&&(a.direction=new q.Qb(this.Ha(b.direction.value)),
a.direction.type=b.direction.type);b.speed!==k&&(a.speed=new q.Tb(this.Ha(b.speed.value)),a.speed.type=b.speed.type);a.Fa=new q.Gd;a.Fa.offsetX=this.Ha(b.Fa.offsetX);a.Fa.offsetY=this.Ha(b.Fa.offsetY);a.Fa.ma=b.Fa.ma;return a}return b instanceof q.ze?(this.fd(),this.Sa=new q.ob,this.Sa.Bb=[this.dg.Ni(b.label)],this.ra=this.Qe(b.Ja),this.next()):b instanceof q.Ed?(a=new q.Ed,a.direction.type=b.direction.type,a.direction.value=this.Ha(b.direction.value),a.Za=this.Ha(b.Za),a):b instanceof q.Fd?(a=new q.Fd,
a.speed.type=b.speed.type,a.speed.value=this.Ha(b.speed.value),a.Za=this.Ha(b.Za),a):b instanceof q.Bd?(a=new q.Bd,a.Mb.type=b.Mb.type,a.Mb.value=this.Ha(b.Mb.value),a.Pb.type=b.Pb.type,a.Pb.value=this.Ha(b.Pb.value),a.Za=this.Ha(b.Za),a):b instanceof q.Md?new q.Md(this.Ha(b.value)):b instanceof q.Ne?b:b instanceof q.we?(this.ra["$"+b.Cj]=this.Ha(b.Hi),q.ph):b instanceof q.Ie?b:k}this.ri();if(this.Sa===k)return k;if((b=this.Sa.Bb[this.hc])&&"repeat"==b.fb)this.ra.Yc++,this.ra.Yc<this.ra.Lg&&(this.fd(),
this.Sa=b.action.clone(),this.ra=this.Pe());return this.next()}return k};q.Ca.prototype.fd=function(){this.Nd.push({action:this.Sa,cursor:this.hc,scope:this.ra});this.hc=-1};q.Ca.prototype.ri=function(){var b=this.Nd.pop();b?(this.hc=b.cursor,this.Sa=b.action,this.ra=b.scope):(this.hc=-1,this.Sa=k,this.ra={})};
q.Ca.prototype.Ha=function(b){var a;if("boolean"===typeof b||"number"===typeof b)return b;if(isNaN(a=Number(b))){if((a=this.ra[b])||(a=q.Ca.ub[b]))return a;if("$rand"===b)return Math.random()}else return a;a={};for(var d in q.Ca.ub)q.Ca.ub.hasOwnProperty(d)&&(a[d]=q.Ca.ub[d]);for(d in this.ra)this.ra.hasOwnProperty(d)&&(a[d]=this.ra[d]);a.$rand=Math.random();(d=this.Nd[this.Nd.length-1])&&(a.$loop={index:d.scope.Yc,count:d.scope.Yc+1,first:0===d.scope.Yc,last:d.scope.Yc+1>=d.scope.Lg});return(new Function("return "+
b.split("$").join("this.$"))).apply(a)};q.Ca.prototype.Qe=function(b){var a={};if(b)for(var d=0,f=b.length;d<f;d++)a["$"+(d+1)]=this.Ha(b[d]);else for(d in this.ra)this.ra.hasOwnProperty(d)&&(a[d]=this.ra[d]);return a};q.Ca.prototype.Pe=function(){var b={},a;for(a in this.ra)this.ra.hasOwnProperty(a)&&(b[a]=this.ra[a]);return b};q.ia.prototype.df=function(b){var a=new q.Ca(this);if(b=this.ug(b))a.Sa=b;return a};
q.dc.prototype.df=function(){var b=new q.Ca(this.root),a=new q.ob;a.root=this.root;a.Bb=this.Ma;b.Sa=a;b.ra=this.ra;return b};q.Ca.ub={};q.va=function(b){b=b||"";for(var a in q.va)q.va.hasOwnProperty(a)&&(q.sh[b+a]=q.va[a])};
q.va.action=function(b){if(0<arguments.length)for(var a=0,d=arguments.length;a<d;a++)arguments[a]instanceof Function&&(arguments[a]=arguments[a]());if(b instanceof Array){a=0;for(d=b.length;a<d;a++)b[a]instanceof Function&&(b[a]=b[a]())}var f=new q.ob;if(b instanceof Array)b.some(function(a){return!(a instanceof q.La)})&&h(Error("argument type error.")),f.Bb=b;else{a=0;for(d=arguments.length;a<d;a++)arguments[a]instanceof q.La?f.Bb[a]=arguments[a]:h(Error("argument type error."))}return f};
q.va.Ga=function(b,a){for(var d=0,f=arguments.length;d<f;d++)arguments[d]instanceof Function&&(arguments[d]=arguments[d]());b===i&&h(Error("label is required."));f=new q.Kc(b);if(a instanceof Array)f.Ja=a;else for(d=1;d<arguments.length;d++)f.Ja.push(arguments[d]);return f};
q.va.oa=function(b,a,d,f){for(var g=0,p=arguments.length;g<p;g++)arguments[g]instanceof Function&&(arguments[g]=arguments[g]());p=new q.dc;for(g=0;g<arguments.length;g++)arguments[g]instanceof q.Qb?p.direction=arguments[g]:arguments[g]instanceof q.Tb?p.speed=arguments[g]:arguments[g]instanceof q.ob?p.Ma.push(arguments[g]):arguments[g]instanceof q.Kc?p.Ma.push(arguments[g]):arguments[g]instanceof Array?p.Ma.push(q.va.action(arguments[g])):arguments[g]instanceof Object?p.Fa=arguments[g]:"string"===
typeof arguments[g]&&(p.label=arguments[g]);return p};q.va.Ij=function(b,a){for(var d=0,f=arguments.length;d<f;d++)arguments[d]instanceof Function&&(arguments[d]=arguments[d]());b===i&&h(Error("label is required."));f=new q.Cd(b);if(a instanceof Array)f.Ja=a;else for(d=1;d<arguments.length;d++)f.Ja.push(arguments[d]);return f};
q.va.fire=function(b,a,d,f){for(var g=0,p=arguments.length;g<p;g++)arguments[g]instanceof Function&&(arguments[g]=arguments[g]());p=new q.Lc;for(g=0;g<arguments.length;g++)arguments[g]instanceof q.Qb?p.direction=arguments[g]:arguments[g]instanceof q.Tb?p.speed=arguments[g]:arguments[g]instanceof q.dc?p.oa=arguments[g]:arguments[g]instanceof q.Cd?p.oa=arguments[g]:arguments[g]instanceof q.Gd?p.Fa=arguments[g]:arguments[g]instanceof q.Xf?p.Fa.offsetX=arguments[g].value:arguments[g]instanceof q.Yf?p.Fa.offsetY=
arguments[g].value:arguments[g]instanceof q.Mf&&(p.Fa.ma=arguments[g].value);p.oa===i&&h(Error("bullet (or bulletRef) is required."));return p};q.va.Nj=function(b,a){for(var d=0,f=arguments.length;d<f;d++)arguments[d]instanceof Function&&(arguments[d]=arguments[d]());b===i&&h(Error("label is required."));f=new q.ze(b);if(a instanceof Array)f.Ja=a;else for(d=1;d<arguments.length;d++)f.Ja.push(arguments[d]);return f};
q.va.Jj=function(b,a){for(var d=0,f=arguments.length;d<f;d++)arguments[d]instanceof Function&&(arguments[d]=arguments[d]());b===i&&h(Error("direction is required."));a===i&&h(Error("term is required."));d=new q.Ed;d.direction=b instanceof q.Qb?b:new q.Qb(b);d.Za=a;return d};
q.va.Td=function(b,a){for(var d=0,f=arguments.length;d<f;d++)arguments[d]instanceof Function&&(arguments[d]=arguments[d]());b===i&&h(Error("speed is required."));a===i&&h(Error("term is required."));d=new q.Fd;d.speed=b instanceof q.Tb?b:new q.Tb(b);d.Za=a;return d};
q.va.Hj=function(b,a,d){for(var f=0,g=arguments.length;f<g;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());g=new q.Bd;for(f=0;f<arguments.length;f++)arguments[f]instanceof q.Ce?g.Mb=b:arguments[f]instanceof q.Oe?g.Pb=a:g.Za=arguments[f];g.Mb===i&&g.Pb===i&&h(Error("horizontal or vertical is required."));g.Za===i&&h(Error("term is required."));return g};
q.va.wait=function(b){for(var a=0,d=arguments.length;a<d;a++)arguments[a]instanceof Function&&(arguments[a]=arguments[a]());b===i&&h(Error("value is required."));return new q.Md(b)};q.va.nb=function(){return new q.Ne};
q.va.repeat=function(b,a){for(var d=0,f=arguments.length;d<f;d++)arguments[d]instanceof Function&&(arguments[d]=arguments[d]());b===i&&h(Error("times is required."));a===i&&h(Error("action is required."));f=new q.Kd;f.Yg=b;if(a instanceof q.ob||a instanceof q.Kc)f.action=a;else if(a instanceof Array)f.action=q.va.action(a);else{for(var g=[],d=1;d<arguments.length;d++)g.push(arguments[d]);f.action=q.va.action(g)}return f};q.va.bb=function(b,a){return new q.we(b,a)};
q.va.Tj=function(b,a){return new q.Ie(b,a)};q.va.direction=function(b,a){for(var d=0,f=arguments.length;d<f;d++)arguments[d]instanceof Function&&(arguments[d]=arguments[d]());b===i&&h(Error("value is required."));d=new q.Qb(b);a!==i&&(d.type=a);return d};q.va.speed=function(b,a){for(var d=0,f=arguments.length;d<f;d++)arguments[d]instanceof Function&&(arguments[d]=arguments[d]());b===i&&h(Error("value is required."));d=new q.Tb(b);a&&(d.type=a);return d};
q.va.Mb=function(b,a){for(var d=0,f=arguments.length;d<f;d++)arguments[d]instanceof Function&&(arguments[d]=arguments[d]());b===i&&h(Error("value is required."));d=new q.Ce(b);a&&(d.type=a);return d};q.va.Pb=function(b,a){for(var d=0,f=arguments.length;d<f;d++)arguments[d]instanceof Function&&(arguments[d]=arguments[d]());b===i&&h(Error("value is required."));d=new q.Oe(b);a&&(d.type=a);return d};q.va.Mj=function(b){return new q.Gd(b)};q.va.offsetX=function(b){return new q.Xf(b)};q.va.offsetY=function(b){return new q.Yf(b)};
q.va.ma=function(b){return new q.Mf(b)};tm.eb=tm.eb||{};
(function(){function b(a){for(;a<=-Math.PI;)a+=2*Math.PI;for(;Math.PI<a;)a-=2*Math.PI;return a}function a(a,b){return Math.atan2(b.y-a.y,b.x-a.x)}tm.eb.sc=tm.createClass({init:function(a){a||h(Error("argument is invalid.",a));this.$f=a},Wd:function(a,b){var d=this.$f.Si();if(b===i&&0<d.length){for(var f=[],G=0,r=d.length;G<r;G++)f[f.length]=this.ag(a,d[G]);for(var s=function(){if(!s.stop){for(var a=f.length;a--;)f[a].call(this);s.$e==f.length&&(s.ld=j,this.dispatchEvent(tm.event.Event("completeattack")))}},G=
f.length;G--;)f[G].le=s;s.$e=0;s.lg=function(){this.$e++};s.$e=0;s.ld=l;s.hf=j;s.stop=l;return s}return this.ag(a,b)},ag:function(a,b){function d(){if(!d.stop){d.ja+=1;this.ja=d.ja;var a=d.Ud,b=d.qi;if(b)if(d.ja<d.Ye?d.direction+=d.Sc:d.ja===d.Ye&&(d.direction=d.kc),d.ja<d.Ze?d.speed+=d.Ad:d.ja===d.Ze&&(d.speed=d.bd),d.ja<d.Te?(d.Hc+=d.Qd,d.Jc+=d.Rd):d.ja===d.Te&&(d.Hc=d.Od,d.Jc=d.Pd),this.x+=Math.cos(d.direction)*d.speed*a.Ic,this.y+=Math.sin(d.direction)*d.speed*a.Ic,this.x+=d.Hc*a.Ic,this.y+=d.Jc*
a.Ic,a.jf(this)){if(a.qc||this.qc)this.rotation=(d.direction+0.5*Math.PI)*Math.RAD_TO_DEG,this.speed=d.speed;if(!(d.ja<d.Zg||d.ld)){for(var f;f=d.$g.next();)switch(f.fb){case "fire":b.ni.call(this,f,a,d,b);break;case "wait":a=0;d.Zg="number"===typeof f.value?d.ja+f.value:0!==(a=~~f.value)?d.ja+a:d.ja+eval(f.value);return;case "changeDirection":b.ii.call(this,f,a,d);break;case "changeSpeed":b.ji.call(this,f,d);break;case "accel":b.gi.call(this,f,d);break;case "vanish":this.remove();break;case "notify":b.oi.call(this,
f)}d.ld=j;d.le?d.le.lg():this.dispatchEvent(tm.event.Event("completeattack"))}}else this.remove(),d.ld=j,d.le?d.le.lg():this.dispatchEvent(tm.event.Event("completeattack"))}}a=function(a){var b={},d=tm.eb.sc.md,f;for(f in d)d.hasOwnProperty(f)&&(b[f]=d[f]);for(f in a)a.hasOwnProperty(f)&&(b[f]=a[f]);return b}(a);a.target||h(Error("target is undefined in config."));b=b||"top";"string"===typeof b?d.$g=this.$f.df(b):b instanceof q.dc?d.$g=b.df():(window.console.error(a,b),h(Error("\u5f15\u6570\u304c\u4e0d\u6b63")));
d.qi=this;d.Ud=a;d.Zg=-1;d.ld=l;d.direction=0;d.Hg=0;d.speed=0;d.Jg=0;d.Hc=0;d.Jc=0;d.Sc=0;d.kc=0;d.Ye=-1;d.Ad=0;d.bd=0;d.Ze=-1;d.Qd=0;d.Od=0;d.Rd=0;d.Pd=0;d.Te=-1;d.ja=-1;d.stop=l;d.hf=j;return d},mi:function(a){function b(){b.stop||(this.x+=b.pg,this.y+=b.qg,b.Ud.jf(this)||this.remove())}a=function(a){var b={},d=tm.eb.sc.md,f;for(f in d)d.hasOwnProperty(f)&&(b[f]=d[f]);for(f in a)a.hasOwnProperty(f)&&(b[f]=a[f]);return b}(a);a.target||h(Error("target is undefined in config."));b.Ud=a;b.direction=
0;b.speed=0;b.pg=0;b.qg=0;b.stop=l;b.hf=j;return b},ni:function(b,d,f,C){if(this.mj===i||this.kb){var G={label:b.oa.label},r;for(r in b.oa.Fa)G[r]=b.oa.Fa[r];if(G=d.kg(G)){C=(r=0===b.oa.Ma.length)?C.mi(d):C.Wd(d,b.oa);var s=this,A={x:this.x+b.Fa.offsetX,y:this.y+b.Fa.offsetY};f.Hg=C.direction=function(r){var m=eval(r.value)*Math.DEG_TO_RAD;switch(r.type){case "aim":return d.target?b.Fa.ma?a(A,d.target)+m:a(s,d.target)+m:m-Math.PI/2;case "absolute":return m-Math.PI/2;case "relative":return f.direction+
m;default:return f.Hg+m}}(b.direction||b.oa.direction);f.Jg=C.speed=function(a){var b=eval(a.value);switch(a.type){case "relative":return f.speed+b;case "sequence":return f.Jg+b;default:return b}}(b.speed||b.oa.speed);G.x=A.x;G.y=A.y;r&&(C.pg=Math.cos(C.direction)*C.speed*d.Ic,C.qg=Math.sin(C.direction)*C.speed*d.Ic);G.qc=!!G.qc;if(d.qc||G.qc)G.rotation=(C.direction+0.5*Math.PI)*Math.RAD_TO_DEG,G.speed=C.speed;G.addEventListener("enterframe",C);d.fg?d.fg.addChild(G):this.parent&&this.parent.addChild(G)}}},
ii:function(d,f,t){var C=eval(d.direction.value)*Math.DEG_TO_RAD,G=eval(d.Za);switch(d.direction.type){case "aim":d=f.target;if(!d)return;t.kc=a(this,d)+C;t.Sc=b(t.kc-t.direction)/G;break;case "absolute":t.kc=C-Math.PI/2;t.Sc=b(t.kc-t.direction)/G;break;case "relative":t.kc=t.direction+C;t.Sc=b(t.kc-t.direction)/G;break;case "sequence":t.Sc=C,t.kc=t.direction+t.Sc*(G-1)}t.Ye=t.ja+G},ji:function(a,b){var d=eval(a.speed.value),f=eval(a.Za);switch(a.speed.type){case "absolute":b.bd=d;b.Ad=(b.bd-b.speed)/
f;break;case "relative":b.bd=d+b.speed;b.Ad=(b.bd-b.speed)/f;break;case "sequence":b.Ad=d,b.bd=b.speed+b.Ad*f}b.Ze=b.ja+f},gi:function(a,b){var d=eval(a.Za);b.Te=b.ja+d;if(a.Mb){var f=eval(a.Mb.value);switch(a.Mb.type){case "absolute":case "sequence":b.Qd=(f-b.Hc)/d;b.Od=f;break;case "relative":b.Qd=f,b.Od=(f-b.Hc)*d}}else b.Qd=0,b.Od=b.Hc;if(a.Pb)switch(f=eval(a.Pb.value),a.Pb.type){case "absolute":case "sequence":b.Rd=(f-b.Jc)/d;b.Pd=f;break;case "relative":b.Rd=f,b.Pd=(f-b.Jc)*d}else b.Rd=0,b.Pd=
b.Jc},oi:function(a){var b=tm.event.Event(a.Ei);if(a.Ja)for(var d in a.Ja)b[d]=a.Ja[d];this.dispatchEvent(b)}});var d=function(){var a=tm.graphics.Canvas();a.resize(8,8);a.setTransformCenter();a.setLineStyle(0).setStrokeStyle("rgba(0,0,0,0)");a.setFillStyle(tm.graphics.RadialGradient(0,0,0,0,0,4).addColorStopList([{offset:0,color:"white"},{offset:0.5,color:"white"},{offset:1,color:"red"}]).toStyle()).fillCircle(0,0,4);return tm.asset.Texture(a.canvas.toDataURL())}();tm.eb.Bi=function(a){var b=tm.app.Sprite(d,
8,8);b.label=a.label;return b};var f=k;tm.eb.og=function(a){if(f===k){if(!a.getRoot().app)return j;f=a.getRoot().app;console.log(f instanceof tm.app.BaseApp)}return 0<=a.x&&a.x<f.width&&0<=a.y&&a.y<f.height};tm.eb.Kj=function(){return j};tm.eb.sc.md={kg:tm.eb.Bi,jf:tm.eb.og,Wj:0,qc:l,Ic:2,target:k};q.ia.prototype.Wd=function(a){return tm.eb.sc(this).Wd(a)}})();/*
 gls2.js v1.0-beta

 License
 http://daishihmr.mit-license.org/
*/
tm.preload(n());tm.main(function(){aa("#canvas2d").run()});var u=k,v,ba,w,z,B,D,ca,da,ea,fa,ha,ia,ja,ka,F,H,la,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,za,Aa,Ba,Ca,Da,Ea,Fa,J,N,Ga,Ha,O,P,Ia,Ja,S,aa=tm.createClass({superClass:tm.display.CanvasApp,Ec:0,Ag:0,Cg:0,Bg:0,yg:0,jd:3,Gc:3,af:1,ca:k,init:function(b){u!==k&&h(Error("class 'gls2.GlShooter2' is singleton!!"));this.superInit(b);u=this;this.resize(480,640).fitWindow();this.fps=v.rh;this.background="rgba(0,0,0,0)";this.Jf=[];this.keyboard=tm.input.Keyboard(window);this.replaceScene(tm.app.LoadingScene({assets:{tex0:"assets/tex0.png",
tex1:"assets/tex1.png",tex_stage1:"assets/tex_stage1.png",tex_tank1:"assets/tex_tank1.png",fighter:"assets/fighters.png",laserR:"assets/laser_r.png",laserG:"assets/laser_g.png",laserB:"assets/laser_b.png",laserH:"assets/laser_h.png",laserHead:"assets/laser_head.png",laserFoot:"assets/laser_foot.png",aura:"assets/aura.png",explode0:"assets/explode0.png",explode1:"assets/explode1.png",explode2:"assets/explode2.png",shotbullet:"assets/shotbullet.png",bomb:"assets/bomb.png",bombIcon:"assets/bomb_icon.png",
result_bg:"assets/result_bg.png",hino:"assets/enemy_hino.png",hoshizora_y:"assets/enemy_hoshizora_y.png",hoshizora_t:"assets/enemy_hoshizora_t.png",extendItem:"assets/extendItem.png",bgmShipSelect:"assets2/nc44200.mp3",bgm1:"assets2/nc54073.mp3",bgm2:"assets2/nc28687.mp3",bgm4:"assets2/nc80728.mp3",bgm5:"assets2/nc60627.mp3",bgmBoss:"assets2/nc29206.mp3",bgmResult:"assets2/nc54077.mp3",bgmEnding:"assets2/nc44202.mp3","sound/explode":"assets2/sen_ge_taihou03.mp3","sound/explode2":"assets2/sen_ge_bom13.mp3",
"sound/explode3":"assets2/sen_ge_bom02.mp3","sound/star":"assets2/se_maoudamashii_system24.mp3","sound/bomb":"assets2/sen_ge_bom17.mp3","sound/warning":"assets2/meka_ge_keihou06.mp3","sound/select":"assets2/se_maoudamashii_system36.mp3","sound/decision":"assets2/se_maoudamashii_system03.mp3","sound/voHyperStandBy":"assets/vo_hyper_standby.mp3","sound/voHyperReady":"assets/vo_hyper_ready.mp3","sound/voHyperStart0":"assets/vo_hyper_start.mp3","sound/voHyperStart1":"assets/vo_hyper_start2.mp3","sound/voBomb":"assets/vo_bomb.mp3",
"sound/voExtend":"assets/vo_extend.mp3","sound/voGetBomb":"assets/vo_getbomb.mp3","sound/voJacms":"assets/vo_jacms.mp3","sound/voLetsGo":"assets/vo_letsgo.mp3","sound/voSelectShip":"assets/vo_select_your_battle_ship.mp3","sound/voWarning":"assets/vo_warning.mp3",star:"assets/star.png"},nextScene:function(){this.pi();return ba()}.bind(this)}))},update:function(){for(var b=[].concat(this.Jf),a=0;a<b.length;a++)b[a].frame===this.frame?b[a].fn():this.Jf.erase(b[a])},draw:function(){this.canvas.globalCompositeOperation=
"copy"},pi:function(){w.setup(12345);["tex_stage1","tex_tank1"].forEach(function(b){var a=tm.asset.AssetManager.get(b),d=tm.graphics.Canvas();d.resize(a.width,a.height);d.drawTexture(a,0,0);d=d.getBitmap();d.filter({calc:function(a,b,d,f,G){G.setPixelIndex(b,a[0],0,0)}});var f=tm.graphics.Canvas();f.resize(a.width,a.height);f.drawBitmap(d,0,0);tm.asset.AssetManager.set(b+"Red",f)});z.setup();B.setup();this.ca=D()},Lj:function(){this.stop();tm.social.Nineleap.postRanking(this.Ec,"")},Jf:k,setTimeoutF:function(b,
a){timeoutTasks.push({frame:this.frame+a,fn:b})}});tm.display.AnimationSprite.prototype.clone=function(){return tm.app.AnimationSprite(this.ss,this.width,this.height)};function Ka(b,a){return(b.x-a.x)*(b.x-a.x)+(b.y-a.y)*(b.y-a.y)};v={Rh:l,rh:60,Nh:0,Qf:[1E9,1E10],Ph:3E3,Sf:3,Rf:[3,2,1],eh:[6,4,2],Zf:1,Mh:0.1,Tf:1,Oh:0.25,Dj:1,Ej:0.25,dh:2,Eh:0.005,Ah:0.01,Bh:0.001,wh:0.015,xh:0.002,Gh:0.001,Ih:0.01,Fh:0,Dh:0,Ch:0,zh:0.03,yh:0.004,Hh:0,Jh:0,Kh:0.75,Ae:10,Hd:800,vh:0.25,uh:0.1,Lh:[1,3,5,10,18,26,42,66,90,130,200],lh:0.02,mh:0.5,kh:0.01,Pf:1E3,hh:10,fh:1,ei:1E3,di:100,ci:0,bi:0,ai:1E3,$h:100,qh:0.5,ih:4,nh:22500,gh:50,Uh:10,Lf:l,ah:j,Yh:1E3,Zh:2E3,Vh:4E3,Wh:1E4,Xh:2E7,Qh:100,th:"tmshooter"};(function(){var b=k,a={"0":{x:1,y:0},45:{x:0.7,y:-0.7},90:{x:0,y:-1},135:{x:-0.7,y:-0.7},180:{x:-1,y:0},225:{x:-0.7,y:0.7},270:{x:0,y:1},315:{x:0.7,y:0.7}};ca=tm.createClass({superClass:tm.display.Sprite,type:0,style:0,lb:0,Xb:j,hd:j,Zc:l,ca:k,speed:0,ib:k,Rc:k,Og:k,ee:k,$b:k,ef:k,Vb:k,ff:k,gf:k,frame:0,init:function(a,f,g){this.superInit("fighter",64,64);this.ca=a;this.type=f;this.style=g;tm.eb.sc.md.target=this;this.speed=[6,5,4.5][f];this.boundingRadius=3;this.altitude=10;this.Rc=this.Og=da(f,
100);this.ee=da(3,100);this.$b=ea(this,{redBody:"laserR",greenBody:"laserG",blueBody:"laserB",hyperBody:"laserH",head:"laserHead",foot:"laserFoot",aura:"aura"});this.$b.visible=l;this.li();this.ib=this.ki();1===this.style&&(this.ib=[this.ib[1],this.ib[2]]);this.Vb=tm.display.CanvasElement().addChildTo(this);f=0;for(g=this.ib.length;f<g;f++){var p=this.ib[f];fa(this,p).setPosition(p.x,p.y).addChildTo(this.Vb)}this.$i=tm.display.CircleShape(140,140,{strokeStyle:"rgba(0,0,0,0)",fillStyle:tm.graphics.RadialGradient(70,
70,0,70,70,70).addColorStopList([{offset:0,color:"rgba(255,255,255,0.1)"},{offset:0.5,color:"rgba(255,255,255,0.1)"},{offset:1,color:"rgba(255,255,255,0.0)"}]).toStyle()}).addChildTo(this);this.$i.blendMode="lighter";this.ff=tm.display.CircleShape(80,80,{fillStyle:"rgba(0,0,0,0)",strokeStyle:tm.graphics.LinearGradient(0,0,0,80).addColorStopList([{offset:0,color:"rgba(255,255,100,0.0)"},{offset:0.4,color:"rgba(255,255,100,0.1)"},{offset:0.5,color:"rgba(255,255,255,1.0)"},{offset:0.6,color:"rgba(255,255,100,0.1)"},
{offset:1,color:"rgba(255,255,100,0.0)"}]).toStyle(),lineWidth:4}).addChildTo(this);this.ff.blendMode="lighter";this.ff.update=function(){this.rotation+=2;this.visible=0<a.Ba&&!a.wa};this.gf=tm.display.CircleShape(80,80,{fillStyle:"rgba(0,0,0,0)",strokeStyle:tm.graphics.LinearGradient(0,0,0,80).addColorStopList([{offset:0,color:"rgba(255,255,100,0.0)"},{offset:0.4,color:"rgba(255,255,100,0.1)"},{offset:0.5,color:"rgba(255,255,255,1.0)"},{offset:0.6,color:"rgba(255,255,100,0.1)"},{offset:1,color:"rgba(255,255,100,0.0)"}]).toStyle(),
lineWidth:4}).addChildTo(this);this.gf.blendMode="lighter";this.gf.update=function(){this.rotation-=2;this.visible=0<a.Ba&&!a.wa};this.pd=tm.display.CanvasElement(80,80).addChildTo(this);this.pd.blendMode="lighter";this.pd.rotation=-90;this.pd.strokeStyle="rgba(180,180,255,0.4)";this.pd.update=function(){this.visible=a.wa};this.pd.draw=function(b){b.lineCap="round";var f=a.Wc/v.Hd;b.strokeStyle="rgba(50,50,255,0.4)";b.lineWidth="12";b.strokeArc(0,0,40,0,2*f*Math.PI,l);b.strokeStyle="rgba(100,100,255,0.4)";
b.lineWidth="8";b.strokeArc(0,0,40,0,2*f*Math.PI,l);b.strokeStyle="rgba(180,180,255,0.4)";b.lineWidth="4";b.strokeArc(0,0,40,0,2*f*Math.PI,l)};this.Ui=tm.display.CircleShape(80,80,{fillStyle:tm.graphics.RadialGradient(40,40,0,40,40,35).addColorStopList([{offset:0,color:"rgba(0,0,50,0.0)"},{offset:0.9,color:"rgba(0,0,50,0.8)"},{offset:1,color:"rgba(0,0,50,0.0)"}]).toStyle(),strokeStyle:"rgba(0,0,0,0)"}).addChildTo(this);this.Ui.update=function(){this.visible=a.wa};b===k&&(b=ha(this.ca.ga))},ki:function(){if(0===
this.type)return[{x:0,Bc:0,y:40,d:0,xb:j,rb:-0.7,v:j},{x:0,Bc:0,y:40,d:0,xb:j,rb:0.5,v:j},{x:0,Bc:0,y:40,d:0,xb:j,rb:-0.5,v:j},{x:0,Bc:0,y:40,d:0,xb:j,rb:0.7,v:j}];if(1===this.type)return[{x:-70,y:20,d:0.1,xb:l,rb:-0.7,v:j},{x:-40,y:40,d:0.1,xb:l,rb:-0.5,v:j},{x:40,y:40,d:0.1,xb:j,rb:0.5,v:j},{x:70,y:20,d:0.1,xb:j,rb:0.7,v:j}];if(2===this.type)return[{x:-60,y:40,d:0.6,xb:l,rb:-0.7,v:j},{x:-30,y:20,d:0.4,xb:l,rb:-0.5,v:j},{x:30,y:20,d:0.4,xb:j,rb:0.5,v:j},{x:60,y:40,d:0.6,xb:j,rb:0.7,v:j}]},li:function(){this.ef=
tm.display.Sprite("tex0",20,20).addChildTo(this);this.ef.setFrameIndex(5);this.ef.update=function(a){a=1.2+0.15*Math.sin(0.2*a.frame);this.scale.set(a,a)}},oc:-1,Vc:l,tb:l,update:function(d){this.visible=this.Zc?0===d.frame/2%2:j;var f=d.keyboard;if(this.Xb){var g=f.getKeyAngle();g!==k&&(g=a[g],this.x+=g.x*this.speed*(this.tb?0.5:1),this.y+=g.y*this.speed*(this.tb?0.5:1));this.x=T(this.x,15,465);this.y=T(this.y,15,625);var p=f.getKey("c")&&this.hd,g=f.getKey("z")&&this.hd;this.oc=p?this.oc+1:this.oc-
1;this.oc=T(this.oc,-1,10);this.tb=g&&p||10===this.oc;p=this.ca.wa?3:5;this.Vc=!this.tb&&(0<=this.oc||g)&&0===d.frame%p;g&&(this.oc=0);this.$b.x=this.x;this.$b.y=this.y-40;f.getKeyDown("x")&&this.hd&&(0<this.ca.Ba&&!this.ca.wa?(this.ca.xj(),ia(this).addChildTo(this.ca)):!this.ca.Xc&&0<this.ca.jb&&(this.gb=T(this.gb-2,0,1),this.ca.gd(-0.02),ja(this,this.ca).setPosition(T(this.x,96,384),Math.max(this.y-320,192)).addChildTo(this.ca)))}else this.tb=this.Vc=l;this.Vc&&(g=Math.sin(0.2*d.frame),p=this.Rc.fire(this.x-
7-6*g,this.y-5,-90),p!==k&&p.addChildTo(this.ca),p=this.Rc.fire(this.x+7+6*g,this.y-5,-90),p!==k&&p.addChildTo(this.ca));if(this.tb){g=0;for(p=this.ib.length;g<p;g++)this.ib[g].v=l;this.Vb.rotation=0}else{this.$b.visible=l;g=0;for(p=this.ib.length;g<p;g++)this.ib[g].v=j}this.Ai(f);this.hi(f,d.frame);0===d.frame%2&&(b.clone(20).setPosition(this.x-5,this.y+20).addChildTo(this.ca),b.clone(20).setPosition(this.x+5,this.y+20).addChildTo(this.ca));this.frame=d.frame},Yb:function(){this.tb=this.Vc=l;this.ca.Yd();
this.ca.Na=0;this.ca.Ia=0;this.ca.Ea=0},Ai:function(a){if(0===this.type)for(a=this.ib.length;this.ib[--a]!==i;){var b=this.ib[a];0===a?b.x=b.Bc+60*Math.cos(0.1*this.frame):1===a?b.x=b.Bc+-60*Math.cos(0.1*this.frame):2===a?b.x=b.Bc+60*Math.sin(0.1*this.frame):3===a&&(b.x=b.Bc+-60*Math.sin(0.1*this.frame))}else 1===this.type&&(b=this.Vb,b.rotation=this.tb?0:this.Xb&&a.getKey("left")?Math.max(b.rotation-3,-50):this.Xb&&a.getKey("right")?Math.min(b.rotation+3,50):3<b.rotation?b.rotation-3:-3>b.rotation?
b.rotation+3:0)},hi:function(a,b){this.Xb&&a.getKey("left")?this.lb=T(this.lb-0.2,-3,3):this.Xb&&a.getKey("right")?this.lb=T(this.lb+0.2,-3,3):0>this.lb?this.lb=T(this.lb+0.2,-3,3):0<this.lb&&(this.lb=T(this.lb-0.2,-3,3));0===this.type?this.setFrameIndex(3+~~this.lb):1===this.type?this.setFrameIndex(10+7*(~~(b/2)%3)+~~this.lb):2===this.type&&this.setFrameIndex(31+~~this.lb);return b}});fa=tm.createClass({superClass:tm.display.AnimationSprite,zc:k,da:k,init:function(a,b){this.superInit(tm.asset.SpriteSheet({image:"tex1",
frame:{width:32,height:32},animations:{anim0:{frames:[136,137,138,152,153,154],next:"anim0",frequency:3},anim1:{frames:[137,138,152,153,154,136].reverse(),next:"anim1",frequency:3}}}),32,32);this.zc=b;this.da=a;this.altitude=10;this.gotoAndPlay(b.xb?"anim0":"anim1")},update:function(a){if(this.zc.v){this.x=this.zc.x*(this.da.ca.wa?1.5:1);this.y=this.zc.y*(this.da.ca.wa?1.5:1);this.rotation=Math.radToDeg(this.zc.d*this.zc.rb);var f=this.parent.localToGlobal(this);this.zc.v&&0===a.frame%2&&b.clone(40).setPosition(f.x,
f.y).addChildTo(a.ca);this.da.Vc&&(f=this.da.Rc.fire(f.x,f.y,this.parent.rotation+this.rotation-90),f!==k&&f.addChildTo(a.ca))}else this.x=0,this.y=-40,this.currentFrameIndex=3}})})();(function(){var b=k;ka=tm.createClass({superClass:tm.display.Sprite,speed:0,xc:0,wi:1,Eg:0,Ua:j,init:function(a){this.superInit("shotbullet",64,64);this.blendMode="lighter";this.alpha=0.5;this.xc=v.Zf;b===k&&(b=F(16,1,0.9,tm.graphics.Canvas().resize(16,16).setFillStyle(tm.graphics.RadialGradient(8,8,0,8,8,8).addColorStopList([{offset:0,color:"rgba(255,255,255,1.0)"},{offset:1,color:"rgba(255,128,  0,0.0)"}]).toStyle()).fillRect(0,0,16,16).element));a!==i&&this.yd(a)},update:function(){this.x+=this.cc;
this.y+=this.Fb;(-60>this.x||540<this.x||-60>this.y||700<this.y)&&this.remove()},yd:function(a){this.setFrameIndex(a,64,64);3===a?(this.speed=45,this.boundingRadius=48):(this.speed=30,this.boundingRadius=32)},ce:function(a){for(var f=0;f<a;f++){var g=b.clone().setPosition(this.x,this.y).addChildTo(this.parent),p=U(2,8),t=2*Math.random()*Math.PI;g.ta=Math.cos(t)*p;g.ua=Math.sin(t)*p;g.scaleX=g.scaleY=(U(0.1,0.5)+U(0.1,0.5))/2;g.addEventListener("enterframe",function(){this.x+=this.ta;this.y+=this.ua;
this.ta*=0.9;this.ua*=0.9})}}});ka.kd=function(){for(var b=[].concat(a),f=0,g=b.length;f<g;f++)b[f].remove()};var a=ka.Ta=[];da=tm.createClass({nc:k,Dg:l,init:function(b,f){this.Dg=3===b;this.nc=[];for(var g=0;g<f;g++){var p=ka(b),t=this;p.addEventListener("added",function(){this.pa=v.Uh;a.push(this)});p.addEventListener("removed",function(){var b=a.indexOf(this);-1!==b&&a.splice(b,1);t.nc.push(this)});this.Dg&&p.addEventListener("enterframe",function(a){this.setScale((this.wi+this.Eg)*(0===a.app.frame%
2?1:1.2))});this.nc.push(p)}},fire:function(a,b,g){var p=this.nc.pop();if(p===i)return k;var t=La(g);p.cc=Math.cos(t)*p.speed;p.Fb=Math.sin(t)*p.speed;p.setPosition(a,b);p.rotation=g+90;return p},ad:function(a){for(var b=this.nc.length;this.nc[--b]!==i;)this.nc[b].xc=v.Zf+v.Mh*a,this.nc[b].Eg=0.2*a}})})();ea=tm.createClass({superClass:tm.display.Sprite,da:k,ca:k,Jb:0,frame:0,Xg:k,color:k,hg:0,We:0,xi:l,head:k,vg:k,gg:k,Ua:j,xc:v.Tf,$c:k,init:function(b,a){this.da=b;this.ca=b.ca;this.hg=0===this.da.style?1:1.2;this.We=0===this.da.style?50:75;var d=this;this.Xg=a;this.superInit(a.redBody,this.We,100);this.boundingHeightBottom=1;this.Xj=0;this.origin.y=1;var f=this.gg=tm.display.AnimationSprite(tm.asset.SpriteSheet({image:a.aura,frame:{width:100,height:100},animations:{red:{frames:[0,1,2,3],next:"red",
frequency:2},green:{frames:[4,5,6,7],next:"green",frequency:2},blue:{frames:[8,9,10,11],next:"blue",frequency:2},hyper:{frames:[12,13,14,15],next:"hyper",frequency:2}}}),140,140);f.y=60;f.addChildTo(this);(this.vg=tm.display.AnimationSprite(tm.asset.SpriteSheet({image:a.foot,frame:{width:120,height:80},animations:{red:{frames:[0,1,2,3],next:"red",frequency:2},green:{frames:[4,5,6,7],next:"green",frequency:2},blue:{frames:[8,9,10,11],next:"blue",frequency:2},hyper:{frames:[12,13,14,15],next:"hyper",
frequency:2}}}),140,80)).addChildTo(this);f=this.head=tm.display.AnimationSprite(tm.asset.SpriteSheet({image:a.head,frame:{width:80,height:80},animations:{red:{frames:[0,1,2,3],next:"red",frequency:2},green:{frames:[4,5,6,7],next:"green",frequency:2},blue:{frames:[8,9,10,11],next:"blue",frequency:2},hyper:{frames:[12,13,14,15],next:"hyper",frequency:2}}}),130,130);f.addChildTo(this);f.update=function(){this.y=d.Jb-d.y;-10<this.y&&(this.y=-10);this.visible=0<d.Jb};this.yd(["red","green","blue"][this.da.type]);
this.ad(0)},yd:function(b){this.color=b;this.image=tm.asset.AssetManager.get(this.Xg[this.color+"Body"]);this.srcRect.x=0;this.srcRect.y=0;this.srcRect.width=this.image.width/16;this.gg.gotoAndPlay(this.color);this.vg.gotoAndPlay(this.color);this.head.gotoAndPlay(this.color);this.$c=k;return this},ad:function(b){this.boundingWidth=this.width=this.We+30*b/v.Ae;this.head.setScale(0.02*this.width,0.02*this.width);this.xc=this.hg*v.Tf+v.Oh*b;0===b?this.yd(["red","green","blue"][this.da.type]):this.yd("hyper")},
ce:function(b,a){this.$c===k&&this.mg();a=a||this.Jb;for(var d=0;d<b;d++){var f=this.$c.clone().setPosition(this.x,a).addChildTo(this.ca),g=U(8,14),p=U(0,Math.PI);f.ta=Math.cos(p)*g;f.ua=Math.sin(p)*g;f.scaleX=f.scaleY=(U(0.5,1.5)+U(0.5,1.5))/2;f.addEventListener("enterframe",function(){this.x+=this.ta;this.y+=this.ua;this.ta*=0.95;this.ua*=0.95})}},Qi:function(b,a,d){this.$c===k&&this.mg();for(var f=0;f<b;f++){var g=this.$c.clone().setPosition(a,d).addChildTo(this.ca),p=U(12,20),t=U(0,Math.PI);g.ta=
Math.cos(t)*p;g.ua=Math.sin(t)*p;g.scaleX=g.scaleY=(U(1,3)+U(1,3))/2;g.addEventListener("enterframe",function(){this.x+=this.ta;this.y+=this.ua;this.ta*=0.95;this.ua*=0.95})}},mg:function(){this.$c="hyper"===this.color?F(16,1,0.9,tm.graphics.Canvas().resize(16,16).setFillStyle(tm.graphics.RadialGradient(8,8,0,8,8,8).addColorStopList([{offset:0,color:"rgba(255,255,255,1.0)"},{offset:1,color:"rgba(255,255,0,0.0)"}]).toStyle()).fillRect(0,0,16,16).element):F(16,1,0.9,tm.graphics.Canvas().resize(16,16).setFillStyle(tm.graphics.RadialGradient(8,
8,0,8,8,8).addColorStopList([{offset:0,color:"rgba(255,255,255,1.0)"},{offset:1,color:["rgba(255,0,0,0.0)","rgba(0,255,0,0.0)","rgba(0,0,255,0.0)"][this.da.type]}]).toStyle()).fillRect(0,0,16,16).element)},update:function(b){(this.visible=this.da.tb)?(this.Jb=Math.max(0,this.Jb-40),this.height=this.y-this.Jb,0===b.frame%3&&(this.frame=(this.frame+1)%16)):this.Jb=this.y-40;this.xi=this.visible},draw:function(b){var a=this.srcRect,d=this._image.element;a.x=a.width*this.frame;b.context.drawImage(d,a.x,
a.height-this.height,a.width,this.height,-this.width*this.origin.x,-this.height*this.origin.y,this.width,this.height)},Pj:function(){return this.Jb},rj:function(b){this.Jb=b;this.head.update()}});ea.prototype.getter("boundingHeightTop",function(){return this.position.y-this.Jb});(function(){ja=tm.createClass({superClass:tm.app.Object2D,Ua:j,ca:k,init:function(a,d){this.superInit();this.da=a;this.ca=d;this.Ug=tm.display.CircleShape(300,300,{strokeStyle:"rgba(0,0,0,0)",fillStyle:tm.graphics.RadialGradient(150,150,0,150,150,150).addColorStopList([{offset:0,color:"rgba(255,255,255,0)"},{offset:0.5,color:"rgba(255,255,255,0)"},{offset:0.9,color:"rgba(255,255,255,1)"},{offset:1,color:"rgba(255,255,255,0)"}]).toStyle()}).setScale(0.1,0.1).addChildTo(this);this.Ug.tweener.clear().to({scaleX:5,
scaleY:5,alpha:0},500,"easeOutQuad").call(function(){this.remove()}.bind(this.Ug));this.eg();b===k&&(b=F(60,1,0.92,tm.graphics.Canvas().resize(10,10).setFillStyle(tm.graphics.RadialGradient(5,5,0,5,5,5).addColorStopList([{offset:0,color:"rgba(255,255,255,1.0)"},{offset:1,color:"rgba(  0,  0,255,0.0)"}]).toStyle()).fillRect(0,0,10,10).element));this.r=this.a=0;this.b=8;this.ja=0;this.vd=1;this.addEventListener("added",function(){this.ca.Xc=j;this.da.Zc=j;this.ca.jb-=1;this.ca.ge=l;this.ca.Yd();this.ca.Xa("drop BOMBER!!",
j);H("bomb");H("voBomb")});this.addEventListener("removed",function(){this.ca.Xc=l;this.da.Zc=l})},eg:function(){this.core=tm.display.AnimationSprite(tm.asset.SpriteSheet({image:"bomb",frame:{width:280,height:280},animations:{animation:{frames:Array.range(0,8),next:"animation",frequency:3}}}),400,400).addChildTo(this);this.core.gotoAndPlay("animation");this.core.blendMode="lighter";this.core.setScale(0.1,0.1);this.core.tweener.clear().to({scaleX:1,scaleY:1},200,"easeOutBack").call(function(){this.update=
function(){this.scaleX=this.scaleY=U(0.9,1.1)}}.bind(this.core))},update:function(){for(var a=0;a<this.b;a++){var d=this.a*this.vd+2*a*Math.PI/this.b;b.clone().setPosition(Math.cos(d)*this.r+this.x,Math.sin(d)*this.r+this.y).addChildTo(this.parent)}this.a+=0.04;a=0.015*this.ja;this.r=250*Math.sin(a);2*Math.PI<a?this.remove():Math.PI<a?(this.b=16,this.ja+=3.6,this.vd=-1):(this.b=8,this.ja+=1.8,this.vd=1)}});la=tm.createClass({superClass:ja,init:function(a,b){this.superInit(a,b);v.ah&&this.addEventListener("added",
function(){this.ca.jb=0})},eg:function(){this.core=tm.display.AnimationSprite(tm.asset.SpriteSheet({image:"bomb",frame:{width:280,height:280},animations:{animation:{frames:Array.range(0,8),next:"animation",frequency:3}}}),400,400).addChildTo(this);this.core.gotoAndPlay("animation");this.core.blendMode="lighter";this.core.setScale(0.1,0.1);this.core.tweener.clear().to({scaleX:0.5,scaleY:0.5},200,"easeOutBack").call(function(){this.update=function(){this.scaleX=this.scaleY=U(0.4,0.6)}}.bind(this.core))},
update:function(){for(var a=0;a<this.b;a++){var d=this.a*this.vd+2*a*Math.PI/this.b;b.clone().setPosition(Math.cos(d)*this.r+this.x,Math.sin(d)*this.r+this.y).setScale(0.7,0.7).addChildTo(this.parent)}this.a+=0.04;a=0.04*this.ja;this.r=100*Math.sin(a);Math.PI<a?this.remove():(this.b=8,this.ja+=1.8,this.vd=1)}});var b=k})();na=tm.createClass({superClass:tm.display.Sprite,cc:0,Fb:0,da:k,ja:0,init:function(b,a,d){this.superInit("bombIcon",40,40);this.setPosition(b,a);this.da=d;this.Fb=1;this.cc=0.5>w.random()?-1:1;this.ja=0},update:function(){this.x+=this.cc;this.y+=2*this.Fb;if(2025>Ka(this,this.da))this.da.ca.ti(1),this.remove();else if(3E3>this.ja){if(30>this.x||450<this.x)this.cc*=-1;if(30>this.y||610<this.y)this.Fb*=-1}else(-20>this.x||500<this.x||-20>this.y||660<this.y)&&this.remove();this.ja+=1}});
oa=tm.createClass({superClass:tm.display.Sprite,cc:0,Fb:0,da:k,ja:0,init:function(b,a,d){this.superInit("extendItem",32,32);this.setPosition(b,a);this.da=d},update:function(){this.y+=0.5;704<this.y&&this.remove()}});B={setup:function(){B.explosion=Array.range(0,3).map(function(b){return tm.display.AnimationSprite(tm.asset.SpriteSheet({image:"explode"+b,frame:{width:100,height:100},animations:{"default":{frame:Array.range(0,64),next:k}}},100,100))});tm.display.AnimationSprite(tm.asset.SpriteSheet({image:"explode0",frame:{width:100,height:100},animations:{"default":{frame:Array.range(0,64),next:k,frequency:3}}},100,100));B.shockwaveImage=tm.graphics.Canvas().resize(100,100).setStrokeStyle("rgba(0,0,0,0)").setFillStyle(tm.graphics.RadialGradient(50,
50,0,50,50,50).addColorStopList([{offset:0,color:"rgba(255,255,255,0)"},{offset:0.7,color:"rgba(255,255,255,0)"},{offset:0.95,color:"rgba(255,255,255,1)"},{offset:1,color:"rgba(255,255,255,0)"}]).toStyle()).fillCircle(50,50,50);B.shockwaveImage=tm.graphics.Canvas().resize(100,100).setStrokeStyle("rgba(0,0,0,0)").setFillStyle(tm.graphics.RadialGradient(50,50,0,50,50,50).addColorStopList([{offset:0,color:"rgba(255,255,255,0)"},{offset:0.7,color:"rgba(255,255,255,0)"},{offset:0.95,color:"rgba(255,255,255,1)"},
{offset:1,color:"rgba(255,255,255,0)"}]).toStyle()).fillCircle(50,50,50);B.particle16=F(16,1,0.9,tm.graphics.Canvas().resize(16,16).setFillStyle(tm.graphics.RadialGradient(8,8,0,8,8,8).addColorStopList([{offset:0,color:"rgba(255,255,255,1.0)"},{offset:1,color:"rgba(255,128,  0,0.0)"}]).toStyle()).fillRect(0,0,16,16).element)},ce:function(b,a,d){b=B.particle16.clone().setPosition(b,a);b.Ua=j;b.addChildTo(d);d=U(5,20);a=U(Math.PI,2*Math.PI);b.ta=Math.cos(a)*d;b.ua=Math.sin(a)*d;b.scaleX=b.scaleY=(U(0.1,
0.5)+U(0.1,0.5))/2;b.addEventListener("enterframe",function(){this.x+=this.ta;this.y+=this.ua;this.ta*=0.9;this.ua*=0.9})},wg:function(b,a,d,f){f=f||1.8;var g=tm.display.Sprite().setPosition(b,a).setScale(0.1).setBlendMode("lighter");g.Ua=j;g.addChildTo(d);g.image=B.shockwaveImage;g.tweener.clear().to({scaleX:f,scaleY:f,alpha:0},800,"easeOutQuad").call(function(){g.remove()})},Ri:function(b,a,d){b=tm.display.CircleShape(300,300,{strokeStyle:"rgba(0,0,0,0)",fillStyle:tm.graphics.RadialGradient(150,
150,0,150,150,150).addColorStopList([{offset:0,color:"rgba(255,255,255,0)"},{offset:0.5,color:"rgba(255,255,255,0)"},{offset:0.9,color:"rgba(255,255,255,1)"},{offset:1,color:"rgba(255,255,255,0)"}]).toStyle()}).setPosition(b,a).setScale(0.1,0.1);b.Ua=j;b.addChildTo(d);b.tweener.clear().to({scaleX:5,scaleY:5,alpha:0},500,"easeOutQuad").call(function(){this.remove()}.bind(b))},$d:function(b,a,d,f){H("explode");var g=B.explosion.random().clone().addEventListener("animationend",function(){this.remove()}).setScale(0.75).setPosition(b,
a).setRotation(360*Math.random()).gotoAndPlay();g.Ua=j;if(f!==i){var p=f.x,t=f.y;g.addEventListener("enterframe",function(){this.x+=p;this.y+=t;p*=0.99;t*=0.99})}g.addChildTo(d);B.wg(b,a,d)},Gi:function(b,a,d){H("explode");var f=B.explosion.random().clone().addEventListener("animationend",function(){this.remove()}).addEventListener("enterframe",function(){this.scaleX+=0.01;this.scaleY+=0.01}).setScale(0.5).setPosition(b,a).setRotation(360*Math.random()).gotoAndPlay();f.Ua=j;f.addChildTo(d);f=B.explosion.random().clone().addEventListener("animationend",
function(){this.remove()}).addEventListener("enterframe",function(){this.rotation+=2;this.x+=0.7;this.y-=0.3;this.scaleX+=0.01;this.scaleY+=0.01}).setScale(0.5).setPosition(b+12,a).setRotation(360*Math.random()).gotoAndPlay();f.Ua=j;f.addChildTo(d);f=B.explosion.random().clone().addEventListener("animationend",function(){this.remove()}).addEventListener("enterframe",function(){this.rotation-=2;this.x-=0.7;this.y-=0.3;this.scaleX+=0.01;this.scaleY+=0.01}).setScale(0.5).setPosition(b-12,a).setRotation(360*
Math.random()).gotoAndPlay();f.Ua=j;f.addChildTo(d)},sb:function(b,a,d){H("explode2");H("explode3");for(var f=~~(Math.random()*Ma.length),g=0;20>g;g++){var p=B.explosion.random().clone().addEventListener("animationend",function(){this.remove()}).addEventListener("enterframe",function(){this.x+=Math.cos(this.a)*this.v;this.y+=Math.sin(this.a)*this.v;this.scaleX+=0.01;this.scaleY+=0.01}).setScale(0.7).setPosition(b,a).setRotation(360*Math.random()).gotoAndPlay();p.a=2*Math.PI*Math.random();p.v=10*Math.pow(Ma.at(~~(Ma.length*
g/20)+f),2);p.Ua=j;p.addChildTo(d)}B.wg(b,a,d,5)},sg:function(b,a,d){H("explode2");H("explode3");for(var f=~~(Math.random()*Ma.length),g=0;20>g;g++)for(var p=2*Math.PI*g/20,t=Math.pow(Ma.at(~~(Ma.length*g/20)+f),2),C=0;3>C;C++){var G=4*t*(C+1),r=B.explosion.random().clone().addEventListener("animationend",function(){this.remove()}).addEventListener("enterframe",function(){this.x+=Math.cos(this.a)*this.v;this.y+=Math.sin(this.a)*this.v;this.scaleX+=0.01;this.scaleY+=0.01;this.ja+=1}).setScale(0.3*
(3-C)).setPosition(b,a).setRotation(360*Math.random()).gotoAndPlay();r.rotation=2*Math.random()*Math.PI;r.Ua=j;r.ja=0;r.a=p;r.v=G;r.addChildTo(d)}}};
pa=tm.createClass({superClass:tm.app.Object2D,target:k,Fc:0,angle:0,alpha:2,Ua:j,reverse:l,init:function(b,a){this.superInit();this.target=b;this.reverse=a;this.angle=0;this.Fc=a?0:200;this.alpha=a?1:0},update:function(b){if(this.target.parent===k)this.remove();else{if(0===b.frame%2)for(b=0;9>b;b++){var a=this.angle+2*b/9*Math.PI;F(60,this.alpha,0.9).setPosition(Math.cos(a)*this.Fc+this.target.x,Math.sin(a)*this.Fc+this.target.y).addChildTo(this.target.parent)}this.angle+=0.05;this.Fc+=this.reverse?
4:-4;this.alpha+=this.reverse?-0.02:0.05;(0>this.Fc||200<this.Fc)&&this.remove()}}});
ia=tm.createClass({superClass:tm.app.Object2D,target:k,angle:0,Ua:j,init:function(b){this.superInit();this.target=b;this.angle=0},update:function(){if(this.target.parent===k)this.remove();else{for(var b=0;5>b;b++){var a=F(80,1,0.9).setPosition(40*Math.cos(this.angle-0.5*Math.PI)+this.target.x+Na(-2,2),40*Math.sin(this.angle-0.5*Math.PI)+this.target.y+Na(-2,2)).on("enterframe",function(){this.x+=this.ta;this.y+=this.ua}).addChildTo(this.target.parent);a.ta=3*Math.cos(this.angle);a.ua=3*Math.sin(this.angle)}this.angle+=
0.2;2*Math.PI<this.angle&&this.remove()}}});qa=tm.createClass({superClass:tm.graphics.Canvas,ca:k,Qc:k,Ya:k,frame:0,init:function(b){this.superInit("#scoreLabel");this.ca=b;this.resize(480,640).fitWindow();this.setText("20px Orbitron","left","top");this.fillStyle="rgba(255,255,255,0.01)";this.Qc=Oa(200);this.Ya=ra(this)},update:function(){this.clear();this.ca.Wb!==k&&(this.fillStyle=tm.graphics.LinearGradient(0,0,480,0).addColorStopList([{offset:0,color:"rgba(255,255,0,0.4)"},{offset:1,color:"rgba(0,255,255,0.4)"}]).toStyle(),this.strokeStyle=
"rgba(255,255,255,0.8)",this.lineWidth=2,this.fillRect(5,this.Ya.Lb-20,470*this.ca.Wb.pa/this.ca.Wb.lc,20),this.strokeRect(5,this.Ya.Lb-20,470,20),this.clear(263.5,this.Ya.Lb-20+2,2,16),this.clear(52,this.Ya.Lb-20+2,2,16));this.strokeStyle=this.fillStyle="rgba(255,255,255,0.4)";this.lineWidth=1;var b;this.setText("20px 'Ubuntu Mono'","right","top");score=(""+Math.floor(this.ca.score)).padding(16," ");b="";for(var a=0;a<score.length;a+=4)b+=score.substring(a,a+4)+" ";this.fillText(b,192,this.Ya.Lb+
5);this.setText("18px 'Ubuntu Mono'","right","top");score=("+"+Math.floor(this.ca.Na)).padding(8," ");b="";for(a=0;a<score.length;a+=4)b+=score.substring(a,a+4)+" ";this.fillText(b+"x "+(~~(this.ca.Ea/v.Pf)+1),this.Ya.od+192,22);b=[0,1,4][this.ca.da.type];for(a=0;a<this.ca.rc-1;a++)this.drawTexture(tm.asset.AssetManager.get("fighter"),192,64*b,64,64,5+32*a,40,32,32);this.setText("bold 18px Orbitron","left","top");this.strokeText("rank "+~~(100*q.Ca.ub.$rank),10,75);this.setText("bold 18px Orbitron",
"left","top");this.strokeText("max "+~~this.ca.sd+" hit",this.Ya.od+10,95);0<~~this.ca.Ea&&(this.setText("bold 45px Orbitron","left","top"),this.strokeText(~~this.ca.Ea+" HIT!!",10,0.5*-this.Ya.Lb+115));0===this.frame%2&&(!this.ca.wa&&0<this.ca.Ba?(this.strokeStyle="rgba(255,255,100,0.5)",this.setText("bold 24px Orbitron","left","bottom"),this.strokeText("HYPER LV "+this.ca.Ba,5,637)):this.ca.wa&&(this.strokeStyle="rgba(255,255,100,0.5)",this.setText("bold 28px Orbitron","left","bottom"),this.strokeText("HYPER LV "+
this.ca.Xd,5,637)));for(a=0;a<this.ca.jb;a++)this.drawTexture(tm.asset.AssetManager.get("bombIcon"),480-25*(a+1)-20,615,20,20);0===this.frame%2&&this.ca.ge&&(this.strokeStyle="rgba(255,255,255,0.5)",this.setText("bold 28px Orbitron","right","bottom"),this.strokeText("MAXIMUM",460,637));this.Qc.update();this.Qc.Bf=this.Ya.Lb+5;this.Qc.draw(this);this.frame+=1}});ra=tm.createClass({superClass:tm.app.Object2D,mb:k,od:0,Lb:0,init:function(b){this.superInit();this.mb=b}});(function(){for(var b=[],a=[],d=0;3>d;d++)b[d]=40*Math.pow(0.8,d),a[d]=b[d]/2*Math.sqrt(3);sa=tm.createClass({superClass:tm.graphics.Canvas,sa:k,init:function(){this.superInit("#background");this.resize(480,640).fitWindow();this.sa=ta();this.sa.ga=this;this.sa.update=function(a){this.update(a.frame)}.bind(this);this.blendMode="lighter"},update:function(d){this.sa.ta=Math.cos(this.sa.direction)*this.sa.speed;this.sa.ua=Math.sin(this.sa.direction)*this.sa.speed;for(var g=0;3>g;g++){for(this.sa.Cb[g]+=
this.sa.ta*Math.pow(0.8,g);3*b[g]<this.sa.Cb[g];)this.sa.Cb[g]-=3*b[g];for(;this.sa.Cb[g]<3*-b[g];)this.sa.Cb[g]+=3*b[g];for(this.sa.Db[g]+=this.sa.ua*Math.pow(0.8,g);2*a[g]<this.sa.Db[g];)this.sa.Db[g]-=2*a[g];for(;this.sa.Db[g]<2*-a[g];)this.sa.Db[g]+=2*a[g]}0===d%2&&this.draw()},draw:function(){this.sa.background!==k?this.clearColor(this.sa.background,0,0):this.clear();for(var d=0;3>d;d++){this.lineWidth=0.3*Math.pow(0.8,d);this.strokeStyle=tm.graphics.LinearGradient(0,0,0,640).addColorStopList([{offset:0,
color:"rgba(255,255,255,"+0.6*Math.pow(0.8,d)+")"},{offset:1,color:"rgba(255,255,255,"+0.4*Math.pow(0.8,d)+")"}]).toStyle();this.beginPath();for(var g=0,p=this.sa.Cb[d]-3*b[d];p<480+3*b[d];p+=1.5*b[d])for(var g=0===g?a[d]:0,t=this.sa.Db[d]-2*a[d]+g;t<640+2*a[d];t+=2*a[d])this.line(p,t,p+b[d],t),this.line(p,t,p-b[d]/2,t+a[d]),this.line(p,t,p-b[d]/2,t-a[d]);this.stroke()}}});ta=tm.createClass({superClass:tm.app.Object2D,Cb:0,Db:0,direction:0,speed:0,ta:0,ua:0,background:k,init:function(){this.superInit();
this.Cb=[];this.Db=[];for(var a=0;3>a;a++)this.Cb[a]=240,this.Db[a]=320;this.direction=0.5*Math.PI;this.speed=1;this.ua=this.ta=0}})})();ua=tm.createClass({superClass:tm.display.Sprite,Gg:l,ca:k,da:k,Zb:l,Dc:l,Ff:l,ta:0,ua:0,init:function(b){this.superInit("star",20,20);(this.Gg=b)&&this.setScale(2,2);this.ca=D.Je;this.da=this.ca.da;this.addChildTo(this.ca);b=0.5*w.random()*Math.PI-0.75*Math.PI;this.ta=30*Math.cos(b);this.ua=30*Math.sin(b)},update:function(){this.da.tb&&(this.Dc=j);if(this.da.parent===k)this.Dc=l;else{if(100>Ka(this,this.da)){this.ca.dj(this);this.remove();return}1E4>Ka(this,this.da)&&(this.Dc=j);if(this.Ff&&this.Dc){var b=
Math.atan2(this.da.y-this.y,this.da.x-this.x);this.x+=10*Math.cos(b);this.y+=10*Math.sin(b)}else this.Ff||(this.x+=this.ta,this.y+=this.ua,this.ta*=0.8,this.ua*=0.8,-1<this.ta&&(1>this.ta&&-1<this.ua&&1>this.ua)&&(this.Ff=j))}(-200>this.x||680<this.x||-200>this.y||690<this.y)&&this.remove()}});va=tm.createClass({superClass:ua,Zb:l,init:function(b){this.superInit(b)},update:function(){this.y+=4;this.rotation+=10;this.superClass.prototype.update.call(this)}});
wa=tm.createClass({superClass:ua,Zb:j,init:function(b){this.superInit(b)},update:function(){this.Dc||(this.x+=this.ca.ga.ta,this.y+=this.ca.ga.ua);this.superClass.prototype.update.call(this)}});xa=tm.createClass({da:k,ca:k,$:k,frame:0,init:function(b){this.ca=b;this.da=b.da;this.zd();this.$=za();this.frame=0},zd:n(),update:function(){this.Fi(this.frame);this.frame+=1},Fi:function(b){b=this.$.get(b);if(b!==k)if("function"===typeof b.value)b.value.call(this);else if(Aa[b.value]!==i){var a=Aa[b.value];if(a!==k)if(a[0].Wb===j)this.Kg(a[0]);else for(var d=0;d<a.length;d++){var f=this.Kg(a[d]);b.stop&&f.addEventListener("enemyconsumed",function(){this.$.Hf=l}.bind(this))}}},Kg:function(b){this.ca.Zd+=
1;b=b.aa(this.ca,b.ba).setPosition(b.x,b.y).addChildTo(this.ca).tf();b.pe=this;return b},Ue:function(b){Ba();this.ca.nd=j;for(var a=tm.app.Object2D().setPosition(240,320),d=-4;4>=d;d++)for(var f=-4;4>=f;f++){var g=tm.display.Label("WARNING!!",75).setFillStyle(tm.graphics.LinearGradient(0,0,0,20).addColorStopList([{offset:0,color:"hsla( 0, 100%, 50%, 0.07)"},{offset:1,color:"hsla(50, 100%, 50%, 0.07)"}]).toStyle()).setBlendMode("lighter").setPosition(d,f);g.ja=0;g.update=function(){this.alpha=-0.5*
Math.cos(0.08*this.ja)+0.5;this.ja+=1};g.addChildTo(a)}a.tweener.wait(3E3).call(b).wait(2E3).call(function(){this.execChildren(function(){this.update=n();this.tweener.clear().fadeOut(500)})}.bind(a)).wait(1E3).call(function(){this.remove()}.bind(a));a.addChildTo(this.ca.cf);H("warning");H("voWarning")}});xa.create=function(b,a){switch(a){case 0:return Ca(b);case 1:return Da(b);case 2:return Ea(b);case 3:return Fa(b);default:h(Error("stageNumber = "+a))}};
za=tm.createClass({index:0,data:k,Hf:l,init:function(){this.data={}},add:function(b,a,d){this.index+=b;this.data[this.index]={stop:d,value:a}},get:function(b){b=this.data[b];return b===i?k:b.stop===j?(this.Hf=j,b):this.Hf?k:b}});Ca=tm.createClass({superClass:xa,init:function(b){this.superInit(b);this.$.add(0,function(){J("bgm1",j);this.ca.ga.direction=0.5*Math.PI;this.ca.ga.speed=8;this.ca.ga.tweener.clear().to({speed:1},4E3,"easeInOutQuad")});this.$.add(200,"tankRD-center");this.$.add(200,"tankRD-left");this.$.add(20,"heri1-right");this.$.add(60,"heri1-center");this.$.add(10,"cannon-0");this.$.add(30,"heri1-left");this.$.add(10,"cannon-1");this.$.add(30,"tankL-top");this.$.add(50,"heri1-right");this.$.add(20,"tankRD-center");
this.$.add(80,"heri1-center");this.$.add(150,"komachi-1");this.$.add(230,"heri1-right");this.$.add(20,"heri1-center");this.$.add(20,"heri1-left");this.$.add(20,"tankL-top");this.$.add(20,"tankRD-left");this.$.add(50,"heri1-right");this.$.add(50,"heri1-center");this.$.add(50,"heri1-center");this.$.add(20,"tankRD-center");this.$.add(20,"tankRD-left");this.$.add(50,"heri1-right");this.$.add(10,"cannon-7");this.$.add(30,"heri1-center");this.$.add(50,"heri1-left");this.$.add(20,"tankL-top");this.$.add(50,
"heri1-right");this.$.add(50,"fighter-m-1");this.$.add(50,"fighter-m-5");this.$.add(1,function(){this.ca.ga.tweener.clear().to({speed:5},5E3,"easeInOutQuad")});this.$.add(150,"yukishiro",j);this.$.add(25,"heri2-left");this.$.add(25,"heri2-center");this.$.add(25,"heri2-right");this.$.add(25,"heri2-right");this.$.add(25,"heri2-left");this.$.add(25,"heri2-center");this.$.add(25,"heri2-right");this.$.add(25,"heri2-left");this.$.add(25,"heri2-center");this.$.add(25,"heri2-right");this.$.add(25,"heri2-right");
this.$.add(25,"heri2-left");this.$.add(25,"heri2-center");this.$.add(25,"heri2-right");this.$.add(50,"fighter-m-0");this.$.add(50,"fighter-m-2");this.$.add(50,"fighter-m-4");this.$.add(50,"heri1-center");this.$.add(50,"heri1-right");this.$.add(50,"heri1-left");this.$.add(50,"heri2-center");this.$.add(50,"heri2-right");this.$.add(50,"heri2-left");this.$.add(1,"cannon-6");this.$.add(30,"heri1-left");this.$.add(50,"heri1-right");this.$.add(50,"heri1-center");this.$.add(50,"fighter-m-6");this.$.add(50,
"fighter-m-4");this.$.add(50,"fighter-m-2");this.$.add(50,"heri1-center");this.$.add(50,"heri1-right2");this.$.add(50,"heri1-left2");this.$.add(60,"heri1-center2");this.$.add(50,"heri1-center");this.$.add(50,"heri1-right");this.$.add(50,"fighter-m-0");this.$.add(50,"fighter-m-1");this.$.add(50,"fighter-m-2");this.$.add(50,"heri1-center");this.$.add(50,"heri1-right");this.$.add(50,"heri1-left");this.$.add(50,"heri1-center");this.$.add(50,"heri1-right");this.$.add(50,"heri1-left");this.$.add(1,"cannon-1");
this.$.add(30,"heri1-center");this.$.add(50,"heri1-left");this.$.add(50,"heri1-right");this.$.add(30,"heri1-center");this.$.add(50,"heri1-left");this.$.add(50,"heri1-right");this.$.add(50,"fighter-m-6");this.$.add(50,"fighter-m-5");this.$.add(50,"fighter-m-4");this.$.add(50,"heri1-center");this.$.add(50,"heri1-right");this.$.add(50,"heri1-left2");this.$.add(50,"heri1-center2");this.$.add(50,"heri1-center");this.$.add(50,"heri1-right2");this.$.add(50,"heri1-center");this.$.add(1,function(){this.ca.ga.tweener.clear().to({speed:10},
5E3,"easeInOutQuad")});this.$.add(100,"komachi-0");this.$.add(160,"komachi-1");this.$.add(600,function(){this.Ue(function(){J("bgmBoss",j)})});this.$.add(600,"misumi")},zd:function(){this.ca.ga.background=tm.graphics.LinearGradient(0,0,0,640).addColorStopList([{offset:0,color:"hsl(230,50%,20%)"},{offset:1,color:"hsl(230,50%,10%)"}]).toStyle()}});Da=tm.createClass({superClass:xa,init:function(b){this.superInit(b);this.$.add(0,function(){J("bgm2",j);this.ca.ga.direction=0.5*Math.PI;this.ca.ga.speed=0.3});this.$.add(200,"tank25-top");this.$.add(160,"heri1-left");this.$.add(100,"heri1-right");this.$.add(190,"komachi2-0");this.$.add(10,"itsuki-1");this.$.add(400,"tank15-top");this.$.add(1,function(){this.ca.ga.tweener.clear().to({speed:1},5E3,"easeInOutQuad").to({direction:Math.PI},5E3,"easeInOutQuad")});this.$.add(60,"heri2-left");this.$.add(60,
"heri2-center");this.$.add(60,"heri2-right");this.$.add(20,"tankRD-center");this.$.add(20,"tankL-top");this.$.add(20,"yayoi-R0");this.$.add(1,"yayoi-R2");this.$.add(40,"heri2-left");this.$.add(60,"heri2-center");this.$.add(60,"heri2-right");this.$.add(60,"yayoi-R1");this.$.add(1,"heri2-center");this.$.add(1,"heri2-left");this.$.add(1,"heri2-right");this.$.add(30,"makoto-R0");this.$.add(1,function(){this.ca.ga.tweener.clear().to({speed:0.3},6E3,"easeInOutQuad").to({direction:0.25*Math.PI,speed:1},
12E3,"easeInOutQuad")});this.$.add(600,"tank5-center");this.$.add(1,"yayoi-3");this.$.add(90,"heri2-left");this.$.add(1,"yayoi-2");this.$.add(90,"tank5-left");this.$.add(1,"yayoi-1");this.$.add(90,"heri2-right");this.$.add(1,"yayoi-0");this.$.add(90,"heri2-left");this.$.add(60,"tank5-left");this.$.add(1,function(){this.ca.ga.tweener.clear().to({direction:0.5*Math.PI},1E4,"easeInOutQuad")});this.$.add(40,"tank5-left");this.$.add(40,"heri1-left2");this.$.add(40,"tank5-center");this.$.add(40,"heri2-right");
this.$.add(40,"tank5-left");this.$.add(40,"heri2-left");this.$.add(40,"tank5-center");this.$.add(40,"heri2-right");this.$.add(40,"tank5-left");this.$.add(40,"heri1-left2");this.$.add(40,"tank5-left");this.$.add(40,"heri2-left");this.$.add(40,"tank5-center");this.$.add(40,"heri2-right");this.$.add(40,"tank5-left");this.$.add(40,"heri2-left");this.$.add(90,"makoto-4");this.$.add(1,"tsubomi-0");this.$.add(1,"tsubomi-2");this.$.add(1,function(){this.ca.ga.tweener.clear().to({speed:0.5},3E3,"easeInOutQuad")});
this.$.add(400,function(){this.ca.ga.tweener.clear().to({direction:0,speed:1},5E3,"easeInOutQuad")});this.$.add(430,function(){this.ca.ga.tweener.clear().to({speed:3},5E3,"easeInOutQuad")});this.$.add(1,"mai",j);this.$.add(300,"heri2-left");for(b=0;12>b;b++)this.$.add(30,"heri2-center"),this.$.add(30,"heri2-right"),this.$.add(30,"heri2-center"),this.$.add(30,"heri2-left");this.$.add(1,function(){this.ca.ga.tweener.clear().to({direction:0.5*Math.PI,speed:0.8},5E3,"easeInOutQuad")});this.$.add(60,"tank5-left");
this.$.add(60,"tank5-left");this.$.add(60,"tank5-left");this.$.add(120,"itsuki-2");this.$.add(1,"komachi2-0");this.$.add(380,"tsubomi-0");this.$.add(1,"komachi2-1");this.$.add(380,"itsuki-1");this.$.add(380,"makoto-4");this.$.add(1,"komachi2-0");this.$.add(380,"makoto-1");this.$.add(580,"erika");this.$.add(520,function(){this.Ue(function(){J("bgmBoss",j)})});this.$.add(300,function(){this.ca.ga.tweener.clear().to({speed:5},5E3,"easeInOutQuad")});this.$.add(300,"hyuga")},zd:function(){this.ca.ga.background=
tm.graphics.LinearGradient(0,0,0,640).addColorStopList([{offset:0,color:"hsl(130,30%,20%)"},{offset:1,color:"hsl(130,30%, 5%)"}]).toStyle()}});Ea=tm.createClass({superClass:xa,init:function(b){this.superInit(b);this.$.add(0,function(){J("bgm1",j);this.ca.ga.direction=0.5*Math.PI;this.ca.ga.speed=8;this.ca.ga.tweener.clear().to({speed:1},4E3,"easeInOutQuad")});this.$.add(100,"akane-1");this.$.add(1,"heri2-center");this.$.add(300,"akane-2");this.$.add(1,"heri2-left");this.$.add(300,"akane-3");this.$.add(1,"heri2-right");this.$.add(0,function(){this.ca.ga.direction=~~(90*(Math.PI/180));this.ca.ga.speed=4;this.ca.ga.tweener.clear().to({speed:1},
4E3,"easeInOutQuad")});this.$.add(100,"hoshizora_y-1");this.$.add(1,"heri2-right");this.$.add(100,"yotsuba");this.$.add(200,"tankRD-center");this.$.add(200,"tankRD-left");this.$.add(200,"tankRD-right");this.$.add(200,"tankRD-center");this.$.add(0,function(){this.ca.ga.direction=~~(180*(Math.PI/180));this.ca.ga.speed=4;this.ca.ga.tweener.clear().to({speed:4},4E3,"easeInOutQuad")});this.$.add(200,"tankRD-center");this.$.add(200,"tankRD-left");this.$.add(200,"tankRD-right");this.$.add(200,"tankRD-center");
this.$.add(0,function(){this.ca.ga.direction=~~(180*(Math.PI/180));this.ca.ga.speed=4;this.ca.ga.tweener.clear().to({speed:4},4E3,"easeInOutQuad")});this.$.add(300,"hoshizora_y-2");this.$.add(20,"yayoi-R0");this.$.add(1,"yayoi-R2");this.$.add(600,function(){this.Ue(function(){J("bgmBoss",j)})});this.$.add(1,function(){this.ca.ga.tweener.clear().to({speed:-10},5E3,"easeInOutQuad")});this.$.add(600,"misumi")},zd:function(){this.ca.ga.background=tm.graphics.LinearGradient(0,0,0,640).addColorStopList([{offset:0,
color:"hsl(30,50%,30%)"},{offset:1,color:"hsl(30,50%,15%)"}]).toStyle()}});Fa=tm.createClass({superClass:xa,init:function(b){this.superInit(b);this.$.add(0,function(){J("bgm4",j);this.ca.ga.direction=0.5*Math.PI;this.ca.ga.speed=1});this.$.add(200,"tsukikage-r");this.$.add(100,"tsukikage-l");this.$.add(200,"bukky-4-r");this.$.add(150,"heri1-4-left");this.$.add(10,"heri1-4-center");this.$.add(10,"heri1-4-left");this.$.add(10,"heri1-4-center");this.$.add(100,"komachi4-0");this.$.add(120,"heri1-4-right");this.$.add(10,"heri1-4-center");this.$.add(10,"heri1-4-right");this.$.add(10,
"heri1-4-center");this.$.add(100,"bukky-4-l");this.$.add(200,"bukky-4-r");this.$.add(200,"tankRD-center");this.$.add(10,"heri1-4-right");this.$.add(10,"heri1-4-center");this.$.add(10,"heri1-4-right");this.$.add(10,"heri1-4-center");this.$.add(20,"tankRD-left");this.$.add(20,"tank5-left");this.$.add(20,"tank5-center");this.$.add(20,"tankRD-left");this.$.add(20,"tank5-left");this.$.add(20,"tank5-center");this.$.add(100,"tsukikage-r");this.$.add(10,"tankL-top");this.$.add(100,"tankL-top");this.$.add(50,
"tankL-top");this.$.add(50,"tankL-top");this.$.add(150,"komachi4-0");this.$.add(50,"komachi4-1");this.$.add(500,"heri2-left");this.$.add(1,function(){this.ca.ga.tweener.clear().to({speed:5,direction:0.5*-Math.PI},1E4).to({speed:3,direction:1.5*-Math.PI},1E4)});for(b=0;6>b;b++)this.$.add(20,"heri2-center"),this.$.add(20,"heri2-right"),this.$.add(20,"heri2-left"),this.$.add(1,"tank5-center"),this.$.add(15,"heri1-4-center"),this.$.add(15,"heri1-4-right"),this.$.add(15,"heri1-4-left"),this.$.add(1,"tank5-left"),
this.$.add(90,"tank25-top");this.$.add(1,function(){this.ca.ga.speed=3;this.ca.ga.tweener.clear().to({speed:0.3},5E3)});this.$.add(200,"makoto-3-2");this.$.add(300,"makoto-3-8");this.$.add(75,"heri1-4-center");this.$.add(25,"heri1-4-right");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-right");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-right");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-right");this.$.add(100,"makoto-3-2");this.$.add(75,"heri1-4-center");this.$.add(25,
"heri1-4-left");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-left");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-left");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-left");this.$.add(100,"makoto-3-8");this.$.add(75,"heri1-4-center");this.$.add(25,"heri1-4-right");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-right");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-right");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-right");this.$.add(100,"makoto-3-2");
this.$.add(75,"heri1-4-center");this.$.add(25,"heri1-4-left");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-left");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-left");this.$.add(25,"heri1-4-center");this.$.add(25,"heri1-4-left");this.$.add(200,"makoto-3-2");this.$.add(1,"makoto-3-8");this.$.add(52,"heri1-4-left");this.$.add(12,"heri1-4-right");this.$.add(12,"heri1-4-left");this.$.add(12,"heri1-4-right");this.$.add(12,"heri1-4-left");this.$.add(12,"heri1-4-right");this.$.add(12,
"heri1-4-left");this.$.add(12,"heri1-4-right");this.$.add(12,"heri1-4-left2");this.$.add(12,"heri1-4-right2");this.$.add(12,"heri1-4-left2");this.$.add(12,"heri1-4-right2");this.$.add(12,"heri1-4-left2");this.$.add(12,"heri1-4-right2");this.$.add(12,"heri1-4-left2");this.$.add(12,"heri1-4-right2");this.$.add(102,"heri1-4-left2");this.$.add(12,"heri1-4-right2");this.$.add(12,"heri1-4-left2");this.$.add(12,"heri1-4-right2");this.$.add(12,"heri1-4-left2");this.$.add(12,"heri1-4-right2");this.$.add(12,
"heri1-4-left2");this.$.add(12,"heri1-4-right2");this.$.add(400,function(){this.ca.ga.tweener.clear().to({speed:3},5E3)});this.$.add(1E3,function(){alert("\u4eca\u65e5\u306e\u5b9f\u88c5\u306f\u3053\u3053\u307e\u3067\uff01")})},zd:function(){this.ca.ga.background=tm.graphics.LinearGradient(0,0,0,640).addColorStopList([{offset:0,color:"hsl(30,30%,15%)"},{offset:1,color:"hsl(30,50%, 5%)"}]).toStyle()}});function Pa(b,a){if(b.parent===k||a.parent===k)return l;var d=b.x+b.boundingWidthRight,f=b.y-b.boundingHeightTop,g=b.y+b.boundingHeightBottom,p=a.x-a.boundingWidthLeft,t=a.y-a.boundingHeightTop,C=a.y+a.boundingHeightBottom;return b.x-b.boundingWidthLeft<a.x+a.boundingWidthRight&&d>p&&f<C&&g>t};var Qa=tm.createClass({superClass:tm.app.Scene,_sceneResultCallback:k,init:function(){this.superInit()},zj:function(b,a){"function"===typeof b?this.app.pushScene(b()):b instanceof tm.app.Scene&&this.app.pushScene(b);this._sceneResultCallback=a},draw:function(b){b.globalCompositeOperation="source-over";this.Tc(b)},finish:function(b){var a=this.app;a.popScene();(a=a.currentScene)&&a._sceneResultCallback&&a._sceneResultCallback.bind(a)(b)}});var Ra=tm.createClass({superClass:Qa,titleText:k,menu:k,descriptions:k,showExit:l,title:k,selections:[],description:k,box:k,cursor:k,rf:k,_selected:0,_opened:l,_finished:l,init:function(b,a,d){this.superInit();this.titleText=b;this.menu=a;this._selected=~~d.defaultValue;this.showExit=d.showExit;this.descriptions=d.menuDescriptions;this.showExit&&(a.push("back"),this.descriptions.push("\u524d\u306e\u753b\u9762\u3078\u623b\u308a\u307e\u3059"));this.rf=d.onCursorMove;b=Math.max(50*(1+a.length),50)+40;
this.box=tm.display.RectangleShape(384,b,{strokeStyle:"rgba(0,0,0,0)",fillStyle:"hsla(220,50%,30%,0.8)"}).setPosition(240,320);this.box.width=1;this.box.height=1;this.box.tweener.to({width:384,height:b},200,"easeOutExpo").call(this._onOpen.bind(this));this.box.addChildTo(this);this.description=tm.display.Label("",14).setPosition(240,630).addChildTo(this)},_onOpen:function(){var b=320-25*this.menu.length;this.title=tm.display.Label(this.titleText,30).setPosition(240,b).addChildTo(this);this.selections=
this.menu.map(function(a,d){var f=this;b+=50;var g=tm.display.Label(a).setPosition(240,b).addChildTo(this);g.interactive=j;g.addEventListener("touchend",function(){f._selected===d?f.closeDialog(f._selected):f._selected=d});g.width=336;return g}.bind(this));this._createCursor();this._opened=j},_createCursor:function(){this.cursor=tm.display.RectangleShape(336,10,{strokeStyle:"rgba(0,0,0,0)",fillStyle:tm.graphics.LinearGradient(0,0,336,0).addColorStopList([{offset:0,color:"rgba(  0,255,100,0.0)"},{offset:0.2,
color:"rgba(  0,255,100,0.3)"},{offset:0.5,color:"rgba(  0,255,255,0.5)"},{offset:0.8,color:"rgba(  0,255,100,0.3)"},{offset:1,color:"rgba(  0,255,100,0.0)"}]).toStyle()}).addChildTo(this);this.cursor.blendMode="lighter";this.cursor.x=240;this.cursor.s=this._selected;this.cursor.y=this.selections[this._selected].y;this.cursor.update=function(){this.s!==this.parent._selected&&(this.s=this.parent._selected,this.tweener.clear(),this.tweener.to({y:this.parent.selections[this.parent._selected].y},200,
"easeOutExpo"),this.parent.rf!==k&&this.parent.rf(this.s))}},update:function(b){this.description.text=this.descriptions[this._selected];this._opened&&(this._finished?this.cursor.visible=0===~~(b.frame/2)%2:this.showExit&&b.keyboard.getKeyDown("x")?(this._selected=this.selections.length-1,this.closeDialog(this._selected)):b.keyboard.getKeyDown("z")||b.keyboard.getKeyDown("c")||b.keyboard.getKeyDown("space")?(this.closeDialog(this._selected),H("decision")):b.keyboard.getKeyDown("down")?(this._selected+=
1,this._selected=T(this._selected,0,this.selections.length-1),H("select")):b.keyboard.getKeyDown("up")&&(this._selected-=1,this._selected=T(this._selected,0,this.selections.length-1),H("select")))},closeDialog:function(b){this._finished=j;this.tweener.clear().wait(200).call(function(){this.cursor.remove();this.title.remove();this.selections.each(function(a){a.remove()});this.box.tweener.clear();this.box.tweener.to({width:1,height:1},200,"easeInExpo").call(function(){this.finish(b)}.bind(this))}.bind(this))},
Tc:function(b){b.fillStyle="rgba(0,0,0,0.8)";b.fillRect(0,0,480,640)}});function V(b,a,d,f,g){g={}.$extend({menuDescriptions:[].concat(d),showExit:j,defaultValue:0,onCursorMove:n()},g);b.zj(Ra(a,d,g),f)};F=tm.createClass({superClass:tm.display.CanvasElement,alpha:1,Ve:0.85,size:0,image:k,Ua:j,init:function(b,a,d,f){this.superInit();this.width=this.height=this.size=b;a!==i&&(this.alpha=a);d!==i&&(this.Ve=d);this.blendMode="lighter";this.image=f?f:tm.graphics.Canvas().resize(b,b).setFillStyle(tm.graphics.RadialGradient(0.5*b,0.5*b,0,0.5*b,0.5*b,0.5*b).addColorStopList([{offset:0,color:"rgba(255,255,255,0.1)"},{offset:1,color:"rgba(  0,  0,  0,0.0)"}]).toStyle()).fillRect(0,0,b,b).element},update:function(){this.alpha*=
this.Ve;0.01>this.alpha?this.remove():1<this.alpha&&(this.alpha=1)},draw:function(b){b.context.drawImage(this.image,-this.width*this.origin.x,-this.height*this.origin.y,this.width,this.height)},clone:function(){return F(this.size,this.Sj,this.Ve,this.image)}});
ha=tm.createClass({superClass:F,ga:k,init:function(b,a){a=a||20;this.superInit(a,1,0.82,tm.graphics.Canvas().resize(a,a).setFillStyle(tm.graphics.RadialGradient(0.5*a,0.5*a,0,0.5*a,0.5*a,0.5*a).addColorStopList([{offset:0,color:"rgba(255,255,255,0.5)"},{offset:1,color:"rgba(  0,  0,  0,0.0)"}]).toStyle()).fillRect(0,0,a,a).element);this.ga=b},update:function(b){this.superClass.prototype.update.apply(this,b);this.x+=this.ga.ta;this.y+=this.ga.ua+0.3},clone:function(b){return ha(this.ga,b)}});var Oa=tm.createClass({width:0,label:k,cb:k,ja:0,Rg:0,Bf:0,init:function(b){this.width=b;this.label=tm.display.Label("_",10).setAlign("left").setBaseline("top").setPosition(-this.width/2+4,-this.height/2+4).setFillStyle("rgba(255,255,255,0.5)");this.cb=[];this.Rg=480-this.width-5;this.Bf=5},vi:function(b,a){a===j&&(this.cb.clear(),this.cb.push(""));5<this.cb.length&&this.cb.splice(1,this.cb.length-4);this.cb.push(b);return this},yi:function(){this.cb.clear();return this},clear:function(){this.label.text=
"_";return this},update:function(){var b=this.label.text,b=b.substring(0,b.length-1);if(0!==this.cb.length)if(""!==this.cb[0]){var a=this.cb[0][0];this.cb[0]=this.cb[0].substring(1);b+=a}else this.cb.shift(),a=b.split("\n"),3<a.length&&(a.shift(),b=a.join("\n")),b+="\n";this.label.text=b+(0===this.ja%2?"_":" ");this.ja+=1},draw:function(b){b.save();b.context.globalCompositeOperation="source-over";b.translate(this.Rg,this.Bf);b.fillStyle="rgba(1,2,48,0.5)";b.fillRect(0,0,this.width,64);b.translate(5,
5);b.fillStyle="rgba(255,255,255,0.5)";b.setText(this.label.fontStyle,this.label.align,this.label.baseline);this.label._lines.each(function(a,d){b.fillText(a,0,this.label.textSize*d)}.bind(this));b.restore()}});var Ma=k,Ma=function(b){function a(a){if(1>a)return k;var f=[],g=Math.random(),p,t;for(t=0;t<b;t+=~~a){p=Math.random();for(var m=0;m<a;m++)f[t+m]=d(g,p,m/a);g=p}g=f[b-~~a];p=f[0];for(m=0;m<a;m++)f[b-~~a+m]=d(g,p,m/a);return f}function d(a,b,d){d=0.5*(1-Math.cos(d*Math.PI));return a*(1-d)+b*d}for(var f=[],g=0,p=Math.pow(2,4);8>g;g++,p*=2){var t=a(b/p);if(t===k)break;f.push(t)}t=[].concat(f[0]);g=1;for(p=0.5;g<f.length;g++,p*=0.5)for(var C=0;C<b;C++)t[C]+=f[g][C]*p;for(g=0;g<t.length;g++)t[g]/=2;return t}(512);w={index:-1,data:k,setup:function(b){this.data=[];b=new MersenneTwister(b);for(var a=0;1E3>a;a++)this.data[a]=b.next()},random:function(){this.index+=1;1E3<=this.index&&(this.index%=1E3);return this.data[this.index]},rand:function(b,a){return Math.floor(this.random()*(a-b+1))+b},randf:function(b,a){return this.random()*(a-b)+b}};N=k;J=function(b,a){a||Ga();var d=tm.asset.AssetManager.get(b);d&&(N=d.clone(),N.volume=0.1*u.jd,N.loop=j,N.play())};Ga=function(){N!==k&&N.stop()};Ba=function(){if(N!==k){var b=N;b.loop=l;var a=function(){b.volume-=0.001;0>=b.volume?b.stop():setTimeout(a,10)};setTimeout(a,10)}};
H=function(b){if(0!==u.Gc&&H.played[b]!==u.frame){var a=tm.asset.AssetManager.get("sound/"+b);a&&(a=a.clone().play(),"vo"===b.substring(0,2)?(a.volume=0.5*u.Gc,H.Kf!==k&&H.Kf.stop(),H.Kf=a):a.volume=0.1*u.Gc);H.played[b]=u.frame}};H.played={};H.Kf=k;(function(){var b=k,a=k;ba=tm.createClass({superClass:Qa,result:k,ja:0,ud:[],be:l,zg:k,Ig:0,he:0,init:function(){this.superInit();tm.display.Label("TM-Shooter",50).setPosition(240,160).addChildTo(this);tm.display.Label("version 1.0-beta",22).setPosition(432,192).setAlign("right").addChildTo(this);this.zg=tm.display.Label().setPosition(240,256).addChildTo(this);tm.display.Label("press space key").setPosition(240,576).addChildTo(this);this.addEventListener("enter",function(){this.be=l;for(var a=(""+
Math.floor(u.Ec)).padding(16," "),b="",g=0;g<a.length;g+=4)b+=a.substring(g,g+4)+" ";this.zg.text="HIGH SCORE: "+b.trim()})},Tc:function(a){a.fillStyle="black";a.fillRect(0,0,480,640)},update:function(a){this.cg(80*Math.cos(0.01*this.ja)+240,80*Math.sin(0.01*this.ja)+320,0);this.cg(80*Math.cos(0.01*this.ja+Math.PI)+240,80*Math.sin(0.01*this.ja+Math.PI)+320,1);(a.keyboard.getKeyDown("z")||a.keyboard.getKeyDown("c")||a.keyboard.getKeyDown("space"))&&!this.be&&this.Qg();this.ja+=1},cg:function(d,f,g){if(!this.be){b===
k&&(b=F(80,1,0.8,tm.graphics.Canvas().resize(80,80).setFillStyle(tm.graphics.RadialGradient(40,40,0,40,40,40).addColorStopList([{offset:0,color:"rgba(255,255,255,0.1)"},{offset:1,color:"rgba(155,  0,  0,0.0)"}]).toStyle()).fillRect(0,0,80,80).element));a===k&&(a=F(80,1,0.8,tm.graphics.Canvas().resize(80,80).setFillStyle(tm.graphics.RadialGradient(40,40,0,40,40,40).addColorStopList([{offset:0,color:"rgba(255,255,255,0.1)"},{offset:1,color:"rgba(  0,  0,155,0.0)"}]).toStyle()).fillRect(0,0,80,80).element));
g=0===g?b.clone().addChildTo(this):a.clone().addChildTo(this);g.speed=0.6;var p=U(0,2*Math.PI),t=Na(0,20);g.setPosition(Math.cos(p)*t+d,Math.sin(p)*t+f);var C=this;g.update=function(){this.x+=Math.cos(p)*this.speed;this.y+=Math.sin(p)*this.speed;if(-50>this.x||530<this.x||-50>this.y||690<this.y){this.remove();var a=C.ud.indexOf(this);-1!==a&&C.ud.splice(a,1)}};this.ud.push(g)}},Qg:function(){var a=["start","tutorial","setting"],b=["\u30b2\u30fc\u30e0\u3092\u958b\u59cb\u3057\u307e\u3059","\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3092\u958b\u59cb\u3057\u307e\u3059",
"\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u307e\u3059"];a.push("tweet high score");b.push("Twitter\u3078\u30cf\u30a4\u30b9\u30b3\u30a2\u3092\u6295\u7a3f\u3057\u307e\u3059");V(this,"MAIN MENU",a,this.jj,{defaultValue:this.Ig,menuDescriptions:b})},jj:function(a){4!==a&&(this.Ig=a);switch(a){case 0:this.tweener.clear().call(function(){this.be=j;for(var a=0,b=this.ud.length;a<b;a++)this.ud[a].speed=8}.bind(this)).wait(1E3).call(function(){u.replaceScene(Ha())}.bind(this));break;case 2:this.mc();break;case 3:0<
u.Ec&&(a="SCORE:{score} (ship:{type}-{style} stage:{stage} continue:{cont}) TM-Shooter http://goo.gl/GvMQOJ ".format({score:Math.floor(u.Ec),stage:u.Ag+1,cont:u.yg,type:["A","B","C"][u.Cg],style:["S","L","EX"][u.Bg]}),a=tm.social.Twitter.createURL({type:"tweet",text:a,hashtags:v.th,url:window.document.location.href}),window.open(a))}},mc:function(){V(this,"SETTING",["bgm volume","sound volume"],this.wf,{defaultValue:this.he,menuDescriptions:["BGM\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8a2d\u5b9a\u3057\u307e\u3059",
"\u52b9\u679c\u97f3\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8a2d\u5b9a\u3057\u307e\u3059"]})},wf:function(a){3!==a&&(this.he=a);switch(a){case 0:this.xf();break;case 1:this.yf();break;default:this.Qg()}},xf:function(){V(this,"BGM VOLUME","012345".split(""),this.uf,{defaultValue:u.jd,onCursorMove:function(a){N!==k&&"exit"!==a&&(N.volume=0.1*a)},showExit:l})},uf:function(a){6!==a&&(u.jd=a);this.mc()},yf:function(){V(this,"SE VOLUME","012345".split(""),this.vf,{defaultValue:u.Gc,showExit:l})},vf:function(a){6!==
a&&(u.Gc=a);this.mc()},Vj:function(){V(this,"DIFFICULTY",["easy","normal","hard","very hard","hell"],this.ij,{defaultValue:u.af,menuDescriptions:["\u521d\u5fc3\u8005\u3067\u3082\u5b89\u5fc3\u3057\u3066\u6311\u6226\u53ef\u80fd\u306a\u5165\u9580\u30b3\u30fc\u30b9","\u666e\u901a\u306e\u96e3\u6613\u5ea6\u3002easy\u3067\u306f\u7269\u8db3\u308a\u306a\u3044\u4eba\u3078","\u4e00\u822c\u7684\u306a\u5f3e\u5e55STG\u306e\u96e3\u6613\u5ea6","hard\u306f\u30cc\u30eb\u3059\u304e\u308b\u3068\u3044\u3046\u4eba\u5411\u3051",
"\u6b7b\u306c\u304c\u3088\u3044"]})},ij:function(a){5!==a&&(u.af=a);this.mc()},toString:function(){return"gls2.TitleScene"}})})();(function(){Ha=tm.createClass({superClass:Qa,mode:0,types:k,te:k,yb:k,zb:k,Ab:k,mf:k,kf:k,type:0,style:0,ic:l,je:l,init:function(){this.superInit();tm.display.Sprite("result_bg",528,704).setPosition(240,320).addChildTo(this);tm.display.Label("PLAYER SELECT",40).setPosition(240,64).addChildTo(this);this.types=this.tj();this.te=this.sj();var a=tm.display.TriangleShape(20,20,{fillStyle:"rgba(255,255,255,0.7)",strokeStyle:"transparent"}).setPosition(48,320).setRotation(-90);a.update=function(a){this.setScale(a.keyboard.getKey("left")?
2:1);this.alpha=1+0.5*Math.sin(0.1*a)};a.addChildTo(this);a=tm.display.TriangleShape(20,20,{fillStyle:"rgba(255,255,255,0.7)",strokeStyle:"transparent"}).setPosition(432,320).setRotation(90);a.update=function(a){this.setScale(a.keyboard.getKey("right")?2:1);this.alpha=1+0.5*Math.sin(0.1*a)};a.addChildTo(this);this.mode=0;this.te.visible=l;this.qf(-1,j);this.yb.update();this.zb.update();this.Ab.update();H("voSelectShip");J("bgmShipSelect",j)},tj:function(){var a=tm.display.CanvasElement();a.addChildTo(this);
this.mf=tm.display.Label("Type-A").setPosition(240,150);this.mf.addChildTo(a);var b=["\u4e00\u70b9\u96c6\u4e2d\u578b\n\u30b9\u30d4\u30fc\u30c9\uff1a\u6700\u901f\n\n\u7d76\u5927\u306a\u5a01\u529b\u3092\u8a87\u308b\n\u6b63\u9762\u706b\u529b\u3068\n\u30b9\u30d4\u30fc\u30c9\u3067\n\u6575\u3092\u8e42\u8e99\u3059\u308b","\u53ef\u5909\u578b\n\u30b9\u30d4\u30fc\u30c9\uff1a\u4e2d\n\n\u6b63\u9762\u3068\u4e21\u30b5\u30a4\u30c9\u306b\n\u6483\u3061\u5206\u3051\u3067\u304d\u308b\n\u53ef\u5909\u578b\u30d3\u30c3\u30c8\u3092\u6301\u3064\n\u30c6\u30af\u30cb\u30ab\u30eb\u306a\u6a5f\u4f53",
"\u5e83\u7bc4\u56f2\u578b\n\u30b9\u30d4\u30fc\u30c9\uff1a\u9045\n\n\u5e83\u7bc4\u56f2\u306b\u653b\u6483\u53ef\u80fd\u306a\n\u30ef\u30a4\u30c9\u30b7\u30e7\u30c3\u30c8\u3092\n\u6301\u3064\u6a5f\u4f53\n\u9ad8\u3044\u6383\u8a0e\u80fd\u529b"];this.nf=tm.display.Label(b[0],16).setPosition(240,500);this.nf.update=function(){this.nf.text=b[this.type]}.bind(this);this.nf.addChildTo(a);var f=tm.asset.SpriteSheet({image:"fighter",frame:{width:64,height:64},animations:{typeB:{frames:[10,17,24],next:"typeB",frequency:2}}});
this.yb=tm.display.Sprite("fighter",64,64).setFrameIndex(3);this.zb=tm.display.AnimationSprite(f,64,64).gotoAndPlay("typeB");this.Ab=tm.display.Sprite("fighter",64,64).setFrameIndex(31);this.yb.Ka=0;this.zb.Ka=1;this.Ab.Ka=2;this.yb.setScale(3).setPosition(0,320).addChildTo(a);this.zb.setPosition(0,320).addChildTo(a);this.Ab.setPosition(0,320).addChildTo(a);this.yb.update=function(){this.x=240+90*Math.sin(2*this.Ka/3*Math.PI)};this.zb.update=function(){this.x=240+90*Math.sin(2*this.Ka/3*Math.PI)};
this.Ab.update=function(){this.x=240+90*Math.sin(2*this.Ka/3*Math.PI)};return a},sj:function(){var a=tm.display.CanvasElement();a.addChildTo(this);this.kf=tm.display.Label("Shot Style").setPosition(240,150);this.kf.addChildTo(a);this.pc=tm.display.TriangleShape(40,40,{fillStyle:"hsla(180, 80%, 80%, 0.5)",strokeStyle:"transparent"}).setPosition(240,384).addChildTo(a);this.Vb=tm.app.Object2D();this.Vb.addChildTo(this.pc);this.Vb.update=function(a){this.Vb.rotation=1===this.type?45*Math.sin(0.1*a.frame):
0}.bind(this);this.na=[];this.na[0]=tm.display.TriangleShape(20,20,{fillStyle:"hsla(180, 80%, 80%, 0.5)",strokeStyle:"transparent"});this.na[0].update=function(){0===this.type?this.na[0].setPosition(-30,20).setRotation(0):1===this.type?this.na[0].setPosition(-30,20).setRotation(-5):2===this.type&&this.na[0].setPosition(-30,10).setRotation(-10)}.bind(this);this.na[1]=tm.display.TriangleShape(20,20,{fillStyle:"hsla(180, 80%, 80%, 0.5)",strokeStyle:"transparent"});this.na[1].update=function(){0===this.type?
this.na[1].setPosition(30,20).setRotation(0):1===this.type?this.na[1].setPosition(30,20).setRotation(5):2===this.type&&this.na[1].setPosition(30,10).setRotation(10)}.bind(this);this.na[2]=tm.display.TriangleShape(20,20,{fillStyle:"hsla(180, 80%, 80%, 0.5)",strokeStyle:"transparent"});this.na[2].update=function(){0===this.type?this.na[2].setPosition(-50,10).setRotation(0):1===this.type?this.na[2].setPosition(-50,10).setRotation(-10):2===this.type&&this.na[2].setPosition(-50,20).setRotation(-20)}.bind(this);
this.na[3]=tm.display.TriangleShape(20,20,{fillStyle:"hsla(180, 80%, 80%, 0.5)",strokeStyle:"transparent"});this.na[3].update=function(){0===this.type?this.na[3].setPosition(50,10).setRotation(0):1===this.type?this.na[3].setPosition(50,10).setRotation(10):2===this.type&&this.na[3].setPosition(50,20).setRotation(20)}.bind(this);this.pc.line=b(0,0,0,130,8);this.pc.line.addChildTo(this.pc);this.na.each(function(a){a.line=b(0,0,0,130,5);a.line.addChildTo(a);a.addChildTo(this.Vb)}.bind(this));var d=["\u30b7\u30e7\u30c3\u30c8\u5f37\u5316\u578b\n\n\u30d3\u30c3\u30c8\u3092\uff14\u3064\u88c5\u5099\u3057\u305f\n\u30b7\u30e7\u30c3\u30c8\u91cd\u8996\u306e\u30b9\u30bf\u30a4\u30eb",
"\u30ec\u30fc\u30b6\u30fc\u5f37\u5316\u578b\n\n\u30ec\u30fc\u30b6\u30fc\u306e\u5a01\u529b\u306b\u512a\u308c\n\u5bfe\u5927\u578b\u6a5f\u6226\u3067\n\u6709\u5229\u306a\u30b9\u30bf\u30a4\u30eb","\u30a8\u30ad\u30b9\u30d1\u30fc\u30c8\u5f37\u5316\u578b\n\n\u30b7\u30e7\u30c3\u30c8\u3068\u30ec\u30fc\u30b6\u30fc\u306e\n\u4e21\u65b9\u304c\u5f37\u5316\u3055\u308c\u305f\u30b9\u30bf\u30a4\u30eb\n\n<<\u30b2\u30fc\u30e0\u96e3\u6613\u5ea6\u304c\u4e0a\u6607\u3057\u307e\u3059\uff01>>\n<<\u4e0a\u7d1a\u8005\u5411\u3051>>"];
this.lf=tm.display.Label(d[0],16).setPosition(240,500);this.lf.update=function(){this.lf.text=d[this.style]}.bind(this);this.lf.addChildTo(a);return a},update:function(a){if(0===this.mode)if(this.types.alpha=1,this.te.visible=l,!this.je&&a.keyboard.getKeyDown("left"))this.qf(-1,l),H("select");else if(!this.je&&a.keyboard.getKeyDown("right"))this.qf(1,l),H("select");else{if(a.keyboard.getKeyDown("z")||a.keyboard.getKeyDown("c")||a.keyboard.getKeyDown("space"))this.mode=1,H("decision")}else 1===this.mode&&
(this.types.alpha=0.1,this.te.visible=j,a.keyboard.getKeyDown("left")?(this.style=(this.style-1+3)%3,H("select")):a.keyboard.getKeyDown("right")?(this.style=(this.style+1+3)%3,H("select")):a.keyboard.getKeyDown("z")||a.keyboard.getKeyDown("c")||a.keyboard.getKeyDown("space")?(v.Lf?this.nj():(this.ic=j,this.Pg()),H("decision")):a.keyboard.getKeyDown("x")&&(this.mode=0),this.Bj(0===~~(a.frame/60)%2))},nj:function(){V(this,"AUTO BOMB",["on","off"],this.ej,{defaultValue:0,menuDescriptions:["\u88ab\u5f3e\u6642\u306b\u81ea\u52d5\u3067\u30dc\u30f3\u30d0\u30fc\u3092\u6295\u4e0b\u3057\u307e\u3059",
"\u30dc\u30f3\u30d0\u30fc\u306e\u6295\u4e0b\u306f\u624b\u52d5\u3067\u306e\u307f\u884c\u3044\u307e\u3059\u3002\u30df\u30b9\u6642\u306b\u6700\u5927\u30dc\u30e0\u6570\u304c\u5897\u52a0\u3057\u307e\u3059"],showExit:j})},ej:function(a){2!==a&&(this.ic=0===a,this.Pg())},Pg:function(){V(this,"ARE YOU READY?",["ok"],this.fj,{defaultValue:0,menuDescriptions:["\u51fa\u6483\u3057\u307e\u3059"],showExit:j})},fj:function(a){0===a&&this.wj()},qf:function(a,b){this.type=(this.type+a+3)%3;[this.yb,this.zb,this.Ab][this.type].remove().addChildTo(this.types);
b?(this.yb.Ka-=a,this.yb.scaleX=0===this.type?5:1,this.yb.scaleY=0===this.type?5:1,this.zb.Ka-=a,this.zb.scaleX=1===this.type?5:1,this.zb.scaleY=1===this.type?5:1,this.Ab.Ka-=a,this.Ab.scaleX=2===this.type?5:1,this.Ab.scaleY=2===this.type?5:1):(this.je=j,this.yb.tweener.clear().to({Ka:this.yb.Ka-a,scaleX:0===this.type?5:1,scaleY:0===this.type?5:1},300),this.zb.tweener.clear().to({Ka:this.zb.Ka-a,scaleX:1===this.type?5:1,scaleY:1===this.type?5:1},300),this.Ab.tweener.clear().to({Ka:this.Ab.Ka-a,scaleX:2===
this.type?5:1,scaleY:2===this.type?5:1},300),this.tweener.clear().wait(310).call(function(){this.je=l}.bind(this)));this.mf.text=["Type-A","Type-B","Type-C"][this.type]},wj:function(){u.ca.ic=this.ic;u.ca.start(this.type,this.style);u.replaceScene(u.ca);Ba()},Bj:function(a){this.kf.text=["Shot","Laser","Expert"][this.style]+" Style";1===this.style?(this.pc.line.Eb=l,this.na[0].line.Eb=l,this.na[1].line.Eb=l,this.na[2].line.Eb=l,this.na[3].line.Eb=l):(this.pc.line.Eb=j,this.na[0].line.Eb=j,this.na[1].line.Eb=
j,this.na[2].line.Eb=j,this.na[3].line.Eb=j);a?(this.na[0].visible=j,this.na[1].visible=j,1===this.style?(this.na[2].visible=l,this.na[3].visible=l):(this.na[2].visible=j,this.na[3].visible=j),this.pc.line.lineWidth=5):(this.na.each(function(a){a.visible=l}),this.pc.line.lineWidth=0===this.style?10:25)},Tc:n()});var b=tm.createClass({superClass:tm.display.CanvasElement,Eb:j,init:function(a,b,f,g,p){this.superInit();this.angle=f-0.5*Math.PI;this.x=a+10*Math.cos(this.angle);this.y=b+10*Math.sin(this.angle);
this.length=g;this.fillStyle=this.strokeStyle="hsla(180, 80%, 80%, 1.0)";this.i=0;this.lineWidth=p},update:function(a){this.i=a.frame%20/20},draw:function(a){a.lineWidth=this.lineWidth;if(this.Eb&&5===this.lineWidth){var b=5*Math.cos(this.angle-Math.PI/2),f=5*Math.sin(this.angle-Math.PI/2);a.drawArrow(this.x-b,this.y-f,Math.cos(this.angle)*this.length*this.i+this.x-b,Math.sin(this.angle)*this.length*this.i+this.y-f,1.2*this.lineWidth);a.drawArrow(this.x+b,this.y+f,Math.cos(this.angle)*this.length*
this.i+this.x+b,Math.sin(this.angle)*this.length*this.i+this.y+f,1.2*this.lineWidth)}else a.drawArrow(this.x,this.y,Math.cos(this.angle)*this.length*this.i+this.x,Math.sin(this.angle)*this.length*this.i+this.y,1.2*this.lineWidth)}})})();D=tm.createClass({superClass:Qa,da:k,score:0,Vd:0,Na:0,Ea:0,sd:0,Ia:0,jc:0,Gf:0,pe:k,ga:k,rc:3,qe:0,re:0,Ob:0,Zd:0,td:0,pf:0,ic:l,jb:0,Ac:0,ig:0,Xc:l,ge:l,Nb:0,gb:0,wa:l,qd:0,Wc:0,Ba:0,Xd:0,Rj:0,Qj:0,de:k,tg:k,Af:k,rg:k,bf:k,cf:k,Xe:k,Zi:k,vb:k,mb:k,Wb:k,nd:l,Yi:l,init:function(){D.Je!==k&&h(Error("class 'gls2.GameScene' is singleton!!"));this.superInit();D.Je=this;this.mb=qa(this);this.mb.Ya.addChildTo(this);this.ga=sa().sa;this.ga.addChildTo(this);this.de=D.gc().addChildTo(this);this.tg=D.gc().addChildTo(this);
this.rg=D.gc().addChildTo(this);this.bf=D.gc().addChildTo(this);this.Af=D.gc().addChildTo(this);this.cf=D.gc().addChildTo(this);this.Xe=D.gc().addChildTo(this);this.Zi=D.Uf(this).addChildTo(this);tm.eb.sc.md.fg=this;this.vb=tm.app.Object2D();this.vb.addChildTo(this);this.vb.update=function(b){this.lj(b)}.bind(this);this.addEventListener("exit",function(){this.mb.clear()})},addChild:function(b){b.Ua?this.bf.addChild(b):b instanceof O?this.Xe.addChild(b):b instanceof ua?this.de.addChild(b):b instanceof
P?b.Zb?this.de.addChild(b):this.rg.addChild(b):b instanceof ca?this.Af.addChild(b):b===this.vb||b===this.ga||b instanceof D.gc||b instanceof D.Uf||b instanceof ra?this.superClass.prototype.addChild.apply(this,arguments):(console.error("unknown type child."),h(Error(b)))},update:function(b){this.qj(b.keyboard);this.pe.update(b.frame);0===b.frame%2&&this.mb.update();b.keyboard.getKeyDown("escape")?(this.app.replaceScene(ba()),Ga()):b.keyboard.getKeyDown("space")?this.ke(0):b.keyboard.getKeyDown("p")&&
(this.Vg().saveAsImage(),this.ke(0))},Vg:function(){var b=tm.graphics.Canvas();b.resize(480,640);b.clearColor("black");b.drawImage(this.ga.ga.element,0,0);b.drawImage(this.app.canvas.element,0,0);b.drawImage(this.mb.element,0,0);return b},lj:function(){this.da.Xb===l&&z.erase();var b;b=[].concat(P.Ta);for(var a=[].concat(ka.Ta),d=a.length;a[--d]!==i;)for(var f=b.length;b[--f]!==i;){var g=b[f],p=a[d];if(!(0>=g.pa)&&Pa(g,p)&&(p.ce(1),p.remove(),g.Yb(p.xc))){this.Ob+=1;this.wa?this.ab(v.Fh):this.ab(v.Eh);
this.sf(g);break}}p=this.da.$b;if(this.da.tb){b=[].concat(P.Ta);b.sort(function(a,b){return a.y-b.y});for(f=b.length;b[--f]!==i;)if(g=b[f],!(0>=g.pa)&&Pa(g,p)){p.rj(g.y+g.boundingHeightBottom);g.Yb(p.xc)?(this.Ob+=1,this.wa?this.ab(v.Dh):this.ab(v.Ah),this.sf(g)):(this.wa?this.Oc(0.01*this.Ba):this.Oc(0.01),this.Ia=Math.min(this.Ia+0.02,1),this.wa?this.ab(v.Ch):this.ab(v.Bh));p.ce(2);break}a={x:this.da.x,y:this.da.y,boundingWidthLeft:50,boundingWidthRight:50,boundingHeightTop:100,boundingHeightBottom:40};
b=[].concat(P.Ta);for(f=b.length;b[--f]!==i;)g=b[f],!(0>=g.pa)&&Pa(g,a)&&(g.Yb(p.xc)?(this.Ob+=1,this.wa?this.ab(v.zh):this.ab(v.wh),this.sf(g)):(this.wa?this.Oc(0.01*this.Ba):this.Oc(0.01),this.Ia=Math.min(this.Ia+0.02,1),this.wa?this.ab(v.yh):this.ab(v.xh)),p.Qi(2,this.da.x,this.da.y-30))}if(this.Xc){z.erase();b=[].concat(P.Ta);for(f=b.length;b[--f]!==i;)g=b[f],!(0>=g.pa)&&(g.Va()&&g.Yb(v.dh))&&(this.wc(g.score),this.Ob+=1);this.Ia=this.Ea=0}if(this.wa){f=[].concat(ka.Ta);for(g=f.length;f[--g]!==
i;)if(p=f[g],!(0>=p.pa)){a=[].concat(O.Ta);for(b=a.length;a[--b]!==i;)d=a[b],d.visible!==l&&(0<p.pa&&Pa(p,d))&&(d.pa-=6-this.gb,0>d.pa&&(d.Aa(),this.wc(v.hh),this.Oc(v.fh),this.xg(l,l,d.x,d.y,1)),p.pa-=1)}}if(this.nd)z.erase();else{if(this.da.parent!==k&&this.da.Zc===l&&this.Xc===l&&0>=this.qd&&!v.Rh){for(f=O.Ta.length;O.Ta[--f]!==i;)if(b=O.Ta[f],b.visible!==l&&Pa(b,this.da)){this.da.Yb();0<this.jb&&this.ic?(this.gb=T(this.gb-1,0,1),this.gd(-0.01),la(this.da,this).setPosition(this.da.x,this.da.y).addChildTo(this)):
this.Mg();break}for(f=P.Ta.length;P.Ta[--f]!==i;)if(g=P.Ta[f],!(0>=g.pa)&&!g.Zb&&Pa(g,this.da)){this.da.Yb();0<this.jb&&this.ic?(this.gb=T(this.gb-1,0,1),this.gd(-0.01),la(this.da,this).setPosition(this.da.x,this.da.y).addChildTo(this)):this.Mg();break}}this.wa&&(this.Wc-=1,0>=this.Wc&&this.Yd());this.qd=Math.max(this.qd-1,0);this.Ia-=v.lh*v.mh;0>=this.Ia&&(this.Ia=0,this.wa||0<this.Ba?this.jc=this.Ea=this.Na=0:(0<this.Ea&&(0>=this.jc&&(this.jc=this.Ea*v.kh),this.Na=this.Na*(this.Ea-this.jc)/this.Ea,
this.Ea-=this.jc),0>=this.Ea&&(this.jc=this.Ea=this.Na=0)));this.ge&&(this.score+=v.Qh)}},sf:function(b){this.xg(b.Zb,this.wa||Ka(b,this.da)<v.nh,b.x,b.y,b.star,b instanceof Ia);this.Oc(v.Lh[this.Xd]);for(var a=this.Na,d=~~(this.Ea/v.Pf)+1,f=0;f<d;f++)a+=b.score,this.wc(a);this.Na+=b.score*d},xg:function(b,a,d,f,g,p){b=b?wa:va;for(var t=0;t<g;t++){var C=b(a);C.setPosition(d,f);p&&(C.Dc=j)}},dj:function(b){H("star");b.Gg?(this.re+=1,this.Na+=v.ai,this.wc(v.ei+this.Na*v.ci),this.wa?this.ab(v.Jh):this.ab(v.Ih)):
(this.qe+=1,this.Na+=v.$h,this.wc(v.di+this.Na*v.bi),this.wa?this.ab(v.Hh):this.ab(v.Gh))},start:function(b,a){this.mb.Qc.yi().clear();this.Vd=this.score=0;this.rc=v.Sf;this.jb=this.Ac=v.Rf[a];this.ig=v.eh[a];this.Ba=this.gb=this.Nb=0;this.Yd();this.Xc=l;this.td=this.pf=0;this.da=ca(this,b,a);this.Ef(v.Nh);q.Ca.ub.$ex=2!==a?0:1;this.Wg(0);H("voLetsGo");this.yj()},Wg:function(b){this.Xa("3...2...1...");this.da.parent!==k&&this.da.remove();P.kd();ka.kd();z.kd();this.de.removeChildren();this.bf.removeChildren();
this.cf.removeChildren();this.Af.removeChildren();this.Xe.removeChildren();this.vb.removeChildren();this.Ob=this.Zd=this.re=this.qe=this.sd=this.Ia=this.Ea=this.Na=0;this.Wb=k;this.Yi=this.nd=l;this.td=0;this.mb.Ya.od=0;this.gb=this.mb.Ya.Lb=0;this.Gf=b;this.pe=xa.create(this,b);this.tweener.clear().wait(1E3).call(function(){this.of()}.bind(this));this.ga.tweener.clear()},of:function(){this.Xa("Let's go!");this.da.setPosition(240,740).setFrameIndex(3).addChildTo(this);this.da.$b.addChildTo(this);
this.da.Xb=l;this.da.Zc=j;this.da.Vc=l;this.da.tb=l;this.da.tweener.clear().moveBy(0,-180,1E3,"easeOutBack").call(function(){this.hd=this.Xb=j}.bind(this.da)).wait(v.Ph).call(function(){this.Zc=l}.bind(this.da))},Mg:function(){B.$d(this.da.x,this.da.y,this);this.Xa("I was shot down.");this.da.Xb=l;this.da.remove();this.rc-=1;this.Ba=this.jc=this.Ea=this.Ia=0;this.td+=1;this.pf+=1;this.gb=T(this.gb-3,0,1);this.gd(-0.03);0<this.rc?this.tweener.clear().wait(1E3).call(function(){if(!this.ic||!v.Lf)this.Ac=
Math.min(this.Ac+1,this.ig);this.jb=this.Ac;this.of()}.bind(this)):this.tweener.clear().wait(2E3).call(function(){this.pj()}.bind(this))},Ef:function(b){var a=0.02*Math.max(0,u.af-1)+(2!==this.da.style?0:0.1);q.Ca.ub.$rank=T(b,a,0.5)},gd:function(b){this.Ef(q.Ca.ub.$rank+b)},Oi:function(){this.Xa("System rebooted.",j);this.score=0;this.Vd+=1;this.rc=v.Sf;this.jb=this.Ac=v.Rf[this.da.style];this.gb=0;this.Ef(0);this.of()},zi:function(){J("bgmResult");var b=tm.app.Object2D();b.addChildTo(this.vb);b.tweener.wait(1E3).call(function(){this.app.pushScene(Ja(this,
this.Vg()));b.remove()}.bind(this))},Pi:function(){Ga();this.app.replaceScene(Sa())},Oj:n(),wc:function(b){var a=this.score;this.score+=b;for(b=0;b<v.Qf.length;b++){var d=v.Qf[b];a<d&&d<=this.score&&this.Ii()}u.Ec=Math.max(u.Ec,this.score);u.Ec===this.score&&(u.Ag=this.Gf,u.Cg=this.da.type,u.Bg=this.da.style,u.yg=this.Vd)},Oc:function(b){this.jc=0;this.Ea+=b;this.sd=Math.max(this.sd,this.Ea);1<=b&&(this.Ia=1)},ab:function(b){if(this.Ba!==v.Ae){for(b*=v.Kh;1<b;)pa(this.da).addChildTo(this),b-=1,this.Nb=
0,this.Ba+=1,1===this.Ba?(this.Xa("HYPER SYSTEM, stand by.",j),H("voHyperStandBy")):(this.Xa("HYPER SYSTEM, ready.",j),H("voHyperReady"));this.Nb=T(this.Nb+b,0,1);1<=this.Nb&&(pa(this.da).addChildTo(this),this.Ba+=1,this.Nb-=1,1===this.Ba?(this.Xa("HYPER SYSTEM, stand by.",j),H("voHyperStandBy")):(this.Xa("HYPER SYSTEM, ready.",j),H("voHyperReady")))}},xj:function(){0.5>Math.random()?(this.Xa("HYPER SYSTEM start!!",j),H("voHyperStart0")):(this.Xa("start counting to system limit.",j),H("voHyperStart1"));
this.gb=T(this.gb+1,0,5);this.gd(0.01*this.Ba);q.Ca.ub.$hyperOff=v.qh*(2!==this.da.style?1:0.5);this.Wc=v.Hd;this.qd=v.Hd*v.vh;this.da.ee.ad(this.Ba);this.da.$b.ad(this.Ba);this.da.Rc=this.da.ee;B.Ri(this.da.x,this.da.y,this);this.wa=j;this.Xd=this.Ba;this.Nb=this.Ba=0;z.erase(j,j)},Yd:function(){this.wa!==l&&(this.wa=l,pa(this.da,j).addChildTo(this),this.da.Rc=this.da.Og,q.Ca.ub.$hyperOff=1*(2!==this.da.style?1:0.5),this.da.ee.ad(0),this.da.$b.ad(0),this.qd=v.Hd*v.uh,this.Xd=this.Wc=0,z.erase())},
ti:function(){H("decision");H("voGetBomb");this.jb=Math.min(this.jb+1,this.Ac);this.ge=this.jb===this.Ac},Ii:function(){H("voExtend");this.Xa("extended.");this.rc+=1},Xa:function(b,a){this.mb.Qc.vi(b,a)},ke:function(b){V(this,"PAUSE",["resume","setting","exit game"],this.kj,{defaultValue:b,menuDescriptions:["\u30b2\u30fc\u30e0\u3092\u518d\u958b\u3057\u307e\u3059","\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u307e\u3059","\u30b2\u30fc\u30e0\u3092\u4e2d\u65ad\u3057\u3001\u30bf\u30a4\u30c8\u30eb\u753b\u9762\u306b\u623b\u308a\u307e\u3059"],
showExit:l})},kj:function(b){switch(b){case 1:this.mc();break;case 2:this.oj()}},mc:function(){V(this,"SETTING",["bgm volume","sound volume"],this.wf,{defaultValue:this.he,menuDescriptions:["BGM\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8a2d\u5b9a\u3057\u307e\u3059","\u52b9\u679c\u97f3\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8a2d\u5b9a\u3057\u307e\u3059"]})},wf:function(b){3!==b&&(this.he=b);switch(b){case 0:this.xf();break;case 1:this.yf();break;default:this.ke()}},oj:function(){V(this,"REARY?",["yes","no"],
this.gj,{defaultValue:1,menuDescriptions:["\u30b2\u30fc\u30e0\u3092\u4e2d\u65ad\u3057\u3001\u30bf\u30a4\u30c8\u30eb\u753b\u9762\u306b\u623b\u308a\u307e\u3059","\u524d\u306e\u753b\u9762\u3078\u623b\u308a\u307e\u3059"],showExit:l})},gj:function(b){0===b?(Ga(),this.app.replaceScene(ba())):this.ke(1)},xf:function(){V(this,"BGM VOLUME","012345".split(""),this.uf,{defaultValue:u.jd,onCursorMove:function(b){N!==k&&6!==b&&(N.volume=0.1*b)},showExit:l})},uf:function(b){6!==b&&(u.jd=b);this.mc(1)},yf:function(){V(this,
"SE VOLUME","012345".split(""),this.vf,{defaultValue:u.Gc,showExit:l})},vf:function(b){6!==b&&(u.Gc=b);this.mc(1)},pj:function(){V(this,"CONTINUE?",["yes","no"],this.hj,{defaultValue:0,menuDescriptions:["\u30b7\u30b9\u30c6\u30e0\u3092\u518d\u8d77\u52d5\u3057\u3066\u51fa\u6483\u3057\u307e\u3059","\u4f5c\u6226\u5931\u6557\u3002\u9000\u5374\u3057\u307e\u3059"],showExit:l})},hj:function(b){switch(b){case 0:this.Oi();break;case 1:this.Pi()}},Tc:n(),uj:function(){this.mb.Ya.tweener.clear().to({od:-480},
1600,"easeInBack").to({Lb:30},800,"easeInOutBack")},Ti:function(){this.mb.Ya.tweener.clear().to({Lb:0},800,"easeInOutBack").to({od:0},1600,"easeOutBack")},wd:k,xd:0,rd:k,Jd:0,yj:function(){if(1===this.Jd){console.log("rec start");if(localStorage.getItem("recCount")!==i){this.rd=[];for(var b=~~localStorage.getItem("recCount"),a=0;a<b;a++)localStorage.removeItem("rec"+a);localStorage.removeItem("recCount")}this.wd=[];this.xd=0}else if(2===this.Jd&&(console.log("replay start"),localStorage.getItem("recCount")!==
i)){this.rd=[];b=~~localStorage.getItem("recCount");for(a=0;a<b;a++)for(var d=localStorage.getItem("rec"+a).split(","),f=0;f<d.length;f++)this.rd.push(d[f])}},qj:function(b){if(1===this.Jd)1E3<this.wd.length&&(console.log("save"),localStorage.setItem("rec"+this.xd,this.wd),localStorage.setItem("recCount",this.xd),this.wd=[],this.xd+=1),this.wd.push(""+~~b.getKey("up")+~~b.getKey("down")+~~b.getKey("left")+~~b.getKey("right")+~~b.getKey("z")+~~b.getKey("x")+~~b.getKey("c"));else if(2===this.Jd&&this.rd){var a=
this.rd.shift();a!==i&&(b.getKey=function(b){return"up"===b?!!~~a[0]:"down"===b?!!~~a[1]:"left"===b?!!~~a[2]:"right"===b?!!~~a[3]:"z"===b?!!~~a[4]:"x"===b?!!~~a[5]:"c"===b?!!~~a[6]:l},b.getKeyDown=function(b){return"up"===b?!!~~a[0]:"down"===b?!!~~a[1]:"left"===b?!!~~a[2]:"right"===b?!!~~a[3]:"z"===b?!!~~a[4]:"x"===b?!!~~a[5]:"c"===b?!!~~a[6]:l})}}});D.gc=tm.createClass({superClass:tm.app.Object2D,init:function(){this.superInit()}});
D.Uf=tm.createClass({superClass:tm.display.CanvasElement,ca:k,frame:0,init:function(b){this.superInit();this.ca=b;this.blendMode="lighter"},update:function(b){this.frame=b.frame},draw:function(b){this.Ci(b);this.Di(b)},Ci:function(b){if(0<this.ca.Ia){b.fillStyle="rgba(255,"+~~(255*this.ca.Ia)+","+~~Math.min(255,512*this.ca.Ia)+",0.5)";var a=500*this.ca.Ia;b.fillRect(465,635-a,10,a)}},Di:function(b){b.fillStyle="rgba(255,255,0,0.1)";b.fillRect(5,628,200,9);this.Ba===v.Ae?1===this.frame%2&&(b.fillStyle=
"rgba(255,255,255,0.3)",b.fillRect(5,628,200,9)):0<this.ca.Nb&&(b.fillStyle="rgba(255,255,100,0.3)",b.fillRect(5,628,200*this.ca.Nb,9))}});D.Je=k;Ja=tm.createClass({superClass:Qa,ca:k,Tg:k,vb:k,values:k,labels:k,fe:k,Sg:[v.Yh,v.Zh,v.Vh,v.Wh,1],Fg:k,Cf:k,cursor:0,wait:0,frame:0,init:function(b,a){this.superInit();this.ca=b;tm.display.Sprite("result_bg",528,704).setPosition(240,320).addChildTo(this);this.values=[this.ca.qe,this.ca.re,~~(100*(this.ca.Ob/this.ca.Zd)),this.ca.sd,0===this.ca.td?v.Xh:0];this.fe=this.values.map(function(a){return 0.01*a});tm.display.Label("RESULT",40).setPosition(240,64).addChildTo(this);tm.display.Label("STAR (S)").setAlign("right").setBaseline("middle").setPosition(240,
128).addChildTo(this);tm.display.Label("STAR (L)").setAlign("right").setBaseline("middle").setPosition(240,192).addChildTo(this);tm.display.Label("KILL RATIO").setAlign("right").setBaseline("middle").setPosition(240,256).addChildTo(this);tm.display.Label("MAX HIT").setAlign("right").setBaseline("middle").setPosition(240,320).addChildTo(this);tm.display.Label("NO MISS BONUS",20).setAlign("right").setBaseline("middle").setPosition(240,384).addChildTo(this);tm.display.Label("TOTAL SCORE").setAlign("right").setBaseline("middle").setPosition(240,
448).addChildTo(this);this.labels=[];for(var d=0;d<this.values.length;d++)this.labels[d]=tm.display.Label(""+Math.floor(this.values[d])+(2===d?"%":""),30).setFontFamily("'Ubuntu Mono'").setAlign("right").setBaseline("middle").setPosition(384,640*(0.2+0.1*d)).addChildTo(this);this.Fg=tm.display.Label(Math.floor(this.ca.score),34).setFontFamily("'Ubuntu Mono'").setAlign("right").setBaseline("middle").setPosition(384,512).addChildTo(this);this.Cf=tm.display.Label("press space key").setPosition(240,576).addChildTo(this);
this.Cf.visible=l;this.Tg=a;for(var f=[],d=0;12>d;d++){f[d]=[];for(var g=0;16>g;g++)f[d][g]={Df:0,ne:0,cc:U(-2,2),Fb:U(1,4)}}this.vb=tm.app.Object2D();this.vb.draw=function(a){a.save();for(var b=j,d=0;d<f.length;d++)for(var g=0;g<f[d].length;g++){var r=f[d][g];640>40*g+r.ne&&(a.drawImage(this.Tg.element,40*d,40*g,40,40,40*d+r.Df,40*g+r.ne,40,40),r.Df+=r.cc,r.ne+=r.Fb,r.Fb+=0.3,b=l)}this.wait=60;b&&this.vb.remove();a.restore()}.bind(this);this.vb.addChildTo(this);this.addEventListener("exit",function(){Ba()})},
update:function(b){this.wait-=1;if(!(0<this.wait)){var a=this.cursor;if(a<this.values.length)H("star"),this.values[a]<=this.fe[a]||b.keyboard.getKeyDown("z")||b.keyboard.getKeyDown("c")||b.keyboard.getKeyDown("space")?(this.ca.wc(this.values[a]*this.Sg[a]),this.values[a]=0,this.cursor+=1,this.wait=30):(this.ca.wc(this.fe[a]*this.Sg[a]),this.values[a]-=this.fe[a]),this.labels[a].text=""+Math.floor(this.values[a])+(2===a?"%":""),this.Fg.text=Math.floor(this.ca.score);else if(this.Cf.visible=j,b.keyboard.getKeyDown("z")||
b.keyboard.getKeyDown("c")||b.keyboard.getKeyDown("space")||1800<this.frame)H("decision"),this.ca.Wg(this.ca.Gf+1),b.popScene();this.frame+=1}},Tc:n()});var Sa=tm.createClass({superClass:Qa,init:function(){this.superInit();var b=tm.display.Label("GAME OVER");b.fillStyle="red";b.setPosition(240,320).addChildTo(this);this.interactive=j;this.addEventListener("enter",function(){this.tweener.clear().wait(5E3).call(function(){this.app.replaceScene(ba())}.bind(this))})},update:function(b){(b.keyboard.getKeyDown("z")||b.keyboard.getKeyDown("c"))&&b.replaceScene(ba())},Tc:function(b){b.clearColor("black")}});tm.createClass({superClass:Qa,init:function(){this.superInit()},update:n()});(function(){P=tm.createClass({superClass:tm.display.CanvasElement,name:k,da:k,ca:k,pe:k,pa:0,lc:0,score:0,Zb:l,erase:l,star:1,Xi:l,kb:j,Oa:l,frame:0,ue:k,direction:0,speed:0,ka:k,init:function(a,d,f){this.superInit();this.addEventListener("added",function(){this.frame=0;this.Oa=l;b.push(this)});this.addEventListener("removed",function(){this.dispatchEvent(tm.event.Event("enemyconsumed"));var a=b.indexOf(this);-1!==a&&b.splice(a,1)});this.kb=j;this.ca=a;this.da=a.da;this.score=100;this.erase=l;this.si(f);
d.setup(this);this.altitude=this.Zb?1:10;this.ue={x:0,y:0}},tf:function(){this.dispatchEvent(tm.event.Event("launch"));return this},Uj:function(){this.dispatchEvent(tm.event.Event("completeattack"))},update:function(){this.Oa===l&&(0<=this.x-this.boundingWidthLeft&&480>this.x+this.boundingWidthRight&&0<=this.y-this.boundingHeightTop&&640>this.y+this.boundingHeightBottom)&&(this.Oa=j,this.dispatchEvent(tm.event.Event("enter")));var a=this.x,b=this.y;this.Zb&&(this.x+=this.ca.ga.ta,this.y+=this.ca.ga.ua);
this.Oa&&(this.frame+=1);this.ue.x=this.x-a;this.ue.y=this.y-b},Yb:function(a){if(!this.Oa)return l;this.pa-=a;if(0>=this.pa)return a=U(0,5),2>a?this.ca.Xa("enemy destroy."):4>a?this.ca.Xa(this.name+" destroy."):this.ca.Xa("ETR reaction gone."),this.erase&&z.erase(j,this.ca.wa,this instanceof Ia),this.dispatchEvent(tm.event.Event("destroy")),this.Aa(),j;40>this.pa&&this.Wa();return l},Aa:function(){B.$d(this.x,this.y,this.ca,this.ue);this.remove()},Va:function(){return 0<=this.x+this.width/2&&480>
this.x-this.width/2&&0<=this.y+this.height/2&&640>this.y-this.height/2},mj:function(){return this.kb},Wa:n(),si:function(a){this.name=a;a=P.oh[a];this.pa=this.lc=a[0];this.score=a[1];this.Zb=a[2];this.erase=a[3];this.star=a[4];a[5].radius!==i&&(this.boundingRadius=a[5].radius);a[5].width!==i&&(this.boundingWidth=a[5].width);a[5].height!==i&&(this.boundingHeight=a[5].height);a[5].widthLeft!==i&&(this.boundingWidthLeft=a[5].widthLeft);a[5].widthRight!==i&&(this.boundingWidthRight=a[5].widthRight);a[5].heightTop!==
i&&(this.boundingHeightTop=a[5].heightTop);a[5].heightBottom!==i&&(this.boundingHeightBottom=a[5].heightBottom)},Uc:function(){this.remove();this.ca.tg.addChild(this);this.addEventListener("enterframe",function(){0.2>Math.random()&&B.$d(this.x+Na(-100,100),this.y+Na(-40,40),this.ca,{x:0,y:-3})});this.tweener.clear().to({altitude:4,y:this.y+200},2E3).call(function(){B.sg(this.x,this.y,this.ca);this.remove()}.bind(this))},jg:function(){this.addEventListener("enterframe",function(){0.2>Math.random()&&
B.$d(this.x+Na(-100,100),this.y+Na(-40,40),this.ca,{x:0,y:-3})});this.tweener.clear().to({altitude:4,y:this.y+200},2E3).call(function(){B.sg(this.x,this.y,this.ca);this.remove()}.bind(this))}});P.kd=function(){for(var a=[].concat(b),d=0,f=a.length;d<f;d++)a[d].remove()};var b=P.Ta=[]})();Ia=tm.createClass({superClass:P,Xi:j,lc:0,oe:k,init:function(b,a,d){this.oe=a;this.superInit(b,this.oe[0],d);this.lc=this.pa;this.addEventListener("added",function(){this.ca.Wb=this;this.ca.uj();this.tweener.wait(1E3).call(function(){this.ca.nd=l}.bind(this))});this.addEventListener("removed",function(){this.ca.Wb=k;this.ca.Ti();var a=tm.app.Object2D();a.tweener.wait(7E3).call(function(){this.ca.zi()}.bind(this));a.addChildTo(this.ca.vb)})},Yb:function(b){var a=this.pa;if(P.prototype.Yb.call(this,
b))return this.ca.nd=j,this.ca.da.hd=l,Ba(),j;this.pa<=0.55*this.lc&&0.55*this.lc<a?(S.se(this),this.clearEventListener("completeattack"),this.tweener.clear(),B.sb(this.x,this.y,this.ca),z.erase(j,this.ca.wa),this.oe[1].setup(this)):this.pa<=0.1*this.lc&&0.1*this.lc<a&&(S.se(this),this.clearEventListener("completeattack"),this.tweener.clear(),B.sb(this.x,this.y,this.ca),z.erase(j,this.ca.wa),this.oe[2].setup(this),H("voJacms"))}});(function(){P.oh={kujo:[2,300,l,l,1,{radius:24}],kiryu:[3,400,l,l,1,{radius:24}],natsuki:[5,900,j,l,1,{radius:24}],kise:[50,15E3,j,l,1,{radius:24}],yamabuki:[100,15E3,j,l,1,{width:70,height:70}],hanasaki:[150,2E5,j,j,10,{radius:40}],myodoin:[50,15E3,j,l,1,{radius:40}],kenzaki:[200,3E5,j,j,10,{width:100,height:40}],tsukikage:[8,1E3,l,l,5,{width:100,height:20}],kurokawa:[35,5E3,l,l,5,{width:100,height:20}],akimoto:[250,3E5,l,j,10,{width:200,heightBottom:10,heightTop:60}],yukishiro:[750,8E5,l,j,20,{width:240,
height:80}],misumi:[4E3,2E6,l,j,0,{width:240,height:80}],mishou:[1E3,1E6,l,j,20,{width:300,height:80}],hyuga:[6E3,3E6,l,j,0,{width:240,height:80}],erika:[30,500,l,l,1,{width:24,height:48}],hino:[30,500,l,l,1,{width:24,height:48}],hoshizora_y:[100,500,l,j,30,{width:128,height:64}],hoshizora_t:[150,500,l,j,30,{width:128,height:64}],yotsuba:[300,3E4,l,j,30,{width:64,height:64}],yotsubaLeaf:[300,1E4,l,l,10,{width:32,height:32}]};P.ha=tm.createClass({superClass:P,fa:k,init:function(a,d){this.superInit(a,
d,"kujo");this.fa=b("tex_stage1",64,64)},update:function(a){P.prototype.update.call(this,a);this.scaleX=this.x<this.da.x?-1:1},draw:function(a){this.fa.setFrameIndex(2>this.frame%4?0:1).draw(a)}});P.qa=tm.createClass({superClass:P,fa:k,init:function(a,d){this.superInit(a,d,"kiryu");this.fa=b("tex_stage1",64,64)},update:function(a){P.prototype.update.call(this,a);this.scaleX=this.x<this.da.x?-1:1},draw:function(a){this.fa.setFrameIndex(2>this.frame%4?8:9).draw(a)}});P.ea=tm.createClass({superClass:P,
Re:k,Se:k,init:function(a,d){this.superInit(a,d,"natsuki");this.Re=b("tex_tank1",64,64);this.Se=b("tex_tank1",64,64);this.yc=this.yc||0;this.Kb=this.Kb||0},update:function(a){P.prototype.update.call(this,a);for(a=this.yc;0>a;)a+=2*Math.PI;for(;2*Math.PI<=a;)a-=2*Math.PI;for(var b=this.Kb;0>b;)b+=2*Math.PI;for(;2*Math.PI<=b;)b-=2*Math.PI;this.Re.setFrameIndex(~~(16*a/(2*Math.PI)),64,64);this.Se.setFrameIndex(~~(16*b/(2*Math.PI))+16,64,64)},draw:function(a){this.Re.draw(a);this.Se.draw(a)},Aa:function(){B.Gi(this.x,
this.y,this.ca);this.remove()}});P.Nf=tm.createClass({superClass:P,fa:k,init:function(a,d){this.superInit(a,d,"yamabuki");this.fa=b("tex_stage1",128,128).setFrameIndex(5)},Wa:function(){this.on("enterframe",function(a){0===a.app.frame%30?this.fa.bc():5===a.app.frame%30&&this.fa.ac()})},draw:function(a){this.fa.draw(a)},Aa:function(){B.sb(this.x,this.y,this.ca);this.remove()}});P.$a=tm.createClass({superClass:P,fa:k,init:function(a,d){this.superInit(a,d,"tsukikage");this.fa=b("tex_stage1",128,128).setFrameIndex(1)},
Wa:function(){this.on("enterframe",function(a){0===a.app.frame%30?this.fa.bc():5===a.app.frame%30&&this.fa.ac()})},draw:function(a){this.fa.draw(a)},Aa:function(){B.sb(this.x,this.y,this.ca);this.remove()}});P.ec=tm.createClass({superClass:P,fa:k,init:function(a,d){this.superInit(a,d,"kurokawa");this.fa=b("tex_stage1",128,128).setFrameIndex(1)},Wa:function(){this.on("enterframe",function(a){0===a.app.frame%30?this.fa.bc():5===a.app.frame%30&&this.fa.ac()})},draw:function(a){this.fa.draw(a)},Aa:function(){B.sb(this.x,
this.y,this.ca);this.remove()}});P.fc=tm.createClass({superClass:P,fa:k,init:function(a,d){this.superInit(a,d,"akimoto");this.fa=b("tex_stage1",256,128).setFrameIndex(1)},Wa:function(){this.on("enterframe",function(a){0===a.app.frame%30?this.fa.bc():5===a.app.frame%30&&this.fa.ac()})},draw:function(a){this.fa.draw(a)},Aa:function(){this.Uc()}});P.Fj=tm.createClass({superClass:P,fa:k,init:function(a,d){this.superInit(a,d,"aono");this.fa=b("tex_stage1",256,128).setFrameIndex(1)},Wa:function(){this.on("enterframe",
function(a){0===a.app.frame%30?this.fa.bc():5===a.app.frame%30&&this.fa.ac()})},draw:function(a){this.fa.draw(a)},Aa:function(){this.Uc()}});P.za=tm.createClass({superClass:P,fa:k,init:function(a,d){this.superInit(a,d,"kise");this.fa=b("tex_stage1",128,128).setFrameIndex(5)},Wa:function(){this.on("enterframe",function(a){0===a.app.frame%30?this.fa.bc():5===a.app.frame%30&&this.fa.ac()})},draw:function(a){this.fa.draw(a)},Aa:function(){B.sb(this.x,this.y,this.ca);this.remove()}});P.Ld=tm.createClass({superClass:P,
fa:k,init:function(a,b){this.superInit(a,b,"hanasaki")},Wa:n(),Aa:function(){B.sb(this.x,this.y,this.ca);this.remove()},draw:function(a){a.fillStyle="yellow";a.fillRect(-this.boundingWidthLeft,-this.boundingHeightTop,this.boundingWidthLeft+this.boundingWidthRight,this.boundingHeightTop+this.boundingHeightBottom)}});P.De=tm.createClass({superClass:P,init:function(a,b){this.superInit(a,b,"myodoin")},Wa:n(),Aa:function(){B.sb(this.x,this.y,this.ca);this.remove()},draw:function(a){a.fillStyle="yellow";
a.fillRect(-this.boundingWidthLeft,-this.boundingHeightTop,this.boundingWidthLeft+this.boundingWidthRight,this.boundingHeightTop+this.boundingHeightBottom)}});P.hb=tm.createClass({superClass:P,fa:k,init:function(a,d){this.superInit(a,d,"kenzaki");this.fa=b("tex_stage1",128,128).setFrameIndex(4)},Wa:function(){this.on("enterframe",function(a){0===a.app.frame%30?this.fa.bc():5===a.app.frame%30&&this.fa.ac()})},draw:function(a){this.fa.draw(a)},Aa:function(){B.sb(this.x,this.y,this.ca);this.remove()}});
P.xa=tm.createClass({superClass:P,init:function(a,d){this.superInit(a,d,"hino");this.fa=b("hino",64,32).setFrameIndex(0);this.boundingWidth=64;this.boundingHeightBottom=0;this.boundingHeightTop=32;this.fa.setScale(1,3);this.zf=0},update:function(a){0==this.zf&&this.zf++;P.prototype.update.call(this,a)},draw:function(a){this.fa.draw(a)},Va:function(){return 0==this.zf?l:P.prototype.Va.call(this)}});P.Ng=tm.createClass({superClass:P,init:function(a,d){this.superInit(a,d,"hoshizora_y");this.fa=b("hoshizora_y",
256,128).setFrameIndex(0);this.boundingWidth=256;this.boundingHeightBottom=16;this.boundingHeightTop=64},update:function(a){this.Va()||(0>this.x&&this.fa.setFrameIndex(0),480<this.x&&this.fa.setFrameIndex(1));P.prototype.update.call(this,a)},draw:function(a){this.fa.draw(a)},Aa:function(){this.Uc()},Va:function(){return 0<=this.x+this.width/2||480>this.x-this.width/2||0<=this.y+this.height/2||640>this.y-this.height/2}});P.ie=tm.createClass({superClass:P,init:function(a,d){this.superInit(a,d,"hoshizora_t");
this.fa=b("hoshizora_t",64,128).setFrameIndex(0);this.boundingWidth=128;this.boundingHeightBottom=16;this.boundingHeightTop=32},update:function(a){P.prototype.update.call(this,a)},draw:function(a){this.fa.draw(a)},Aa:function(){this.Uc()},Va:function(){return 0<=this.x+this.width/2||480>this.x-this.width/2||0<=this.y+this.height/2||640>this.y-this.height/2}});P.ve=tm.createClass({superClass:P,init:function(a,b){this.superInit(a,b,"yotsuba")},draw:function(a){a.fillStyle="yellow";a.fillRect(-this.boundingWidthLeft,
-this.boundingHeightTop,this.boundingWidthLeft+this.boundingWidthRight,this.boundingHeightTop+this.boundingHeightBottom)},Aa:function(){B.sb(this.x,this.y,this.ca);oa(this.x,this.y).addChildTo(this.parent);this.remove()},tf:function(){P.prototype.tf.call(this);return this}});P.bh=tm.createClass({superClass:P,init:function(a,b){this.superInit(a,b,"yotsubaLeaf")},draw:function(a){a.fillStyle="yellow";a.fillRect(-this.boundingWidthLeft,-this.boundingHeightTop,this.boundingWidthLeft+this.boundingWidthRight,
this.boundingHeightTop+this.boundingHeightBottom)},Aa:function(){B.sb(this.x,this.y,this.ca);this.remove()}});P.dd=tm.createClass({superClass:P,init:function(a,b){this.superInit(a,b,"erika")},Wa:n(),draw:function(a){a.fillStyle="yellow";a.fillRect(-this.boundingWidthLeft,-this.boundingHeightTop,this.boundingWidthLeft+this.boundingWidthRight,this.boundingHeightTop+this.boundingHeightBottom)},Aa:function(){B.sb(this.x,this.y,this.ca);na(this.x,this.y,this.da).addChildTo(this.parent);this.remove()}});
P.Be=tm.createClass({superClass:P,fa:k,init:function(a,d){this.superInit(a,d,"yukishiro");this.fa=b("tex_stage1",256,128).setFrameIndex(3);this.setScale(1.5)},Wa:function(){this.on("enterframe",function(a){0===a.app.frame%30?this.fa.bc():5===a.app.frame%30&&this.fa.ac()})},Aa:function(){this.Uc()},draw:function(a){this.fa.draw(a)}});P.Fe=tm.createClass({superClass:Ia,fa:k,init:function(a,d){this.superInit(a,d,"misumi");this.fa=b("tex_stage1",256,128).setFrameIndex(4);this.setScale(1.5)},Wa:function(){this.on("enterframe",
function(a){0===a.app.frame%30?this.fa.bc():5===a.app.frame%30&&this.fa.ac()})},draw:function(a){this.fa.draw(a)},Aa:function(){this.jg()}});P.Ee=tm.createClass({superClass:P,init:function(a,b){this.superInit(a,b,"mishou")},Wa:n(),Aa:function(){this.Uc()},draw:function(a){a.fillStyle="yellow";a.fillRect(-this.boundingWidthLeft,-this.boundingHeightTop,this.boundingWidthLeft+this.boundingWidthRight,this.boundingHeightTop+this.boundingHeightBottom)}});P.fi=tm.createClass({superClass:Ia,init:function(a,
b){this.superInit(a,b,"hyuga")},Wa:n(),Aa:function(){this.jg()},draw:function(a){a.fillStyle="yellow";a.fillRect(-this.boundingWidthLeft,-this.boundingHeightTop,this.boundingWidthLeft+this.boundingWidthRight,this.boundingHeightTop+this.boundingHeightBottom)}});var b=tm.createClass({superClass:tm.display.Sprite,If:k,init:function(a,b,f){this.superInit(a,b,f);"string"===typeof a&&(this.If=a)},draw:function(a){var b=this.srcRect;a.context.drawImage(this._image.element,b.x,b.y,b.width,b.height,-this.width*
this.origin.x,-this.height*this.origin.y,this.width,this.height)},bc:function(){var a=this.srcRect.x,b=this.srcRect.y,f=this.srcRect.width,g=this.srcRect.height;this.image=this.If+"Red";this.srcRect.x=a;this.srcRect.y=b;this.srcRect.width=f;this.srcRect.height=g},ac:function(){var a=this.srcRect.x,b=this.srcRect.y,f=this.srcRect.width,g=this.srcRect.height;this.image=this.If;this.srcRect.x=a;this.srcRect.y=b;this.srcRect.width=f;this.srcRect.height=g}})})();(function(){S=tm.createClass({setup:function(a){a.on("destroy",function(){S.se(this)})}});S.Da=function(a,b){var g=z[b].Wd();a.on("enterframe",g);a.on("completeattack",function(){g.stop=j})};S.se=function(a){if(a=[].concat(a._listeners.enterframe))for(var b=0,g=a.length;b<g;b++)a[b]&&a[b].hf&&(a[b].stop=j)};S.ha=tm.createClass({superClass:S,pattern:k,init:function(a,b){this.superInit();this.pattern=a;this.Aj=b},setup:function(a){S.prototype.setup.call(this,a);var b=this.pattern,g=this.Aj;a.on("launch",
function(){var a=w.randf(640*(g-0.1),640*(g+0.1));this.tweener.clear().wait(w.rand(10,500)).move(this.x,a,5*a,"easeOutQuad").call(function(){S.Da(this,b)}.bind(this))});a.on("completeattack",function(){this.tweener.clear().wait(1E3).moveBy(0,-640,2E3,"easeInQuad").call(function(){this.remove()}.bind(this))})}});S.Sb=S.ha("basic0-0",0.2);S.Qa=S.ha("basic0-0",0.4);S.Nc=S.ha("basic0-0",0.6);S.Pa=S.ha("basic1-2",0.2);S.Rb=S.ha("basic1-2",0.4);S.Mc=S.ha("basic1-2",0.6);S.qa=tm.createClass({superClass:S,
me:k,init:function(a){this.superInit();this.me=a},setup:function(a){S.prototype.setup.call(this,a);a.angle=0.5*Math.PI;a.me=this.me;a.tweener.wait(w.rand(0,1E3)).call(function(){this.speed=6;S.Da(this,this.me);this.on("enterframe",function(){this.y<this.da.y&&this.Oa&&(this.angle+=Math.atan2(this.da.y-this.y,this.da.x-this.x)<this.angle?-0.02:0.02,this.angle=T(this.angle,0.5,Math.PI-0.5));this.x+=Math.cos(this.angle)*this.speed;this.y+=Math.sin(this.angle)*this.speed;!this.Va()&&this.Oa&&this.remove();
if(22500>Ka(this,this.da)||this.y>this.da.y+150)this.kb=l})}.bind(a))}});S.Ra=S.qa("basic1-0");var b=tm.createClass({superClass:S,init:function(a,b,g){this.superInit();this.Wi=a;this.Vi=b;this.Pc=g},setup:function(a){S.prototype.setup.call(this,a);a.speed=this.Wi;a.yc=this.Vi;this.Pc&&(a.Pc=[].concat(this.Pc));a.Kb=0;a.on("enter",function(){S.Da(this,"basic2-0")});a.on("enterframe",function(){this.x+=Math.cos(this.yc)*this.speed;this.y+=Math.sin(this.yc)*this.speed;this.Oa&&!this.Va()&&this.remove();
for(this.Kb=Math.atan2(this.da.y-this.y,this.da.x-this.x);0>this.Kb;)this.Kb+=2*Math.PI;for(;2*Math.PI<=this.Kb;)this.Kb-=2*Math.PI;this.kb=this.y<this.da.y&&4E4<Ka(this,this.da);if(this.Pc)for(var a=0;a<this.Pc.length;a++){var b=this.Pc[a];b.frame===this.frame&&this.tweener.to({yc:b.dir!==i?b.dir:this.yc,speed:b.speed!==i?b.speed:this.speed},500)}})}});S.Hb=b(1,0.25*Math.PI);S.Gj=b(1,-1.75*Math.PI);S.ed=b(1,Math.PI,[{frame:200,dir:1.5*Math.PI,speed:1}]);S.la=b(1.6,0.5*Math.PI);S.Ib=b(1.6,-0.5*Math.PI);
S.jh=tm.createClass({superClass:S,ya:k,init:function(a){this.superInit();this.ya=a},setup:function(a){S.Da(a,this.ya);a.tweener.clear().to({x:240},8E3,"easeInOutQuad")}});S.Of=S.jh("bukky-4-0");b=tm.createClass({superClass:S,ya:k,ng:l,init:function(a,b){this.superInit();this.ya=a;this.ng=!!b},setup:function(a){S.prototype.setup.call(this,a);a.speed=1;a.dir=Math.PI;a.ya=this.ya;a.on("enter",function(){S.Da(this,this.ya)});a.on("enterframe",function(){this.Oa&&!this.Va()&&this.remove()});if(!this.ng)a.on("enterframe",
function(){this.kb=this.y<this.da.y&&4E4<Ka(this,this.da)})}});S.pb=b("basic3-0",l);S.qb=b("basic3-1",l);S.Gb=b("cannon2-0",j);S.xe=b("cannon2-3",j);S.Dd=b("cannon3-0",j);S.ye=b("cannon5-0",j);b=tm.createClass({superClass:S,velocityY:0,ya:k,init:function(a,b){this.superInit();this.velocityY=a;this.ya=b},setup:function(a){S.prototype.setup.call(this,a);a.velocityY=this.velocityY;a.ka=[this.ya];a.tweener.clear().moveBy(0,320,800,"easeOutQuad").call(function(){S.Da(this,this.ka[0])}.bind(a));a.on("enterframe",
function(){this.y+=this.velocityY;384<this.y&&S.se(this);this.Oa&&!this.Va()&&this.remove();this.kb=this.y<this.da.y})}});S.tc=b(0.5,"kurokawa-1");S.Sh=b(0.5,"kurokawa-4");S.vc=tm.createClass({superClass:S,delay:0,init:function(a){this.superInit();this.delay=a},setup:function(a){S.prototype.setup.call(this,a);a.tweener.wait(this.delay).call(function(){S.Da(this,"yuri-4");this.timeline.by({x:-480},2E3,0).by({y:-192},2E3,0,"easeInOutQuad")}.bind(a)).wait(2500).by({y:640},4E3,"easeInQuad").call(function(){this.remove()}.bind(a))}});
S.uc=tm.createClass({superClass:S,delay:0,init:function(a){this.superInit();this.delay=a},setup:function(a){S.prototype.setup.call(this,a);a.tweener.wait(this.delay).call(function(){S.Da(this,"yuri-4");this.timeline.by({x:480},2E3,0).by({y:-192},2E3,0,"easeInOutQuad")}.bind(a)).wait(2500).by({y:640},4E3,"easeInQuad").call(function(){this.remove()}.bind(a))}});var a=tm.createClass({superClass:S,velocityY:0,ya:k,init:function(a,b){this.superInit();this.velocityY=a;this.ya=b},setup:function(a){S.prototype.setup.call(this,
a);a.velocityY=this.velocityY;a.ka=[this.ya];a.tweener.clear().call(function(){S.Da(this,this.ka[0])}.bind(a));a.on("enterframe",function(){this.y+=this.velocityY;this.Oa&&!this.Va()&&this.remove();this.kb=this.y<this.da.y})}});S.xa=a(0.5,"akane");a=tm.createClass({superClass:S,velocityX:0,ya:k,init:function(a,b){this.superInit();this.velocityX=a;this.ya=b},setup:function(a){S.prototype.setup.call(this,a);a.velocityX=this.velocityX;a.ka=[this.ya];a.tweener.clear().call(function(){S.Da(this,this.ka[0])}.bind(a));
a.on("enterframe",function(){this.x+=this.velocityX;this.Oa&&!this.Va()&&this.remove();this.kb=this.y<this.da.y})}});S.bj=a(1,"miyuki_y");S.cj=a(-1,"miyuki_y");tm.createClass({superClass:S,velocityX:0,ya:k,init:function(a,b){this.superInit();this.velocityX=a;this.ya=b},setup:function(a){S.prototype.setup.call(this,a);a.velocityX=this.velocityX;a.ka=[this.ya];a.tweener.clear().call(function(){S.Da(this,this.ka[0])}.bind(a));a.on("enterframe",function(){this.x+=this.velocityX;this.Oa&&!this.Va()&&this.remove();
this.kb=this.y<this.da.y})}});S.aj=a(0.5,"miyuki_t");S.aj=a(-0.5,"miyuki_t");a=tm.createClass({superClass:S,velocityX:0,ya:k,init:function(){this.superInit();this.ya="alice"},setup:function(a){S.prototype.setup.call(this,a);a.velocityY=0.5;a.ka=[this.ya];a.tweener.clear().call(function(){S.Da(this,this.ka[0])}.bind(a));a.on("enterframe",function(){this.y+=this.velocityY;this.Oa&&!this.Va()&&this.remove();this.kb=this.y<this.da.y})}});S.ve=a();tm.createClass({superClass:S,ya:k,init:function(){this.superInit();
this.ya="aliceLeaf"},setup:function(a){S.prototype.setup.call(this,a);a.ka=[this.ya];a.tweener.clear().call(function(){S.Da(this,this.ka[0])}.bind(a));a.on("enterframe",function(){this.Oa&&!this.Va()&&this.remove();this.kb=this.y<this.da.y})}});S.bh=a();S.Vf=b(0.3,"komachi-1");S.Id=b(0.5,"komachi-2");S.Wf=b(0.5,"komachi-4");S.dd=tm.createClass({superClass:S,init:function(){this.superInit()},setup:function(a){S.Da(a,"basic3-0");a.on("enterframe",function(){this.y+=0.8;this.kb=this.Oa})}});S.dd=S.dd();
b=tm.createClass({superClass:S,ka:k,init:function(a){this.superInit();this.ka=a},setup:function(a){S.prototype.setup.call(this,a);a.ka=[].concat(this.ka);a.cd=l;a.Cc=l;a.tweener.clear().move(240,192,1200,"easeOutQuad").call(function(){this.cd=j;this.dispatchEvent(tm.event.Event("completeattack"));var a=function(){var b=2*w.random()*Math.PI,d=w.randf(48,144);this.tweener.move(240+Math.cos(b)*d,192+0.5*Math.sin(b)*d,3E3,"easeInOutQuad").call(a)}.bind(this);a()}.bind(a));a.on("enterframe",function(){if(!(this.cd===
l||0>=this.pa)&&1500<this.frame&&this.Cc===l)this.Cc=j,this.tweener.clear().wait(500).move(this.x,-100,1200,"easeInQuad").call(function(){this.remove()}.bind(this))});a.on("completeattack",function(){if(!(0>=this.pa)&&!this.Cc){var a=this.ka.shift();S.Da(this,a);this.ka.push(a)}})}});S.Be=b(["honoka-1"]);S.Fe=tm.createClass({superClass:S,ka:k,init:function(){this.superInit();this.ka=["nagisa-1-1","nagisa-1-2","nagisa-1-3"]},setup:function(a){S.prototype.setup.call(this,a);a.ka=[].concat(this.ka);
a.cd=l;a.Cc=l;a.tweener.clear().move(240,128,1200,"easeOutQuad").call(function(){this.cd=j;this.dispatchEvent(tm.event.Event("completeattack"));var a=function(){var b=2*w.random()*Math.PI,d=w.randf(48,144);this.tweener.move(240+Math.cos(b)*d,128+0.3*Math.sin(b)*d,3E3,"easeInOutQuad").call(a)}.bind(this);a()}.bind(a));a.on("completeattack",function(){if(!(0>=this.pa)&&!this.Cc){var a=this.ka.shift();S.Da(this,a);this.ka.push(a)}})}});S.Th=S.Fe();S.Ge=tm.createClass({superClass:S,ka:k,init:function(){this.superInit();
this.ka=["nagisa-2-1","nagisa-2-2","nagisa-2-3"]},setup:function(a){S.prototype.setup.call(this,a);a.ka=[].concat(this.ka);a.tweener.clear().wait(800).call(function(){this.dispatchEvent(tm.event.Event("completeattack"));var a=function(){var b=2*w.random()*Math.PI,d=w.randf(48,144);this.tweener.move(240+Math.cos(b)*d,128+0.3*Math.sin(b)*d,3E3,"easeInOutQuad").call(a)}.bind(this);a()}.bind(a));a.on("completeattack",function(){if(!(0>=this.pa)){var a=this.ka.shift();S.Da(this,a);this.ka.push(a)}})}});
S.Ge=S.Ge();S.He=tm.createClass({superClass:S,init:function(){this.superInit()},setup:function(a){S.prototype.setup.call(this,a);a.tweener.clear().wait(800).call(function(){this.dispatchEvent(tm.event.Event("completeattack"));this.tweener.clear().move(240,128,3E3,"easeInOutQuad").move(240,448,2E4,"easeInOutQuad")}.bind(a));a.on("completeattack",function(){0>=this.pa||S.Da(this,"nagisa-3-1")})}});S.He=S.He();S.Ee=b(["mai-1","mai-2"]);S.Ke=tm.createClass({superClass:S,ka:k,init:function(){this.superInit();
this.ka=["saki-1-1","saki-1-2","saki-1-3"]},setup:function(a){S.prototype.setup.call(this,a);a.ka=[].concat(this.ka);a.cd=l;a.Cc=l;a.tweener.clear().move(240,128,1200,"easeOutQuad").call(function(){this.cd=j;this.dispatchEvent(tm.event.Event("completeattack"));var a=function(){var b=2*w.random()*Math.PI,d=w.randf(48,144);this.tweener.move(240+Math.cos(b)*d,128+0.3*Math.sin(b)*d,3E3,"easeInOutQuad").call(a)}.bind(this);a()}.bind(a));a.on("completeattack",function(){if(!(0>=this.pa)&&!this.Cc){var a=
this.ka.shift();S.Da(this,a);this.ka.push(a)}})}});S.Ke=S.Ke();S.Le=tm.createClass({superClass:S,ka:k,init:function(){this.superInit();this.ka=["saki-2-1","saki-2-2","saki-2-3"]},setup:function(a){S.prototype.setup.call(this,a);a.ka=[].concat(this.ka);a.tweener.clear().wait(800).call(function(){this.dispatchEvent(tm.event.Event("completeattack"));var a=function(){var b=2*w.random()*Math.PI,d=w.randf(48,144);this.tweener.move(240+Math.cos(b)*d,128+0.3*Math.sin(b)*d,3E3,"easeInOutQuad").call(a)}.bind(this);
a()}.bind(a));a.on("completeattack",function(){if(!(0>=this.pa)){var a=this.ka.shift();S.Da(this,a);this.ka.push(a)}})}});S.Le=S.Le();S.Me=tm.createClass({superClass:S,ka:k,init:function(){this.superInit();this.ka=["saki-3-1","saki-3-2"]},setup:function(a){S.prototype.setup.call(this,a);a.ka=[].concat(this.ka);a.tweener.clear().wait(800).call(function(){this.dispatchEvent(tm.event.Event("completeattack"));var a=function(){var b=2*w.random()*Math.PI,d=w.randf(48,144);this.tweener.move(240+Math.cos(b)*
d,128+0.3*Math.sin(b)*d,3E3,"easeInOutQuad").call(a)}.bind(this);a()}.bind(a));a.on("completeattack",function(){if(!(0>=this.pa)){var a=this.ka.shift();S.Da(this,a);this.ka.push(a)}})}});S.Me=S.Me()})();var Z=P,$=S;
Aa={"heri1-left":[{aa:Z.qa,ba:$.Sb,x:48,y:-100},{aa:Z.qa,ba:$.Qa,x:96,y:-100},{aa:Z.qa,ba:$.Sb,x:144,y:-100},{aa:Z.qa,ba:$.Qa,x:192,y:-100},{aa:Z.qa,ba:$.Sb,x:240,y:-100}],"heri1-center":[{aa:Z.qa,ba:$.Sb,x:144,y:-100},{aa:Z.qa,ba:$.Qa,x:192,y:-100},{aa:Z.qa,ba:$.Sb,x:240,y:-100},{aa:Z.qa,ba:$.Qa,x:288,y:-100},{aa:Z.qa,ba:$.Sb,x:336,y:-100}],"heri1-right":[{aa:Z.qa,ba:$.Sb,x:240,y:-100},{aa:Z.qa,ba:$.Qa,x:288,y:-100},{aa:Z.qa,ba:$.Sb,x:336,y:-100},{aa:Z.qa,ba:$.Qa,x:384,y:-100},{aa:Z.qa,ba:$.Sb,x:432,
y:-100}],"heri1-left2":[{aa:Z.qa,ba:$.Qa,x:48,y:-100},{aa:Z.qa,ba:$.Nc,x:96,y:-100},{aa:Z.qa,ba:$.Qa,x:144,y:-100},{aa:Z.qa,ba:$.Nc,x:192,y:-100},{aa:Z.qa,ba:$.Qa,x:240,y:-100}],"heri1-center2":[{aa:Z.qa,ba:$.Qa,x:144,y:-100},{aa:Z.qa,ba:$.Nc,x:192,y:-100},{aa:Z.qa,ba:$.Qa,x:240,y:-100},{aa:Z.qa,ba:$.Nc,x:288,y:-100},{aa:Z.qa,ba:$.Qa,x:336,y:-100}],"heri1-right2":[{aa:Z.qa,ba:$.Qa,x:240,y:-100},{aa:Z.qa,ba:$.Nc,x:288,y:-100},{aa:Z.qa,ba:$.Qa,x:336,y:-100},{aa:Z.qa,ba:$.Nc,x:384,y:-100},{aa:Z.qa,ba:$.Qa,
x:432,y:-100}],"heri2-left":[{aa:Z.ha,ba:$.Ra,x:48,y:-100},{aa:Z.ha,ba:$.Ra,x:96,y:-100},{aa:Z.ha,ba:$.Ra,x:144,y:-100},{aa:Z.ha,ba:$.Ra,x:192,y:-100},{aa:Z.ha,ba:$.Ra,x:240,y:-100}],"heri2-center":[{aa:Z.ha,ba:$.Ra,x:144,y:-100},{aa:Z.ha,ba:$.Ra,x:192,y:-100},{aa:Z.ha,ba:$.Ra,x:240,y:-100},{aa:Z.ha,ba:$.Ra,x:288,y:-100},{aa:Z.ha,ba:$.Ra,x:336,y:-100}],"heri2-right":[{aa:Z.ha,ba:$.Ra,x:240,y:-100},{aa:Z.ha,ba:$.Ra,x:288,y:-100},{aa:Z.ha,ba:$.Ra,x:336,y:-100},{aa:Z.ha,ba:$.Ra,x:384,y:-100},{aa:Z.ha,
ba:$.Ra,x:432,y:-100}],"heri1-4-left":[{aa:Z.ha,ba:$.Pa,x:48,y:-100},{aa:Z.ha,ba:$.Pa,x:96,y:-100},{aa:Z.ha,ba:$.Pa,x:144,y:-100},{aa:Z.ha,ba:$.Pa,x:192,y:-100},{aa:Z.ha,ba:$.Pa,x:240,y:-100}],"heri1-4-center":[{aa:Z.ha,ba:$.Pa,x:144,y:-100},{aa:Z.ha,ba:$.Pa,x:192,y:-100},{aa:Z.ha,ba:$.Pa,x:240,y:-100},{aa:Z.ha,ba:$.Pa,x:288,y:-100},{aa:Z.ha,ba:$.Pa,x:336,y:-100}],"heri1-4-right":[{aa:Z.ha,ba:$.Pa,x:240,y:-100},{aa:Z.ha,ba:$.Pa,x:288,y:-100},{aa:Z.ha,ba:$.Pa,x:336,y:-100},{aa:Z.ha,ba:$.Pa,x:384,y:-100},
{aa:Z.ha,ba:$.Pa,x:432,y:-100}],"heri1-4-left2":[{aa:Z.ha,ba:$.Rb,x:48,y:-100},{aa:Z.ha,ba:$.Mc,x:96,y:-100},{aa:Z.ha,ba:$.Rb,x:144,y:-100},{aa:Z.ha,ba:$.Mc,x:192,y:-100},{aa:Z.ha,ba:$.Rb,x:240,y:-100}],"heri1-4-center2":[{aa:Z.ha,ba:$.Rb,x:144,y:-100},{aa:Z.ha,ba:$.Mc,x:192,y:-100},{aa:Z.ha,ba:$.Rb,x:240,y:-100},{aa:Z.ha,ba:$.Mc,x:288,y:-100},{aa:Z.ha,ba:$.Rb,x:336,y:-100}],"heri1-4-right2":[{aa:Z.ha,ba:$.Rb,x:240,y:-100},{aa:Z.ha,ba:$.Mc,x:288,y:-100},{aa:Z.ha,ba:$.Rb,x:336,y:-100},{aa:Z.ha,ba:$.Mc,
x:384,y:-100},{aa:Z.ha,ba:$.Rb,x:432,y:-100}],"tankRD-left":[{aa:Z.ea,ba:$.Hb,x:78,y:-50},{aa:Z.ea,ba:$.Hb,x:28,y:-100},{aa:Z.ea,ba:$.Hb,x:-22,y:-150},{aa:Z.ea,ba:$.Hb,x:-72,y:-200},{aa:Z.ea,ba:$.Hb,x:-122,y:-250}],"tankRD-center":[{aa:Z.ea,ba:$.Hb,x:222,y:-50},{aa:Z.ea,ba:$.Hb,x:172,y:-100},{aa:Z.ea,ba:$.Hb,x:122,y:-150},{aa:Z.ea,ba:$.Hb,x:72,y:-200},{aa:Z.ea,ba:$.Hb,x:22,y:-250}],"tankL-top":[{aa:Z.ea,ba:$.ed,x:550,y:64},{aa:Z.ea,ba:$.ed,x:620,y:64},{aa:Z.ea,ba:$.ed,x:690,y:64},{aa:Z.ea,ba:$.ed,
x:760,y:64},{aa:Z.ea,ba:$.ed,x:830,y:64}],"tank5-left":[{aa:Z.ea,ba:$.la,x:48,y:-70},{aa:Z.ea,ba:$.la,x:48,y:-140},{aa:Z.ea,ba:$.la,x:48,y:-210},{aa:Z.ea,ba:$.la,x:48,y:-280},{aa:Z.ea,ba:$.la,x:48,y:-350}],"tank5-center":[{aa:Z.ea,ba:$.la,x:240,y:-70},{aa:Z.ea,ba:$.la,x:240,y:-140},{aa:Z.ea,ba:$.la,x:240,y:-210},{aa:Z.ea,ba:$.la,x:240,y:-280},{aa:Z.ea,ba:$.la,x:240,y:-350}],"tank15-top":[{aa:Z.ea,ba:$.la,x:48,y:-70},{aa:Z.ea,ba:$.la,x:48,y:-140},{aa:Z.ea,ba:$.la,x:48,y:-210},{aa:Z.ea,ba:$.la,x:48,
y:-280},{aa:Z.ea,ba:$.la,x:48,y:-350},{aa:Z.ea,ba:$.la,x:240,y:-70},{aa:Z.ea,ba:$.la,x:240,y:-140},{aa:Z.ea,ba:$.la,x:240,y:-210},{aa:Z.ea,ba:$.la,x:240,y:-280},{aa:Z.ea,ba:$.la,x:240,y:-350},{aa:Z.ea,ba:$.la,x:432,y:-70},{aa:Z.ea,ba:$.la,x:432,y:-140},{aa:Z.ea,ba:$.la,x:432,y:-210},{aa:Z.ea,ba:$.la,x:432,y:-280},{aa:Z.ea,ba:$.la,x:432,y:-350}],"tank25-top":[{aa:Z.ea,ba:$.la,x:48,y:-70},{aa:Z.ea,ba:$.la,x:48,y:-140},{aa:Z.ea,ba:$.la,x:48,y:-210},{aa:Z.ea,ba:$.la,x:48,y:-280},{aa:Z.ea,ba:$.la,x:48,
y:-350},{aa:Z.ea,ba:$.la,x:240,y:-70},{aa:Z.ea,ba:$.la,x:240,y:-140},{aa:Z.ea,ba:$.la,x:240,y:-210},{aa:Z.ea,ba:$.la,x:240,y:-280},{aa:Z.ea,ba:$.la,x:240,y:-350},{aa:Z.ea,ba:$.la,x:432,y:-70},{aa:Z.ea,ba:$.la,x:432,y:-140},{aa:Z.ea,ba:$.la,x:432,y:-210},{aa:Z.ea,ba:$.la,x:432,y:-280},{aa:Z.ea,ba:$.la,x:432,y:-350},{aa:Z.ea,ba:$.Ib,x:144,y:710},{aa:Z.ea,ba:$.Ib,x:144,y:780},{aa:Z.ea,ba:$.Ib,x:144,y:850},{aa:Z.ea,ba:$.Ib,x:144,y:920},{aa:Z.ea,ba:$.Ib,x:144,y:990},{aa:Z.ea,ba:$.Ib,x:336,y:710},{aa:Z.ea,
ba:$.Ib,x:336,y:780},{aa:Z.ea,ba:$.Ib,x:336,y:850},{aa:Z.ea,ba:$.Ib,x:336,y:920},{aa:Z.ea,ba:$.Ib,x:336,y:990}],"bukky-4-r":[{aa:Z.Nf,ba:$.Of,x:480,y:-50}],"bukky-4-l":[{aa:Z.Nf,ba:$.Of,x:0,y:-50}],"cannon-0":[{aa:Z.za,ba:$.pb,x:48,y:-100}],"cannon-1":[{aa:Z.za,ba:$.pb,x:96,y:-100}],"cannon-2":[{aa:Z.za,ba:$.pb,x:144,y:-100}],"cannon-3":[{aa:Z.za,ba:$.pb,x:192,y:-100}],"cannon-4":[{aa:Z.za,ba:$.pb,x:240,y:-100}],"cannon-5":[{aa:Z.za,ba:$.pb,x:288,y:-100}],"cannon-6":[{aa:Z.za,ba:$.pb,x:336,y:-100}],
"cannon-7":[{aa:Z.za,ba:$.pb,x:384,y:-100}],"cannon-8":[{aa:Z.za,ba:$.pb,x:432,y:-100}],"cannon-R0":[{aa:Z.za,ba:$.pb,x:550,y:128}],"cannon-R1":[{aa:Z.za,ba:$.pb,x:550,y:192}],"cannon-R2":[{aa:Z.za,ba:$.pb,x:550,y:256}],"yayoi-0":[{aa:Z.za,ba:$.qb,x:48,y:-100}],"yayoi-1":[{aa:Z.za,ba:$.qb,x:96,y:-100}],"yayoi-2":[{aa:Z.za,ba:$.qb,x:144,y:-100}],"yayoi-3":[{aa:Z.za,ba:$.qb,x:192,y:-100}],"yayoi-4":[{aa:Z.za,ba:$.qb,x:240,y:-100}],"yayoi-5":[{aa:Z.za,ba:$.qb,x:288,y:-100}],"yayoi-6":[{aa:Z.za,ba:$.qb,
x:336,y:-100}],"yayoi-7":[{aa:Z.za,ba:$.qb,x:384,y:-100}],"yayoi-8":[{aa:Z.za,ba:$.qb,x:432,y:-100}],"yayoi-R0":[{aa:Z.za,ba:$.qb,x:550,y:128}],"yayoi-R1":[{aa:Z.za,ba:$.qb,x:550,y:192}],"yayoi-R2":[{aa:Z.za,ba:$.qb,x:550,y:256}],"tsubomi-0":[{aa:Z.Ld,ba:$.Dd,x:96,y:-100}],"tsubomi-1":[{aa:Z.Ld,ba:$.Dd,x:240,y:-100}],"tsubomi-2":[{aa:Z.Ld,ba:$.Dd,x:384,y:-100}],"tsubomi-R0":[{aa:Z.Ld,ba:$.Dd,x:580,y:128}],"itsuki-0":[{aa:Z.De,ba:$.ye,x:96,y:-100}],"itsuki-1":[{aa:Z.De,ba:$.ye,x:240,y:-100}],"itsuki-2":[{aa:Z.De,
ba:$.ye,x:384,y:-100}],"makoto-0":[{aa:Z.hb,ba:$.Gb,x:48,y:-100}],"makoto-1":[{aa:Z.hb,ba:$.Gb,x:96,y:-100}],"makoto-2":[{aa:Z.hb,ba:$.Gb,x:144,y:-100}],"makoto-3":[{aa:Z.hb,ba:$.Gb,x:192,y:-100}],"makoto-4":[{aa:Z.hb,ba:$.Gb,x:240,y:-100}],"makoto-5":[{aa:Z.hb,ba:$.Gb,x:288,y:-100}],"makoto-6":[{aa:Z.hb,ba:$.Gb,x:336,y:-100}],"makoto-7":[{aa:Z.hb,ba:$.Gb,x:384,y:-100}],"makoto-8":[{aa:Z.hb,ba:$.Gb,x:432,y:-100}],"makoto-R0":[{aa:Z.hb,ba:$.Gb,x:580,y:128}],"makoto-3-2":[{aa:Z.hb,ba:$.xe,x:96,y:-100}],
"makoto-3-5":[{aa:Z.hb,ba:$.xe,x:240,y:-100}],"makoto-3-8":[{aa:Z.hb,ba:$.xe,x:384,y:-100}],"fighter-m-0":[{aa:Z.ec,ba:$.tc,x:96,y:-192}],"fighter-m-1":[{aa:Z.ec,ba:$.tc,x:144,y:-192}],"fighter-m-2":[{aa:Z.ec,ba:$.tc,x:192,y:-192}],"fighter-m-3":[{aa:Z.ec,ba:$.tc,x:240,y:-192}],"fighter-m-4":[{aa:Z.ec,ba:$.tc,x:288,y:-192}],"fighter-m-5":[{aa:Z.ec,ba:$.tc,x:336,y:-192}],"fighter-m-6":[{aa:Z.ec,ba:$.tc,x:384,y:-192}],"fighter-m4-0":[{aa:Z.ec,ba:$.Sh,x:96,y:-192}],"tsukikage-r":[{aa:Z.$a,ba:$.vc(700),
x:624,y:256},{aa:Z.$a,ba:$.vc(600),x:720,y:256},{aa:Z.$a,ba:$.vc(500),x:576,y:320},{aa:Z.$a,ba:$.vc(400),x:672,y:320},{aa:Z.$a,ba:$.vc(300),x:768,y:320},{aa:Z.$a,ba:$.vc(200),x:624,y:384},{aa:Z.$a,ba:$.vc(100),x:720,y:384}],"tsukikage-l":[{aa:Z.$a,ba:$.uc(700),x:-144,y:384},{aa:Z.$a,ba:$.uc(600),x:-240,y:384},{aa:Z.$a,ba:$.uc(500),x:-96,y:320},{aa:Z.$a,ba:$.uc(400),x:-192,y:320},{aa:Z.$a,ba:$.uc(300),x:-288,y:320},{aa:Z.$a,ba:$.uc(200),x:-144,y:256},{aa:Z.$a,ba:$.uc(100),x:-240,y:256}],"komachi-0":[{aa:Z.fc,
ba:$.Vf,x:144,y:-192}],"komachi-1":[{aa:Z.fc,ba:$.Vf,x:336,y:-192}],"komachi2-0":[{aa:Z.fc,ba:$.Id,x:144,y:-192}],"komachi2-1":[{aa:Z.fc,ba:$.Id,x:336,y:-192}],"komachi3-0":[{aa:Z.fc,ba:$.Id,x:144,y:-192}],"komachi3-1":[{aa:Z.fc,ba:$.Id,x:336,y:-192}],"komachi4-0":[{aa:Z.fc,ba:$.Wf,x:144,y:-192}],"komachi4-1":[{aa:Z.fc,ba:$.Wf,x:336,y:-192}],"akane-1":[{aa:Z.xa,ba:$.xa,x:96,y:130},{aa:Z.xa,ba:$.xa,x:192,y:80},{aa:Z.xa,ba:$.xa,x:240,y:60},{aa:Z.xa,ba:$.xa,x:288,y:80},{aa:Z.xa,ba:$.xa,x:384,y:130}],
"akane-2":[{aa:Z.xa,ba:$.xa,x:288,y:120},{aa:Z.xa,ba:$.xa,x:288,y:80},{aa:Z.xa,ba:$.xa,x:384,y:160},{aa:Z.xa,ba:$.xa,x:384,y:40}],"akane-3":[{aa:Z.xa,ba:$.xa,x:96,y:120},{aa:Z.xa,ba:$.xa,x:96,y:80},{aa:Z.xa,ba:$.xa,x:144,y:160},{aa:Z.xa,ba:$.xa,x:144,y:40}],"hoshizora_y-1":[{aa:Z.Ng,ba:$.bj,x:-256,y:140}],"hoshizora_y-2":[{aa:Z.Ng,ba:$.cj,x:608,y:60}],"hoshizora_t-1":[{aa:Z.ie,ba:$.ie,x:-128,y:60}],"hoshizora_t-2":[{aa:Z.ie,ba:$.ie,x:608,y:60}],yotsuba:[{aa:Z.ve,ba:$.ve,x:240,y:-64}],erika:[{aa:Z.dd,
ba:$.dd,x:240,y:-100}],yukishiro:[{aa:Z.Be,ba:$.Be,x:240,y:-100}],misumi:[{aa:Z.Fe,ba:[$.Th,$.Ge,$.He],x:240,y:-100,Wb:j}],mai:[{aa:Z.Ee,ba:$.Ee,x:780,y:128}],hyuga:[{aa:Z.fi,ba:[$.Ke,$.Le,$.Me],x:240,y:-100,Wb:j}]};(function(){function b(a,b,d,f){return c.action([f(a),c.repeat(d+"-1",[f(c.speed(b,"sequence"))])])}function a(a,b,d,f,g,m,p){return c.action([c.fire(c.direction(b,"absolute"),f,g||E,m,p),c.repeat(a+"-1",[c.fire(c.direction("(("+d+")-("+b+"))/("+a+"-1)","sequence"),f,g||E,m,p)])])}function d(a,b,c,d,g){return function(m){return f(a,b,c,m,d,g,i,i)}}function f(a,b,d,f,g,m,p,r){return c.action([c.fire(c.direction(b),f,g||E,m,p,r),c.repeat(a+"+($ex*2)-1",[c.fire(c.direction("(("+d+")-("+b+"))/("+a+"+($ex*2)-1)",
"sequence"),f,g||E,m,p,r)])])}function g(a){return c.fire(c.direction(0),a||r,K)}function p(a){return c.fire(c.direction(0),a||r,E)}function t(a){return c.speed("$rank*2.0 + 2.00 + ("+(a===i?0:a)+"*0.1)")}function C(a){return c.speed("$rank*2.0 + 1.70 + ("+(a===i?0:a)+"*0.1)")}function G(a){return c.speed("$rank*2.0 + 1.40 + ("+(a===i?0:a)+"*0.1)")}function r(a){return c.speed("$rank*2.0 + 1.10 + ("+(a===i?0:a)+"*0.1)")}function s(a){return c.speed("$rank*2.0 + 0.80 + ("+(a===i?0:a)+"*0.1)")}function A(a){return c.speed("$rank*2.0 + 0.50 + ("+
(a===i?0:a)+"*0.1)")}function ga(a){return c.speed("$rank*2.0 + 0.20 + ("+(a===i?0:a)+"*0.1)")}function m(a){return c.wait(a+"*(1-$rank)*$hyperOff")}function Y(a){return c.oa(a,{visible:l})}function L(a){return c.oa(a,{frame:4,Ub:j})}function W(a){return c.oa(a,{frame:3})}function E(a){return c.oa(a,{frame:1})}function M(a){return c.oa(a,{frame:2})}function K(a){return c.oa(a,{frame:0})}function Q(a){return c.oa(a,{frame:3,Ub:j})}function X(a){return c.oa(a,{frame:1,Ub:j})}function R(a){return c.oa(a,
{frame:2,Ub:j})}function I(a){return c.oa(a,{frame:0,Ub:j})}z={};var c=q.va;z["basic0-0"]=new q.ia({top:c.action([p])});z["basic0-1"]=new q.ia({top:c.action([b(G,-0.01,8,d(3,-15,15))])});z["basic1-0"]=new q.ia({top:c.action([c.repeat(999,[m(40),p(r)])])});z["basic1-1"]=new q.ia({top:c.action([c.repeat(999,[m(20),p(r)])])});z["basic1-2"]=new q.ia({top:c.action([m("10+$rand*20"),f(3,-20,20,r)])});z["basic2-0"]=new q.ia({top:c.action([c.repeat(999,[m(50),p(r)])])});z["basic3-0"]=new q.ia({top:c.action([c.wait(20),
c.repeat(999,[m(100),b(r,0.1,3,g)])])});z["basic3-1"]=new q.ia({top:c.action([c.wait(20),c.repeat(999,[m(40),b(r,0.1,3,g)])])});z["bukky-4-0"]=new q.ia({top0:c.action([m(30),c.repeat(999,[c.fire(c.direction(-40),r,R),c.repeat(3,[c.fire(c.direction(20,"sequence"),r,R),c.fire(c.direction(20,"sequence"),r,R),c.fire(c.direction(20,"sequence"),r,R),c.fire(c.direction(20,"sequence"),r,R),c.fire(c.direction(-80,"sequence"),r,R),m(5)]),m(70)])]),top1:c.action([m(20),c.fire(c.direction(180,"absolute"),s,X),
c.repeat(999,[c.fire(c.direction(15,"sequence"),s,X),c.fire(c.direction(15,"sequence"),s,X),c.fire(c.direction(15,"sequence"),s,X),c.fire(c.direction(15,"sequence"),s,X),c.fire(c.direction(15,"sequence"),s,X),c.fire(c.direction(15,"sequence"),s,X),c.fire(c.direction(15,"sequence"),s,X),c.fire(c.direction(15,"sequence"),s,X),c.fire(c.direction(15,"sequence"),s,X),c.fire(c.direction(-90,"sequence"),s,X),m(5)])])});z["cannon2-0"]=new q.ia({top0:c.action([c.repeat(999,[m(20),a(4,"0-10+$loop.index*15",
"0+10+$loop.index*15",s),a(4,"90-10+$loop.index*15","90+10+$loop.index*15",s),a(4,"180-10+$loop.index*15","180+10+$loop.index*15",s),a(4,"270-10+$loop.index*15","270+10+$loop.index*15",s),m(20),a(3,"0-10+45+$loop.index*15","0+10+45+$loop.index*15",r),a(3,"90-10+45+$loop.index*15","90+10+45+$loop.index*15",r),a(3,"180-10+45+$loop.index*15","180+10+45+$loop.index*15",r),a(3,"270-10+45+$loop.index*15","270+10+45+$loop.index*15",r)])]),top1:c.action([c.repeat(999,[c.fire(c.direction("  0+$loop.index*10",
"absolute"),A,L),c.fire(c.direction(" 90+$loop.index*10","absolute"),A,L),c.fire(c.direction("180+$loop.index*10","absolute"),A,L),c.fire(c.direction("270+$loop.index*10","absolute"),A,L),c.fire(c.direction("  0-$loop.index*10","absolute"),A,L),c.fire(c.direction(" 90-$loop.index*10","absolute"),A,L),c.fire(c.direction("180-$loop.index*10","absolute"),A,L),c.fire(c.direction("270-$loop.index*10","absolute"),A,L),m(10)])]),top2:c.action([c.repeat(999,[m(43),f(30,0,348,r,K)])])});z["cannon2-3"]=new q.ia({top0:c.action([c.repeat(999,
[c.bb("d","$loop.index*5"),c.repeat(11,[c.fire(c.direction(30,"sequence"),c.speed(1),Y(c.Ga("ivs0","$d")))]),m(10),c.fire(c.direction(28,"sequence"),c.speed(1),Y(c.Ga("ivs0","$d")))])]),top1:c.action([c.repeat(999,[c.bb("d","($loop.index)*-5"),c.repeat(24,[c.fire(c.direction(14.4,"sequence"),c.speed(1),Y(c.Ga("ivs1","$d")))]),m(10),c.fire(c.direction(18.4,"sequence"),c.speed(1),Y(c.Ga("ivs1","$d")))])]),ivs0:c.action([c.wait(3),c.fire(c.direction("$1","relative"),c.vj,K),c.nb()]),ivs1:c.action([c.wait(6),
c.fire(c.direction("$1","relative"),c.vj,L),c.nb()])});z["cannon3-0"]=new q.ia({top0:c.action([c.repeat(999,[m(80),b(s,0.01,5,d(5,-30,30,K,c.offsetX(-60))),b(s,0.01,5,d(5,-30,30,K)),b(s,0.01,5,d(5,-30,30,K,c.offsetX(60)))])])});z["cannon4-0"]=new q.ia({top0:c.action([m(20),c.repeat(999,[c.fire(s,R),c.repeat(8,[m(10),c.bb("way","$loop.count+1"),c.fire(c.direction("-12/2 - 12*($way-2)","sequence"),s,R),c.repeat("$way-1",[c.fire(c.direction(12,"sequence"),s,R)])]),m(120)])])});z["cannon5-0"]=new q.ia({top0:c.action([c.repeat(999,
[c.fire(c.direction(-60),t,Y(c.Ga("b"))),c.repeat(11,[m(5),c.fire(c.direction(10,"sequence"),t,Y(c.Ga("b")))]),m(60)])]),b:c.action([c.wait(5),c.Td(c.speed(0),0),b(s,0.1,5,function(a){return c.fire(c.direction(0,"relative"),a,E)}),c.nb])});z["yuri-4"]=new q.ia({top:c.action([m(60),c.repeat(7,[a(7,120,240,A,K),m(8)])])});z["kurokawa-1"]=new q.ia({top0:c.action([c.repeat(999,[b(r,-0.01,4,function(a){return f(4,-45,45,a,M,c.offsetX(-45),c.ma(j))}),b(r,-0.01,4,function(a){return f(4,-45,45,a,M,c.offsetX(45),
c.ma(j))}),m(90)])]),top1:c.action([c.repeat(999,[c.fire(c.direction(0),r,Q,c.offsetX(-45),c.ma(j)),m(45),c.fire(c.direction(0),r,Q,c.offsetX(45),c.ma(j)),m(45)])])});z["kurokawa-4"]=new q.ia({top0:c.action([c.repeat(999,[b(r,-0.01,4,function(a){return f(4,-45,45,a,M,c.offsetX(-45),c.ma(j))}),b(r,-0.01,4,function(a){return f(4,-45,45,a,M,c.offsetX(45),c.ma(j))}),m(90)])]),top1:c.action([c.repeat(999,[c.fire(c.direction(0),r,Q,c.offsetX(-45),c.ma(j)),m(45),c.fire(c.direction(0),r,Q,c.offsetX(45),c.ma(j)),
m(45)])])});z["komachi-1"]=new q.ia({top0:c.action([c.repeat(20,[c.fire(c.direction(210,"absolute"),A(1),E,c.offsetX(-40)),c.fire(c.direction(120,"sequence"),A(1),E,c.offsetX(-40)),c.fire(c.direction(120,"sequence"),A(1),E,c.offsetX(-40)),c.repeat(57,[m(8),c.fire(c.direction(-720/57,"sequence"),A(1),E,c.offsetX(-40)),c.fire(c.direction(120,"sequence"),A(1),E,c.offsetX(-40)),c.fire(c.direction(120,"sequence"),A(1),E,c.offsetX(-40))])])]),top1:c.action([c.repeat(20,[c.fire(c.direction(-210,"absolute"),
A(1),E,c.offsetX(40)),c.fire(c.direction(120,"sequence"),A(1),E,c.offsetX(40)),c.fire(c.direction(120,"sequence"),A(1),E,c.offsetX(40)),c.repeat(57,[m(8),c.fire(c.direction(720/57,"sequence"),A(1),E,c.offsetX(40)),c.fire(c.direction(120,"sequence"),A(1),E,c.offsetX(40)),c.fire(c.direction(120,"sequence"),A(1),E,c.offsetX(40))])])]),top2:c.action([c.repeat(70,[c.fire(c.direction(0),r(0),I,c.offsetX(-110),c.ma(j)),c.repeat(6,[c.wait(1),c.fire(c.direction(0,"sequence"),r(0),I,c.offsetX(-110),c.ma(j))]),
m(10),c.fire(c.direction(0),r(0),I,c.offsetX(110),c.ma(j)),c.repeat(6,[c.wait(1),c.fire(c.direction(0,"sequence"),r(0),I,c.offsetX(110),c.ma(j))]),m(10)])])});z["komachi-2"]=new q.ia({top0:c.action([c.repeat(999,[b(r,-0.01,4,function(a){return c.action([f(4,-45,45,a,M,c.offsetX(-45),c.ma(j)),m(4)])}),b(r,-0.01,4,function(a){return c.action([m(4),f(4,-45,45,a,M,c.offsetX(45),c.ma(j))])}),m(90)])]),top1:c.action([c.repeat(999,[m(45),b(s,0.01,22,function(a){return c.action([c.repeat("1 + $rand*6",[c.fire(c.direction("-5+$rand*10"),
a,X)]),m(1)])}),m(180)])])});z["komachi-3"]=new q.ia({top0:c.action([c.repeat(999,[b(r,-0.01,4,function(a){return c.action([f(6,-60,60,a,M,c.offsetX(-45),c.ma(j)),m(4)])}),b(r,-0.01,4,function(a){return c.action([m(4),f(6,-60,60,a,M,c.offsetX(45),c.ma(j))])}),m(90)])]),top1:c.action([c.repeat(999,[m(45),b(s,0.01,22,function(a){return c.action([c.repeat("1 + $rand*6",[c.fire(c.direction("-5+$rand*10"),a,X)]),m(1)])}),m(180)])])});z["komachi-4"]=new q.ia({top0:c.action([c.repeat(999,[c.repeat(4,[c.fire(c.direction("220+-1+$rand*2",
"absolute"),r,W,c.offsetX(-45)),c.fire(c.direction("180+-1+$rand*2","absolute"),r,W,c.offsetX(-45)),c.fire(c.direction("180+-1+$rand*2","absolute"),r,W,c.offsetX(45)),c.fire(c.direction("140+-1+$rand*2","absolute"),r,W,c.offsetX(45)),m(4)]),m(60)])]),top1:c.action([c.repeat(70,[c.fire(c.direction(0),r(5),I,c.offsetX(-110),c.ma(j)),c.repeat(12,[c.wait(1),c.fire(c.direction(0,"sequence"),r(5),I,c.offsetX(-110),c.ma(j))]),m(30),c.fire(c.direction(0),r(5),I,c.offsetX(110),c.ma(j)),c.repeat(12,[c.wait(1),
c.fire(c.direction(0,"sequence"),r(5),I,c.offsetX(110),c.ma(j))]),m(30)])])});z.akane=new q.ia({top:c.action([c.wait("40"),c.repeat(999,[m(50),f(1,1,1,A,c.oa({frame:2}),c.offsetX(-16),c.offsetY(6),c.ma(j)),f(1,1,1,A,c.oa({frame:2}),c.offsetX(16),c.offsetY(6),c.ma(j))])])});z.miyuki_y=new q.ia({top:c.action([c.wait("40"),c.repeat(999,[m(30),f(3,-45,45,A,c.oa({frame:2}),c.offsetX(-64),c.offsetY(16),c.ma(j)),f(3,-45,45,A,c.oa({frame:2}),c.offsetX(0),c.offsetY(16),c.ma(j)),f(3,-45,45,A,c.oa({frame:2}),
c.offsetX(16),c.offsetY(16),c.ma(j)),f(3,-45,45,A,c.oa({frame:2}),c.offsetX(32),c.offsetY(16),c.ma(j)),b(A,0.001,5,function(a){return c.action([f(3,"-45","+45",a,R,c.offsetX(0),c.offsetY(0))])})])])});z.miyuki_t=new q.ia({top:c.action([c.wait("40"),c.repeat(999,[m(30),f(1,1,1,A,c.oa({frame:2}),c.offsetX(-16),c.offsetY(6),c.ma(j)),f(1,1,1,A,c.oa({frame:2}),c.offsetX(16),c.offsetY(6),c.ma(j))])])});z.alice=new q.ia({top0:c.action([c.repeat(999,[c.repeat(4,[c.fire(c.direction("220+-1+$rand*2","absolute"),
r,W,c.offsetX(-45)),c.fire(c.direction("180+-1+$rand*2","absolute"),r,W,c.offsetX(-45)),c.fire(c.direction("180+-1+$rand*2","absolute"),r,W,c.offsetX(45)),c.fire(c.direction("140+-1+$rand*2","absolute"),r,W,c.offsetX(45)),m(4)]),m(60)])]),top1:c.action([c.repeat(70,[c.fire(c.direction(0),r(5),I,c.offsetX(-110),c.ma(j)),c.repeat(12,[c.wait(1),c.fire(c.direction(0,"sequence"),r(5),I,c.offsetX(-110),c.ma(j))]),m(30),c.fire(c.direction(0),r(5),I,c.offsetX(110),c.ma(j)),c.repeat(12,[c.wait(1),c.fire(c.direction(0,
"sequence"),r(5),I,c.offsetX(110),c.ma(j))]),m(30)])])});z["honoka-1"]=new q.ia({top0:c.action([c.wait(60),c.repeat(10,[f(4,-40,40,s,L,c.offsetX(0),c.offsetY(30)),m(30),f(5,-40,40,A,L,c.offsetX(0),c.offsetY(30)),m(30)])]),top1:c.action([c.wait(60),c.repeat(5,[f(2,-2,2,s(0.6),E),f(3,-3,3,s(1),E),f(4,-4,4,s(1.4),E),f(5,-5,5,s(1.8),E),m(110)])]),top2:c.action([c.repeat(20,[a(12,-10,-170,A,I,c.offsetX(-110),c.offsetY(-70)),m(30)])]),top3:c.action([c.repeat(20,[a(12,10,170,A,I,c.offsetX(110),c.offsetY(-70)),
m(30)])])});z["nagisa-1-1"]=new q.ia({top0:c.action([m(90),c.repeat(3,[c.bb("way","5 + $loop.index*6"),b(s,0.01,"3 + $loop.index*4",function(a){return c.action([f("$way",-110,110,a,E,c.offsetX(-190),c.offsetY(-20)),f("$way",-110,110,a,E,c.offsetX(190),c.offsetY(-20)),c.wait(5)])}),m(60)]),m(60)])});z["nagisa-1-2"]=new q.ia({top0:c.action([c.repeat(12,[f(15,-90,90,A,E),m(40)])]),top1:c.action([c.repeat(3,[c.repeat(3,[f(5,-65,-55,s,I,c.offsetX(-190),c.offsetY(-20)),f(5,-35,-25,s,I,c.offsetX(-190),c.offsetY(-20)),
f(5,-5,5,s,I,c.offsetX(-190),c.offsetY(-20)),f(5,25,35,s,I,c.offsetX(-190),c.offsetY(-20)),f(5,55,65,s,I,c.offsetX(-190),c.offsetY(-20)),c.wait(2)]),m(60),c.repeat(3,[f(5,-65,-55,s,I,c.offsetX(190),c.offsetY(-20)),f(5,-35,-25,s,I,c.offsetX(190),c.offsetY(-20)),f(5,-5,5,s,I,c.offsetX(190),c.offsetY(-20)),f(5,25,35,s,I,c.offsetX(190),c.offsetY(-20)),f(5,55,65,s,I,c.offsetX(190),c.offsetY(-20)),c.wait(2)]),m(60)])])});z["nagisa-1-3"]=new q.ia({top0:c.action([m(60),c.repeat(3,[c.fire(c.direction(-60),
s,M,c.offsetX(-190),c.offsetY(-20)),c.repeat(20,[m(15),c.fire(c.direction(6,"sequence"),s,M,c.offsetX(-190),c.offsetY(-20))])])]),top1:c.action([m(80),c.repeat(3,[c.fire(c.direction(60),s,M,c.offsetX(190),c.offsetY(-20)),c.repeat(20,[m(15),c.fire(c.direction(-6,"sequence"),s,M,c.offsetX(190),c.offsetY(-20))])])]),top2:c.action([c.repeat(6,[c.repeat(3,[f(5,-60,-40,s,L,c.offsetX(-190),c.offsetY(-20)),f(5,-20,-10,s,L,c.offsetX(-190),c.offsetY(-20)),f(5,10,20,s,L,c.offsetX(-190),c.offsetY(-20)),f(5,40,
60,s,L,c.offsetX(-190),c.offsetY(-20)),c.wait(4)]),m(60),c.repeat(3,[f(5,-60,-40,s,L,c.offsetX(190),c.offsetY(-20)),f(5,-20,-10,s,L,c.offsetX(190),c.offsetY(-20)),f(5,10,20,s,L,c.offsetX(190),c.offsetY(-20)),f(5,40,60,s,L,c.offsetX(190),c.offsetY(-20)),c.wait(4)]),m(60)])])});z["nagisa-2-1"]=new q.ia({top0:c.action([m(120),c.repeat(36,[a(6,"+$loop.index*10","+$loop.index*10 + 360",A,K,c.offsetX(-190),c.offsetY(-20)),a(6,"-$loop.index*10","-$loop.index*10 + 360",A,K,c.offsetX(190),c.offsetY(-20)),
m(10)])]),top1:c.action([m(120),c.repeat(30,[a(3,"+$loop.index*10","+$loop.index * 10 + 360",s,Q),a(3,"-$loop.index*14","-$loop.index * 14 + 360",s,Q),m(12)])])});z["nagisa-2-2"]=new q.ia({top0:c.action([m(120),c.repeat(30,[a(4,"+$loop.index*5","+$loop.index*5 + 270",r,Q),m(12)])]),top1:c.action([m(120),c.repeat(6,[a(9,150,130,A(0.8),E),a(9,172,188,A(0.8),E),a(9,210,230,A(0.8),E),m(30),a(9,170,150,A(0.8),E),a(9,190,210,A(0.8),E),m(30)])])});z["nagisa-2-3"]=new q.ia({top:c.action([m(120),c.repeat(12,
[a(23,0,360,A,L,c.offsetX(-190),c.offsetY(-20)),a(23,0,360,A,L),a(23,0,360,A,L,c.offsetX(190),c.offsetY(-20)),m(30)])])});z["nagisa-3-1"]=new q.ia({top0:c.action([m(50),c.repeat(999,[b(r,0.001,5,function(a){return c.action([f(41,"-180","+180",a,R,c.offsetX(-190),c.offsetY(-20)),f(41,"-180","+180",a,R,c.offsetX(190),c.offsetY(-20))])}),m(50)])]),top1:c.action([c.repeat(999,[f(2,-2,0,G,E),m(10),f(2,0,2,G,E),m(150)])])});z["mai-1"]=new q.ia({top0:c.action([m(50),c.repeat(50,[c.bb("from","+Math.cos($loop.index*0.15)*40-170"),
a(3,"$from","$from+60",t,Y(c.action([c.wait(8),c.fire(c.direction(0,"relative"),s,K),c.nb]))),c.bb("from","-Math.cos($loop.index*0.15)*40-10"),a(3,"$from","$from-60",t,Y(c.action([c.wait(8),c.fire(c.direction(0,"relative"),s,K),c.nb]))),m(8)])]),top1:c.action([m(50),c.repeat(12,[a(5,-50,50,t,Y(c.action([c.wait(8),c.fire(c.direction(0,"relative"),s,Q),c.nb]))),a(5,-230,-130,t,Y(c.action([c.wait(8),c.fire(c.direction(0,"relative"),s,Q),c.nb]))),m(16),a(6,-50,50,t,Y(c.action([c.wait(8),c.fire(c.direction(0,
"relative"),s,Q),c.nb]))),a(6,-230,-130,t,Y(c.action([c.wait(8),c.fire(c.direction(0,"relative"),s,Q),c.nb]))),m(16)])])});z["mai-2"]=new q.ia({top:c.action([m(50),c.repeat(15,[c.fire(c.direction(-10),R(c.Ga("fireChild","$loop.index*10"))),m(8)])]),fireChild:c.action([m("40+$1"),b(s,0.1,5,function(a){return c.fire(c.direction(-90,"absolute"),a,M)}),c.nb])});z["saki-1-1"]=new q.ia({top:c.action([m(100),c.repeat(3,[c.Ga("oneround","9 + $loop.index * 4","$loop.index > 0 ? 0 : 1")])]),oneround:c.action([c.bb("way",
"$1"),c.repeat("30",[f("$way","3 * $loop.index*+1","3 * $loop.index*+1 + 360",r,K),f("$way","3 * $loop.index*-1","3 * $loop.index*-1 + 360",r,K),m(12)]),c.repeat("$2",[f(9,-20,20,G,W)])])});z["saki-1-2"]=new q.ia({top:c.action([m(100),c.repeat(5,[c.bb("way","5+$loop.index*2"),c.repeat(6,[c.bb("s","$loop.index*0.6"),c.action(function(){for(var a=[],b=0;5>b;b++)a.push(f("$way",-30,30,r("$s"),Q,c.offsetX(-120+60*b)));return a}())]),m(90)])])});z["saki-1-3"]=new q.ia({top:c.action([c.bb("dir","$rand < 0.5 ? -1 : 1"),
c.repeat(24,[c.fire(c.direction("120*$dir + $loop.index*10*-$dir"),c.speed(2),Q(c.Ga("seed"))),m(8)]),m(60)]),seed:c.action([c.wait(10),c.Td(c.speed(0),50),c.wait(90),f(13,0,360-360/13,s,W),c.nb])});z["saki-2-1"]=new q.ia({top0:c.action([m(100),c.repeat(4,[f(60,"$loop.index*+5+0","$loop.index*+5+360 - 360/60",s,K,c.offsetX(-40)),f(60,"$loop.index*-5+0","$loop.index*-5+360 - 360/60",s,K,c.offsetX(40)),m(60),f(59,"$loop.index*+5+0","$loop.index*+5+360 - 360/59",s,K,c.offsetX(-40)),f(59,"$loop.index*-5+0",
"$loop.index*-5+360 - 360/59",s,K,c.offsetX(40)),m(60)])]),top1:c.action([m(100),c.repeat(4,[c.repeat(7,[c.bb("o","$loop.index*20 - 60"),c.fire(c.direction("$o"),C,W),c.repeat(4,[c.bb("w","$loop.count"),f("$w+1","$w*-0.6 + $o","$w*+0.6 + $o",C("$w*-1.0"),W)])]),m(120)])])});z["saki-2-2"]=new q.ia({top:c.action([m(60),c.bb("dir","$rand < 0.5 ? -1 : 1"),c.repeat(12,[c.fire(c.direction("120*$dir + $loop.index*10*-$dir"),c.speed(2),R(c.Ga("seed"))),m(8),c.fire(c.direction("120*-$dir + $loop.index*10*$dir"),
c.speed(2),R(c.Ga("seed"))),m(8)]),m(60)]),seed:c.action([c.wait(10),c.Td(c.speed(0),"10 + $rand*15"),c.wait(65),b(r,0.14,6,function(a){return c.action([c.fire(c.direction(-48),a,M)])}),b(r,0.14,6,function(a){return c.action([c.fire(c.direction(-36),a,M)])}),b(r,0.14,6,function(a){return c.action([c.fire(c.direction(-24),a,M)])}),b(r,0.14,6,function(a){return c.action([c.fire(c.direction(-12),a,M)])}),b(r,0.14,6,function(a){return c.action([c.fire(c.direction(0),a,M)])}),b(r,0.14,6,function(a){return c.action([c.fire(c.direction(12),
a,M)])}),b(r,0.14,6,function(a){return c.action([c.fire(c.direction(24),a,M)])}),b(r,0.14,6,function(a){return c.action([c.fire(c.direction(36),a,M)])}),b(r,0.14,6,function(a){return c.action([c.fire(c.direction(48),a,M)])}),m(2),c.nb])});z["saki-2-3"]=new q.ia({top:c.action([m(60),c.bb("dir","$rand < 0.5 ? -1 : 1"),c.repeat(24,[c.fire(c.direction("120*$dir + $loop.index*10*-$dir"),c.speed(2),Q(c.Ga("seed"))),m(8),c.fire(c.direction("120*-$dir + $loop.index*10*$dir"),c.speed(2),Q(c.Ga("seed"))),m(8)]),
m(60)]),seed:c.action([c.wait(10),c.Td(c.speed(0),"10 + $rand*20"),c.wait(65),b(r,0.18,7,function(a){return c.action([c.fire(c.direction(180,"absolute"),a,W)])}),m(2),c.nb])});z["saki-3-1"]=new q.ia({top:c.action([c.fire(c.direction(180,"absolute"),ga,R(c.Ga("seed"))),m(60),c.fire(c.direction(180,"absolute"),ga,R(c.Ga("seed")),c.offsetX(-80)),c.fire(c.direction(180,"absolute"),ga,R(c.Ga("seed")),c.offsetX(80)),m(60)]),seed:c.action([c.fire(c.direction(0,"absolute"),r,s,K),c.repeat(999,[c.fire(c.direction(90,
"sequence"),s,K),c.fire(c.direction(90,"sequence"),s,K),c.fire(c.direction(90,"sequence"),s,K),m(10),c.fire(c.direction(100,"sequence"),s,K)])])});z["saki-3-2"]=new q.ia({top:c.action([c.fire(c.direction(180,"absolute"),ga,Q(c.Ga("seed"))),m(60),c.fire(c.direction(180,"absolute"),ga,Q(c.Ga("seed")),c.offsetX(-80)),c.fire(c.direction(180,"absolute"),ga,Q(c.Ga("seed")),c.offsetX(80)),m(60)]),seed:c.action([c.fire(c.direction(0,"absolute"),r,s,E),c.repeat(999,[c.fire(c.direction(90,"sequence"),s,E),
c.fire(c.direction(90,"sequence"),s,E),c.fire(c.direction(90,"sequence"),s,E),m(10),c.fire(c.direction(80,"sequence"),s,E)])])});z.setup=function(){for(var a=0;2E3>a;a++)ya.push(O());a=z.Ud=tm.eb.sc.md;a.jf=function(a){return!(a instanceof O)||!(-50>a.x||530<a.x||-50>a.y||690<a.y)};a.kg=function(a){var b=ya.shift(0);if(b)return b.pa=v.gh,ma.push(b),b.setFrameIndex(a.frame===i?1:a.frame),a.Ub?(b.scaleX=1,b.scaleY=1,b.qc=l):(b.scaleX=0.8,b.scaleY=1.5,b.qc=j),b.visible=a.visible===l?l:j,b.Ub=!!a.Ub,
b;console.warn("\u5f3e\u304c\u8db3\u308a\u306a\u3044\uff01")};a.og=function(a){return-80<=a.x&&560>a.x&&-80<=a.y&&720>a.y};a.Ic=v.ih;q.Ca.ub.$rank=0;q.Ca.ub.$hyperOff=1};z.erase=function(a,b,c){for(var d=[].concat(ma),f=0,g=d.length;f<g;f++){if(a){var m=va(!!b);m.setPosition(d[f].x,d[f].y);c&&(m.Dc=j)}d[f].Aa()}};z.kd=function(){for(var a=[].concat(ma),b=0,c=a.length;b<c;b++)a[b].remove()};O=tm.createClass({superClass:tm.display.Sprite,pa:0,Ub:l,init:function(){this.superInit("tex0",20,20);this.boundingRadius=
7;this.addEventListener("removed",function(){this.clearEventListener("enterframe");ya.push(this);var a=ma.indexOf(this);-1!==a&&ma.splice(a,1)})},update:function(){this.Ub&&(this.rotation+=15)},Aa:function(){var a=F(10,1,0.92,tm.graphics.Canvas().resize(10,10).setFillStyle(tm.graphics.RadialGradient(5,5,0,5,5,5).addColorStopList([{offset:0,color:"rgba(255,100,100,0.0)"},{offset:0.3,color:"rgba(255,100,100,0.0)"},{offset:0.9,color:"rgba(255,180,180,1.0)"},{offset:1,color:"rgba(255,100,100,0.0)"}]).toStyle()).fillRect(0,
0,10,10).element).setScale(0.1,0.1).setPosition(this.x,this.y);a.addEventListener("enterframe",function(){this.scaleX+=0.1;this.scaleY+=0.1});a.addChildTo(this.parent);this.remove()}});var ya=[],ma=O.Ta=[]})();var T,U,La,Na,Ta;T=function(b,a,d){return b<a?a:b>d?d:b};Ta=Math.PI/180;La=function(b){return b*Ta};Na=function(b,a){return window.Math.floor(Math.random()*(a-b+1))+b};U=function(b,a){return window.Math.random()*(a-b)+b};
