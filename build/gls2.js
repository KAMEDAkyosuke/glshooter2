/*
 bulletml.js v0.5.0-SNAPSHOT

 License
 http://daishihmr.mit-license.org/
*/
function d(b){throw b;}var h=void 0,j=!0,k=null,l=!1;function m(){return function(){}}var p={Kd:this};
(function(){function b(a,c){for(var b=0,g=a.length;b<g;b++)if(a[b].label==c)return a[b]}p.za=function(a){this.type="none";this.root=this;this.qa=[];this.Ub=[];this.Zb=[];if(a!==h){for(var c in a)a.hasOwnProperty(c)&&(a[c].label=c,a[c]instanceof p.Aa?this.qa.push(a[c]):a[c]instanceof p.Na?this.Ub.push(a[c]):a[c]instanceof p.ob&&this.Zb.push(a[c]));a=0;for(c=this.qa.length;a<c;a++)this.qa[a].Ca(this);a=0;for(c=this.Ub.length;a<c;a++)this.Ub[a].Ca(this);a=0;for(c=this.Zb.length;a<c;a++)this.Zb[a].Ca(this)}};
p.za.prototype.sd=function(a){return b(this.qa,a)};p.za.prototype.qe=function(){for(var a=[],c=0,b=this.qa.length;c<b;c++){var g=this.qa[c];g.label&&0===g.label.indexOf("top")&&(a[a.length]=g.label)}return a};p.za.prototype.je=function(a){var c;if(c=this.sd(a))return c;d(Error("action labeled '"+a+"' is undefined."))};p.za.prototype.ke=function(a){return b(this.Ub,a)};p.za.prototype.le=function(a){var c;if(c=this.ke(a))return c;d(Error("bullet labeled '"+a+"' is undefined."))};p.za.prototype.me=function(a){return b(this.Zb,
a)};p.za.prototype.ne=function(a){var c;if(c=this.me(a))return c;d(Error("fire labeled '"+a+"' is undefined."))};p.Na=function(){this.root=this.label=k;this.direction=new p.Ka(0);this.speed=new p.La(1);this.qa=[];this.va={};this.ea={}};p.Na.prototype.clone=function(a){var c=new p.Na;c.label=this.label;c.root=this.root;c.qa=this.qa;c.direction=new p.Ka(a.ua(this.direction.value));c.direction.type=this.direction.type;c.speed=new p.La(a.ua(this.speed.value));c.speed.type=this.speed.type;c.va=this.va;
c.ea=a.ea;return c};p.Na.prototype.Ca=function(a){this.root=a;for(var c=0,b=this.qa.length;c<b;c++)this.qa[c].Ca(a)};p.Hb=function(a){this.root=k;this.label=a;this.oa=[]};p.Hb.prototype.clone=function(a){var c=a.ea;a.ea=a.pc(this.oa);var b=this.root.le(this.label).clone(a);a.ea=c;return b};p.Hb.prototype.Ca=function(a){this.root=a};p.pa=function(){this.ya=""};p.pa.prototype.Ca=function(a){this.root=a};p.Aa=function(){this.ya="action";this.root=this.label=k;this.Ea=[];this.oa=[]};p.Aa.prototype=new p.pa;
p.Aa.prototype.Ca=function(a){this.root=a;for(var c=0,b=this.Ea.length;c<b;c++)this.Ea[c].Ca(a)};p.Aa.prototype.clone=function(){var a=new p.Aa;a.label=this.label;a.root=this.root;a.Ea=this.Ea;return a};p.nb=function(a){this.ya="actionRef";this.label=a;this.root=k;this.oa=[]};p.nb.prototype=new p.pa;p.nb.prototype.clone=function(){var a=new p.Aa;a.root=this.root;a.Ea.push(this);return a};p.ob=function(){this.ya="fire";this.ja=this.speed=this.direction=this.root=this.label=k;this.va=new p.ic};p.ob.prototype=
new p.pa;p.ob.prototype.Ca=function(a){this.root=a;this.ja&&this.ja.Ca(a)};p.jc=function(a){this.ya="fireRef";this.label=a;this.oa=[]};p.jc.prototype=new p.pa;p.Ib=function(){this.ya="changeDirection";this.direction=new p.Ka;this.wa=0};p.Ib.prototype=new p.pa;p.Jb=function(){this.ya="changeSpeed";this.speed=new p.La;this.wa=0};p.Jb.prototype=new p.pa;p.Gb=function(){this.ya="accel";this.Ia=new p.kc;this.Ja=new p.nc;this.wa=0};p.Gb.prototype=new p.pa;p.Lb=function(a){this.ya="wait";this.value=a||0};
p.Lb.prototype=new p.pa;p.mc=function(){this.ya="vanish"};p.mc.prototype=new p.pa;p.Kb=function(){this.ya="repeat";this.Fd=0;this.action=k;this.oa=[]};p.Kb.prototype=new p.pa;p.Kb.prototype.Ca=function(a){this.root=a;this.action&&this.action.Ca(a)};p.hc=function(a,c){this.ya="bind";this.Ee=a;this.he=c};p.hc.prototype=new p.pa;p.lc=function(a,c){this.ya="notify";this.ee=a;this.oa=c||k};p.lc.prototype=new p.pa;p.Jd=new p.pa;p.Ka=function(a){this.type="aim";this.value=a||0};p.La=function(a){this.type=
"absolute";this.value=a===h?1:a};p.kc=function(a){this.type="absolute";this.value=a||0};p.nc=function(a){this.type="absolute";this.value=a||0};p.ic=function(a){a=a||{};this.offsetX=a.offsetX||0;this.offsetY=a.offsetY||0;this.pb=j;a.pb!==h&&(this.pb=!!a.pb)};p.Vc=function(a){this.value=a||0};p.Wc=function(a){this.value=a||0};p.Uc=function(a){this.value=!!a}})();p.Pa=function(b,a){this.dd=b;this.Nb=[];this.Qa=-1;this.ta=k;this.ea={};this.Mb={$rank:a||0}};
p.Pa.prototype.next=function(){this.Qa+=1;if(this.ta!==k){var b=this.ta.Ea[this.Qa];if(b!==h){if(b instanceof p.Aa)return this.wb(),this.ta=b,this.ea=this.oc(),this.next();if(b instanceof p.nb)return this.wb(),this.ta=this.dd.je(b.label),this.ea=this.pc(b.oa),this.next();if(b instanceof p.Kb)return this.ea.sb=0,this.ea.Bd=this.ua(b.Fd)|0,this.wb(),this.ta=b.action.clone(),this.ea=this.oc(),this.next();if(b instanceof p.ob){var a=new p.ob;a.ja=b.ja.clone(this);b.direction!==k&&(a.direction=new p.Ka(this.ua(b.direction.value)),
a.direction.type=b.direction.type);b.speed!==k&&(a.speed=new p.La(this.ua(b.speed.value)),a.speed.type=b.speed.type);a.va=b.va;return a}return b instanceof p.jc?(this.wb(),this.ta=new p.Aa,this.ta.Ea=[this.dd.ne(b.label)],this.ea=this.pc(b.oa),this.next()):b instanceof p.Ib?(a=new p.Ib,a.direction.type=b.direction.type,a.direction.value=this.ua(b.direction.value),a.wa=this.ua(b.wa),a):b instanceof p.Jb?(a=new p.Jb,a.speed.type=b.speed.type,a.speed.value=this.ua(b.speed.value),a.wa=this.ua(b.wa),a):
b instanceof p.Gb?(a=new p.Gb,a.Ia.type=b.Ia.type,a.Ia.value=this.ua(b.Ia.value),a.Ja.type=b.Ja.type,a.Ja.value=this.ua(b.Ja.value),a.wa=this.ua(b.wa),a):b instanceof p.Lb?new p.Lb(this.ua(b.value)):b instanceof p.mc?b:b instanceof p.hc?(this.ea["$"+b.Ee]=this.ua(b.he),p.Jd):b instanceof p.lc?b:k}this.Yd();if(this.ta===k)return k;if((b=this.ta.Ea[this.Qa])&&"repeat"==b.ya)this.ea.sb++,this.ea.sb<this.ea.Bd&&(this.wb(),this.ta=b.action.clone(),this.ea=this.oc());return this.next()}return k};
p.Pa.prototype.wb=function(){this.Nb.push({action:this.ta,cursor:this.Qa,scope:this.ea});this.Qa=-1};p.Pa.prototype.Yd=function(){var b=this.Nb.pop();b?(this.Qa=b.cursor,this.ta=b.action,this.ea=b.scope):(this.Qa=-1,this.ta=k,this.ea={})};
p.Pa.prototype.ua=function(b){var a;if("number"===typeof b)return b;if(isNaN(a=Number(b))){if((a=this.ea[b])||(a=this.Mb[b]))return a;if("$rand"==b)return Math.random()}else return a;a={};for(var c in this.Mb)this.Mb.hasOwnProperty(c)&&(a[c]=this.Mb[c]);for(c in this.ea)this.ea.hasOwnProperty(c)&&(a[c]=this.ea[c]);a.$rand=Math.random();(c=this.Nb[this.Nb.length-1])&&(a.$loop={index:c.scope.sb,count:c.scope.sb+1,first:0===c.scope.sb,last:c.scope.sb+1>=c.scope.Bd});return(new Function("return "+b.split("$").join("this.$"))).apply(a)};
p.Pa.prototype.pc=function(b){var a={};if(b)for(var c=0,f=b.length;c<f;c++)a["$"+(c+1)]=this.ua(b[c]);else for(c in this.ea)this.ea.hasOwnProperty(c)&&(a[c]=this.ea[c]);return a};p.Pa.prototype.oc=function(){var b={},a;for(a in this.ea)this.ea.hasOwnProperty(a)&&(b[a]=this.ea[a]);return b};p.za.prototype.Ec=function(b,a){var c=new p.Pa(this,a),f=this.sd(b);f&&(c.ta=f);return c};p.Na.prototype.Ec=function(b){b=new p.Pa(this.root,b);var a=new p.Aa;a.root=this.root;a.Ea=this.qa;b.ta=a;b.ea=this.ea;return b};p.fa=function(b){b=b||"";for(var a in p.fa)p.fa.hasOwnProperty(a)&&(p.Kd[b+a]=p.fa[a])};
p.fa.action=function(b){if(0<arguments.length)for(var a=0,c=arguments.length;a<c;a++)arguments[a]instanceof Function&&(arguments[a]=arguments[a]());if(b instanceof Array){a=0;for(c=b.length;a<c;a++)b[a]instanceof Function&&(b[a]=b[a]())}var f=new p.Aa;if(b instanceof Array)b.some(function(a){return!(a instanceof p.pa)})&&d(Error("argument type error.")),f.Ea=b;else{a=0;for(c=arguments.length;a<c;a++)arguments[a]instanceof p.pa?f.Ea[a]=arguments[a]:d(Error("argument type error."))}return f};
p.fa.Je=function(b,a){for(var c=0,f=arguments.length;c<f;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());b===h&&d(Error("label is required."));f=new p.nb(b);if(a instanceof Array)f.oa=a;else for(c=1;c<arguments.length;c++)f.oa.push(arguments[c]);return f};
p.fa.ja=function(b,a,c,f){for(var g=0,i=arguments.length;g<i;g++)arguments[g]instanceof Function&&(arguments[g]=arguments[g]());i=new p.Na;for(g=0;g<arguments.length;g++)arguments[g]instanceof p.Ka?i.direction=arguments[g]:arguments[g]instanceof p.La?i.speed=arguments[g]:arguments[g]instanceof p.Aa?i.qa.push(arguments[g]):arguments[g]instanceof p.nb?i.qa.push(arguments[g]):arguments[g]instanceof Array?i.qa.push(p.fa.action(arguments[g])):arguments[g]instanceof Object?i.va=arguments[g]:"string"===
typeof arguments[g]&&(i.label=arguments[g]);return i};p.fa.Me=function(b,a){for(var c=0,f=arguments.length;c<f;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());b===h&&d(Error("label is required."));f=new p.Hb(b);if(a instanceof Array)f.oa=a;else for(c=1;c<arguments.length;c++)f.oa.push(arguments[c]);return f};
p.fa.Yb=function(b,a,c,f){for(var g=0,i=arguments.length;g<i;g++)arguments[g]instanceof Function&&(arguments[g]=arguments[g]());i=new p.ob;for(g=0;g<arguments.length;g++)arguments[g]instanceof p.Ka?i.direction=arguments[g]:arguments[g]instanceof p.La?i.speed=arguments[g]:arguments[g]instanceof p.Na?i.ja=arguments[g]:arguments[g]instanceof p.Hb?i.ja=arguments[g]:arguments[g]instanceof p.ic?i.va=arguments[g]:arguments[g]instanceof p.Vc?i.va.offsetX=arguments[g].value:arguments[g]instanceof p.Wc?i.va.offsetY=
arguments[g].value:arguments[g]instanceof p.Uc&&(i.va.pb=arguments[g].value);i.ja===h&&d(Error("bullet (or bulletRef) is required."));return i};p.fa.Te=function(b,a){for(var c=0,f=arguments.length;c<f;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());b===h&&d(Error("label is required."));f=new p.jc(b);if(a instanceof Array)f.oa=a;else for(c=1;c<arguments.length;c++)f.oa.push(arguments[c]);return f};
p.fa.Ne=function(b,a){for(var c=0,f=arguments.length;c<f;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());b===h&&d(Error("direction is required."));a===h&&d(Error("term is required."));c=new p.Ib;c.direction=b instanceof p.Ka?b:new p.Ka(b);c.wa=a;return c};
p.fa.Oe=function(b,a){for(var c=0,f=arguments.length;c<f;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());b===h&&d(Error("speed is required."));a===h&&d(Error("term is required."));c=new p.Jb;c.speed=b instanceof p.La?b:new p.La(b);c.wa=a;return c};
p.fa.Ie=function(b,a,c){for(var f=0,g=arguments.length;f<g;f++)arguments[f]instanceof Function&&(arguments[f]=arguments[f]());g=new p.Gb;for(f=0;f<arguments.length;f++)arguments[f]instanceof p.kc?g.Ia=b:arguments[f]instanceof p.nc?g.Ja=a:g.wa=arguments[f];g.Ia===h&&g.Ja===h&&d(Error("horizontal or vertical is required."));g.wa===h&&d(Error("term is required."));return g};
p.fa.wait=function(b){for(var a=0,c=arguments.length;a<c;a++)arguments[a]instanceof Function&&(arguments[a]=arguments[a]());b===h&&d(Error("value is required."));return new p.Lb(b)};p.fa.df=function(){return new p.mc};
p.fa.repeat=function(b,a){for(var c=0,f=arguments.length;c<f;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());b===h&&d(Error("times is required."));a===h&&d(Error("action is required."));f=new p.Kb;f.Fd=b;if(a instanceof p.Aa||a instanceof p.nb)f.action=a;else if(a instanceof Array)f.action=p.fa.action(a);else{for(var g=[],c=1;c<arguments.length;c++)g.push(arguments[c]);f.action=p.fa.action(g)}return f};p.fa.Le=function(b,a){return new p.hc(b,a)};
p.fa.af=function(b,a){return new p.lc(b,a)};p.fa.direction=function(b,a){for(var c=0,f=arguments.length;c<f;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());b===h&&d(Error("value is required."));c=new p.Ka(b);a!==h&&(c.type=a);return c};p.fa.speed=function(b,a){for(var c=0,f=arguments.length;c<f;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());b===h&&d(Error("value is required."));c=new p.La(b);a&&(c.type=a);return c};
p.fa.Ia=function(b,a){for(var c=0,f=arguments.length;c<f;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());b===h&&d(Error("value is required."));c=new p.kc(b);a&&(c.type=a);return c};p.fa.Ja=function(b,a){for(var c=0,f=arguments.length;c<f;c++)arguments[c]instanceof Function&&(arguments[c]=arguments[c]());b===h&&d(Error("value is required."));c=new p.nc(b);a&&(c.type=a);return c};p.fa.Se=function(b){return new p.ic(b)};p.fa.offsetX=function(b){return new p.Vc(b)};p.fa.offsetY=function(b){return new p.Wc(b)};
p.fa.pb=function(b){return new p.Uc(b)};tm.xa=tm.xa||{};
(function(){function b(a){for(;a<=-Math.PI;)a+=2*Math.PI;for(;Math.PI<a;)a-=2*Math.PI;return a}function a(a,c){return Math.atan2(c.y-a.y,c.x-a.x)}tm.xa.Wa=tm.createClass({init:function(a){a||d(Error("argument is invalid.",a));this.Zc=a},Wb:function(a,c){var b=this.Zc.qe();if(c===h&&0<b.length){for(var f=[],q=0,J=b.length;q<J;q++)f[f.length]=this.$c(a,b[q]);for(var u=function(){for(var a=f.length;a--;)f[a].call(this);u.zc==f.length&&(u.yb=j,this.dispatchEvent(tm.event.Event("completeattack")))},q=
f.length;q--;)f[q].gc=u;u.zc=0;u.hd=function(){this.zc++};u.zc=0;u.yb=l;u.Hc=j;return u}return this.$c(a,c)},$c:function(a,c){function b(){b.ba+=1;this.ba=b.ba;var a=b.Ac,c=b.Xd;if(c)if(b.ba<b.wc?b.direction+=b.qb:b.ba===b.wc&&(b.direction=b.Ra),b.ba<b.xc?b.speed+=b.Eb:b.ba===b.xc&&(b.speed=b.ub),b.ba<b.rc?(b.jb+=b.Qb,b.lb+=b.Rb):b.ba===b.rc&&(b.jb=b.Ob,b.lb=b.Pb),this.x+=Math.cos(b.direction)*b.speed*a.kb,this.y+=Math.sin(b.direction)*b.speed*a.kb,this.x+=b.jb*a.kb,this.y+=b.lb*a.kb,a.Ic(this)){if(a.vb||
this.vb)this.rotation=(b.direction+0.5*Math.PI)*Math.RAD_TO_DEG,this.speed=b.speed;if(!(b.ba<b.Hd||b.yb)){for(var g;g=b.Id.next();)switch(g.ya){case "fire":c.Td.call(this,g,a,b,c);break;case "wait":a=0;b.Hd="number"===typeof g.value?b.ba+g.value:0!==(a=~~g.value)?b.ba+a:b.ba+eval(g.value);return;case "changeDirection":c.Nd.call(this,g,a,b);break;case "changeSpeed":c.Od.call(this,g,b);break;case "accel":c.Ld.call(this,g,b);break;case "vanish":this.remove();break;case "notify":c.Ud.call(this,g)}b.yb=
j;b.gc?b.gc.hd():this.dispatchEvent(tm.event.Event("completeattack"))}}else this.remove(),b.yb=j,b.gc?b.gc.hd():this.dispatchEvent(tm.event.Event("completeattack"))}a=function(a){var b={},c=tm.xa.Wa.zb,g;for(g in c)c.hasOwnProperty(g)&&(b[g]=c[g]);for(g in a)a.hasOwnProperty(g)&&(b[g]=a[g]);return b}(a);a.target||d(Error("target is undefined in config."));c=c||"top";"string"===typeof c?b.Id=this.Zc.Ec(c,a.Rc):c instanceof p.Na?b.Id=c.Ec(a.Rc):(window.console.error(a,c),d(Error("\u5f15\u6570\u304c\u4e0d\u6b63")));
b.Xd=this;b.Ac=a;b.Hd=-1;b.yb=l;b.direction=0;b.yd=0;b.speed=0;b.Ad=0;b.jb=0;b.lb=0;b.qb=0;b.Ra=0;b.wc=-1;b.Eb=0;b.ub=0;b.xc=-1;b.Qb=0;b.Ob=0;b.Rb=0;b.Pb=0;b.rc=-1;b.ba=-1;b.Hc=j;return b},Sd:function(a){function b(){this.x+=b.kd;this.y+=b.ld;b.Ac.Ic(this)||(this.remove(),this.dispatchEvent(tm.event.Event("removed")))}a=function(a){var b={},c=tm.xa.Wa.zb,g;for(g in c)c.hasOwnProperty(g)&&(b[g]=c[g]);for(g in a)a.hasOwnProperty(g)&&(b[g]=a[g]);return b}(a);a.target||d(Error("target is undefined in config."));
b.Ac=a;b.direction=0;b.speed=0;b.kd=0;b.ld=0;b.Hc=j;return b},Td:function(b,c,f,v){if(this.ye===h||this.Xb){var q={label:b.ja.label},J;for(J in b.ja.va)q[J]=b.ja.va[J];if(q=c.fd(q)){var u=(J=!!b.ja.qa.length)?v.Sd(c):v.Wb(c,b.ja),Z=this,O={x:this.x+b.va.offsetX,y:this.y+b.va.offsetY};f.yd=u.direction=function(q){var v=eval(q.value)*Math.DEG_TO_RAD;switch(q.type){case "aim":return c.target?b.va.pb?a(O,c.target)+v:a(Z,c.target)+v:v-Math.PI/2;case "absolute":return v-Math.PI/2;case "relative":return f.direction+
v;default:return f.yd+v}}(b.direction||b.ja.direction);f.Ad=u.speed=function(a){var b=eval(a.value);switch(a.type){case "relative":return f.speed+b;case "sequence":return f.Ad+b;default:return b}}(b.speed||b.ja.speed);q.x=O.x;q.y=O.y;J&&(u.kd=Math.cos(u.direction)*u.speed*c.kb,u.ld=Math.sin(u.direction)*u.speed*c.kb);q.vb=!!q.vb;if(c.vb||q.vb)q.rotation=(u.direction+0.5*Math.PI)*Math.RAD_TO_DEG,q.speed=u.speed;q.addEventListener("enterframe",u);q.addEventListener("removed",function(){this.removeEventListener("enterframe",
u);this.removeEventListener("removed",arguments.callee)});c.ed?c.ed.addChild(q):this.parent&&this.parent.addChild(q)}}},Nd:function(c,f,n){var v=eval(c.direction.value)*Math.DEG_TO_RAD,q=eval(c.wa);switch(c.direction.type){case "aim":c=f.target;if(!c)return;n.Ra=a(this,c)+v;n.qb=b(n.Ra-n.direction)/q;break;case "absolute":n.Ra=v-Math.PI/2;n.qb=b(n.Ra-n.direction)/q;break;case "relative":n.Ra=n.direction+v;n.qb=b(n.Ra-n.direction)/q;break;case "sequence":n.qb=v,n.Ra=n.direction+n.qb*(q-1)}n.wc=n.ba+
q},Od:function(a,b){var c=eval(a.speed.value),f=eval(a.wa);switch(a.speed.type){case "absolute":b.ub=c;b.Eb=(b.ub-b.speed)/f;break;case "relative":b.ub=c+b.speed;b.Eb=(b.ub-b.speed)/f;break;case "sequence":b.Eb=c,b.ub=b.speed+b.Eb*f}b.xc=b.ba+f},Ld:function(a,b){var c=eval(a.wa);b.rc=b.ba+c;if(a.Ia){var f=eval(a.Ia.value);switch(a.Ia.type){case "absolute":case "sequence":b.Qb=(f-b.jb)/c;b.Ob=f;break;case "relative":b.Qb=f,b.Ob=(f-b.jb)*c}}else b.Qb=0,b.Ob=b.jb;if(a.Ja)switch(f=eval(a.Ja.value),a.Ja.type){case "absolute":case "sequence":b.Rb=
(f-b.lb)/c;b.Pb=f;break;case "relative":b.Rb=f,b.Pb=(f-b.lb)*c}else b.Rb=0,b.Pb=b.lb},Ud:function(a){var b=tm.event.Event(a.ee);if(a.oa)for(var c in a.oa)b[c]=a.oa[c];this.dispatchEvent(b)}});var c=function(){var a=tm.graphics.Canvas();a.resize(8,8);a.setTransformCenter();a.setLineStyle(0).setStrokeStyle("rgba(0,0,0,0)");a.setFillStyle(tm.graphics.RadialGradient(0,0,0,0,0,4).addColorStopList([{offset:0,color:"white"},{offset:0.5,color:"white"},{offset:1,color:"red"}]).toStyle()).fillCircle(0,0,4);
return a}();tm.xa.be=function(a){var b=tm.app.Sprite(8,8,c);b.label=a.label;return b};var f=k;tm.xa.ce=function(a){f===k&&(f=a.getRoot());return 0<=a.x&&a.x<APP.width&&0<=a.y&&a.y<APP.height};tm.xa.Qe=function(){return j};tm.xa.Wa.zb={fd:tm.xa.be,Ic:tm.xa.ce,Rc:0,vb:l,kb:2,target:k};p.za.prototype.Wb=function(a){return tm.xa.Wa(this).Wb(a)}})();/*
 gls2.js v1.0-beta

 License
 http://daishihmr.mit-license.org/
*/
tm.preload(m());tm.main(function(){r("#canvas2d").run()});var s=k,t,w,z,A,B,C,D,E,F,G,H,I,K,L,M,r=tm.createClass({superClass:tm.app.CanvasApp,ac:0,Ye:0,Sb:4,tb:4,md:1,rd:[1E9,1E10],ha:k,init:function(b){s!==k&&d(Error("class 'gls2.GlShooter2' is singleton!!"));this.superInit(b);s=this;this.resize(480,640).fitWindow();this.fps=60;this.background="black";this.keyboard=tm.input.Keyboard(window);this.replaceScene(tm.app.LoadingScene({assets:{tex0:"assets/tex0.png",tex1:"assets/tex1.png",laser:"assets/laser.png",laserHead:"assets/laser_head.png",laserFoot:"assets/laser_foot.png",
explode0:"assets/explode0.png",explode1:"assets/explode1.png",explode2:"assets/explode2.png",explode3:"assets/explode3.png",soundExplode:"assets/sen_ge_taihou03.mp3"},nextScene:function(){this.Vd();return t()}.bind(this)}))},Vd:function(){w.ka();z.ka();this.ha=A()},fe:function(){this.stop();tm.social.Nineleap.postRanking(this.ac,"")}});function N(b){b.shadowColor="rgba(0,0,0,0.5)";b.shadowBlur=30;b.shadowOffsetX=20;b.shadowOffsetY=70}
tm.app.Label=tm.createClass({superClass:tm.app.Label,init:function(b,a){this.superInit(b,a);this.setAlign("center");this.setBaseline("middle");this.setFontFamily("Orbitron");this.fillStyle="white";this.isHitPoint=this.isHitPointRect},update:function(b){this.alpha=0.8+0.2*Math.sin(0.1*b.frame)}});function P(){if(0!==s.tb){var b=tm.asset.AssetManager.get("soundExplode");b.volume=0.1*s.tb;b&&b.clone().play()}}
tm.app.AnimationSprite.prototype.clone=function(){return tm.app.AnimationSprite(this.ss,this.width,this.height)};(function(){var b=k,a={"0":{x:1,y:0},45:{x:0.7,y:-0.7},90:{x:0,y:-1},135:{x:-0.7,y:-0.7},180:{x:-1,y:0},225:{x:-0.7,y:0.7},270:{x:0,y:1},315:{x:0.7,y:0.7}};B=tm.createClass({superClass:tm.app.Sprite,Ga:0,bb:j,Cd:l,ha:k,re:100,speed:4.5,$a:k,Cb:k,bc:k,Tb:k,cc:k,dc:k,init:function(a){this.superInit("tex1",64,64);this.ha=a;tm.xa.Wa.zb.target=this;N(this);this.Cb=C(this,"laser","laserHead","laserFoot");this.Cb.visible=l;this.Cb.addChildTo(a);this.Rd();this.$a=[{x:-70,y:20,d:0.1,Va:l,Sa:-0.7,v:j},{x:-40,
y:40,d:0.1,Va:l,Sa:-0.5,v:j},{x:40,y:40,d:0.1,Va:j,Sa:0.5,v:j},{x:70,y:20,d:0.1,Va:j,Sa:0.7,v:j}];this.Tb=tm.app.CanvasElement().addChildTo(this);a=0;for(var b=this.$a.length;a<b;a++){var g=this.$a[a];D(this,g).setPosition(g.x,g.y).addChildTo(this.Tb)}this.cc=tm.app.CircleShape(80,80,{fillStyle:"rgba(0,0,0,0)",strokeStyle:tm.graphics.LinearGradient(0,0,0,80).addColorStopList([{offset:0,color:"rgba(100,100,255,0.0)"},{offset:0.3,color:"rgba(100,100,255,0.1)"},{offset:0.5,color:"rgba(255,255,255,1.0)"},
{offset:0.7,color:"rgba(100,100,255,0.1)"},{offset:1,color:"rgba(100,100,255,0.0)"}]).toStyle(),lineWidth:2}).addChildTo(this);this.cc.blendMode="lighter";this.cc.update=function(){this.rotation+=2};this.dc=tm.app.CircleShape(80,80,{fillStyle:"rgba(0,0,0,0)",strokeStyle:tm.graphics.LinearGradient(0,0,0,80).addColorStopList([{offset:0,color:"rgba(100,100,255,0.0)"},{offset:0.3,color:"rgba(100,100,255,0.1)"},{offset:0.5,color:"rgba(255,255,255,1.0)"},{offset:0.7,color:"rgba(100,100,255,0.1)"},{offset:1,
color:"rgba(100,100,255,0.0)"}]).toStyle(),lineWidth:2}).addChildTo(this);this.dc.blendMode="lighter";this.dc.update=function(){this.rotation-=2}},He:function(){return[{x:-70,y:20,d:0.1,Va:l,Sa:-0.7,v:j},{x:-40,y:40,d:0.1,Va:l,Sa:-0.5,v:j},{x:40,y:40,d:0.1,Va:j,Sa:0.5,v:j},{x:70,y:20,d:0.1,Va:j,Sa:0.7,v:j}]},Rd:function(){this.bc=tm.app.Sprite("tex0",20,20).addChildTo(this);this.bc.setFrameIndex(5);this.bc.blendMode="lighter";this.bc.update=function(a){a=0.75+0.15*Math.sin(0.2*a.frame);this.scale.set(a,
a)}},Ua:-1,Dc:l,Ab:l,update:function(c){var f=c.keyboard;if(this.bb){var g=f.getKeyAngle();g!==k&&(g=a[g],this.x+=g.x*this.speed*(this.Ab?0.75:1),this.y+=g.y*this.speed*(this.Ab?0.75:1));this.x=Q(this.x,5,475);this.y=Q(this.y,5,635);var g=f.getKey("c"),i=f.getKey("z");this.Ua=g?this.Ua+1:this.Ua-1;this.Ua=Q(this.Ua,-1,10);this.Ab=i&&g||10===this.Ua;this.Dc=!this.Ab&&(0<=this.Ua||i)&&0===c.frame%3;i&&(this.Ua=0);if(this.Ab){this.Cb.visible=j;g=0;for(i=this.$a.length;g<i;g++)this.$a[g].v=l;this.Tb.rotation=
0}else{this.Cb.visible=l;g=0;for(i=this.$a.length;g<i;g++)this.$a[g].v=j}this.Dc&&(c=Math.sin(0.2*c.frame),E(this.x-7-6*c,this.y-5,-90).addChildTo(this.ha),E(this.x-7+6*c,this.y-5,-90).addChildTo(this.ha),E(this.x+7-6*c,this.y-5,-90).addChildTo(this.ha),E(this.x+7+6*c,this.y-5,-90).addChildTo(this.ha))}this.cc.visible=this.dc.visible=100===this.re;this.ae(f);this.Md(f);b===k&&(b=F(this.ha.Fa));b.clone().setPosition(this.x-5,this.y+20).addChildTo(this.ha);b.clone().setPosition(this.x+5,this.y+20).addChildTo(this.ha)},
ae:function(a){var b=this.Tb;b.rotation=this.bb&&a.getKey("left")?Math.max(b.rotation-2,-30):this.bb&&a.getKey("right")?Math.min(b.rotation+2,30):2<b.rotation?b.rotation-2:-2>b.rotation?b.rotation+2:0},Md:function(a){this.bb&&a.getKey("left")?this.Ga=Q(this.Ga-0.2,-3,3):this.bb&&a.getKey("right")?this.Ga=Q(this.Ga+0.2,-3,3):0>this.Ga?this.Ga=Q(this.Ga+0.2,-3,3):0<this.Ga&&(this.Ga=Q(this.Ga-0.2,-3,3));a=3+~~this.Ga;this.setFrameIndex(a);return a}});D=tm.createClass({superClass:tm.app.AnimationSprite,
Za:k,da:k,init:function(a,b){this.superInit(tm.app.SpriteSheet({image:"tex1",frame:{width:32,height:32},animations:{anim0:{frames:[136,137,138,152,153,154],next:"anim0",frequency:3},anim1:{frames:[137,138,152,153,154,136].reverse(),next:"anim1",frequency:3}}}),32,32);this.Za=b;this.da=a;N(this);this.gotoAndPlay(b.Va?"anim0":"anim1")},update:function(a){if(this.Za.v){this.x=this.Za.x;this.y=this.Za.y;this.rotation=Math.radToDeg(this.Za.d*this.Za.Sa);var f=this.parent.localToGlobal(this);this.Za.v&&
b.clone().setPosition(f.x,f.y).addChildTo(a.ha);this.da.Dc&&(E(f.x-3,f.y,this.parent.rotation+this.rotation-90).addChildTo(a.ha),E(f.x+3,f.y,this.parent.rotation+this.rotation-90).addChildTo(a.ha))}else this.x=0,this.y=-40,this.currentFrameIndex=3}})})();(function(){var b=k;E=tm.createClass({superClass:tm.app.CircleShape,speed:20,uc:1,init:function(c,f,g){this.superInit(24,24,{fillStyle:tm.graphics.RadialGradient(12,12,0,12,12,12).addColorStopList([{offset:0,color:"rgba(255,255,255,1)"},{offset:0.5,color:"rgba(255,255,255,1)"},{offset:1,color:"rgba(  0,100,255,0)"}]).toStyle(),strokeStyle:"rgba(0,0,0,0)"});this.blendMode="lighter";this.scaleY=0.5;var i=R(g);this.Fe=Math.cos(i)*this.speed;this.Ge=Math.sin(i)*this.speed;this.setPosition(c,f);this.rotation=
g;this.addEventListener("added",function(){a.push(this)});this.addEventListener("removed",function(){var b=a.indexOf(this);-1!==b&&a.splice(b,1)});b===k&&(b=G(16,1,0.9,tm.graphics.Canvas().resize(16,16).setFillStyle(tm.graphics.RadialGradient(8,8,0,8,8,8).addColorStopList([{offset:0,color:"rgba(255,255,255,1.0)"},{offset:1,color:"rgba(255,128,  0,0.0)"}]).toStyle()).fillRect(0,0,16,16).element))},update:function(){this.x+=this.Fe;this.y+=this.Ge;for(var a=[].concat(H.sc),b=0,g=a.length;b<g;b++){var i=
a[b];if((this.x-i.x)*(this.x-i.x)+(this.y-i.y)*(this.y-i.y)<(this.radius+i.radius)*this.radius+i.radius){this.rb();i.jd(this.uc);this.remove();break}}(-60>this.x||540<this.x||-60>this.y||700<this.y)&&this.remove()},rb:function(){var a=b.clone().setPosition(this.x,this.y).addChildTo(this.parent),f=S(2,8),g=2*Math.random()*Math.PI;a.ra=Math.cos(g)*f;a.sa=Math.sin(g)*f;a.scaleX=a.scaleY=(S(0.1,0.5)+S(0.1,0.5))/2;a.addEventListener("enterframe",function(){this.x+=this.ra;this.y+=this.sa;this.ra*=0.9;
this.sa*=0.9})}});E.xb=function(){for(var b=[].concat(a),f=0,g=b.length;f<g;f++)b[f].remove()};var a=E.sc=[]})();(function(){var b=k;C=tm.createClass({superClass:tm.app.CanvasElement,da:k,image:k,c:k,ba:0,Ha:0,bf:k,uc:5,vc:l,head:k,cb:k,init:function(a,c,f,g){this.da=a;a=tm.asset.AssetManager.get(c);this.superInit();this.image=a.element;this.width=a.width;this.height=640;this.blendMode="lighter";this.origin.y=1;this.c=tm.graphics.Canvas();this.c.resize(this.width,740);this.c.globalCompositeOperation="lighter";this.head=tm.app.AnimationSprite(tm.app.SpriteSheet({image:f,frame:{width:80,height:80},animations:{"default":{frames:[0,
1,2,3],next:"default"}}}),80,80);this.head.gotoAndPlay();this.head.blendMode="lighter";this.cb=tm.app.AnimationSprite(tm.app.SpriteSheet({image:g,frame:{width:128,height:64},animations:{"default":{frames:[0,1,2,3],next:"default"}}}),128,64);this.cb.gotoAndPlay();this.cb.blendMode="lighter";b===k&&(b=G(16,1,0.9,tm.graphics.Canvas().resize(16,16).setFillStyle(tm.graphics.RadialGradient(8,8,0,8,8,8).addColorStopList([{offset:0,color:"rgba(255,255,255,1.0)"},{offset:1,color:"rgba(  0,  0,255,0.0)"}]).toStyle()).fillRect(0,
0,16,16).element))},update:function(){this.x=this.da.x;this.y=this.da.y-40;if(this.visible){this.Ha=this.vc?this.Ha-50:this.y;var a=[].concat(H.sc);a.sort(function(a,b){return b.y-a.y});for(var b=0,f=a.length;b<f;b++){var g=a[b];this.Ha-30<g.y&&(g.y<this.y&&this.x-40<g.x&&g.x<this.x+40)&&(this.Ha=g.y,g.jd(this.uc),this.rb(1))}this.head._updateFrame();this.cb._updateFrame()}else{if(this.vc)for(a=this.y;a>this.Ha;a-=30)this.rb(1,a);this.Ha=this.y}-80>this.Ha&&(this.Ha=-80);this.vc=this.visible;this.ba+=
1},rb:function(a,c){c=c||this.Ha;for(var f=0;f<a;f++){var g=b.clone().setPosition(this.x,c).addChildTo(this.parent),i=S(8,14),n=S(0,Math.PI);g.ra=Math.cos(n)*i;g.sa=Math.sin(n)*i;g.scaleX=g.scaleY=(S(0.5,1.5)+S(0.5,1.5))/2;g.addEventListener("enterframe",function(){this.x+=this.ra;this.y+=this.sa;this.ra*=0.9;this.sa*=0.9})}},draw:function(a){this.c.clear();for(var b=0;6>b;b++)this.c.drawImage(this.image,0,-(15*this.ba%240)+240*b);this.height=Math.max(this.y-this.Ha,1);a.context.drawImage(this.c.element,
0,this.c.height-this.height,this.c.width,this.height,-this.width*this.origin.x,-this.height*this.origin.y,this.width,this.height);var b=this.head.ss.getFrame(this.head.currentFrame),f=this.head.ss.image.element;a.drawImage(f,b.x,b.y,b.width,b.height,-this.width*this.origin.x-43,-this.height*this.origin.y-75,150,150);b=this.cb.ss.getFrame(this.cb.currentFrame);f=this.cb.ss.image.element;a.drawImage(f,b.x,b.y,b.width,b.height,-this.width*this.origin.x-43,-this.height*this.origin.y+this.height-37,150,
74)}})})();var T=tm.createClass({cf:0,wd:0,pd:0,da:k,ha:k,frame:0,background:k,init:function(b){var a=this.ha=b;this.da=b.da;a.Fa.direction=0.5*Math.PI;a.Fa.speed=0.5;this.background=tm.graphics.LinearGradient(0,0,0,640).addColorStopList([{offset:0,color:"#030"},{offset:1,color:"#010"}]).toStyle();this.frame=0},update:function(){if(200<this.frame&&0===this.frame%30){var b;b=[];for(var a in I)I.hasOwnProperty(a)&&b.push(a);b=I[["tank-left","heri1-left"].random()];a=0;for(var c=b.length;a<c;a++)this.se(b[a])}this.frame+=
1},se:function(b){var a=H.Be.shift();a?(this.pd+=1,a.ka(this.ha,this,b.aa,b.$).setPosition(b.x,b.y).addChildTo(this.ha).hb()):console.warn("\u6575\u304c\u8db3\u308a\u306a\u3044\uff01")},te:function(){this.wd+=1}});T.create=function(b){return T(b)};z={ka:function(){z.explosion=Array.range(0,4).map(function(a){return tm.app.AnimationSprite(tm.app.SpriteSheet({image:"explode"+a,frame:{width:100,height:100},animations:{"default":{frame:Array.range(0,64),next:k}}},100,100))});z.shockwaveImage=tm.graphics.Canvas().resize(100,100).setStrokeStyle("rgba(0,0,0,0)").setFillStyle(tm.graphics.RadialGradient(50,50,0,50,50,50).addColorStopList([{offset:0,color:"rgba(255,255,255,0)"},{offset:0.7,color:"rgba(255,255,255,0)"},{offset:0.95,color:"rgba(255,255,255,1)"},
{offset:1,color:"rgba(255,255,255,0)"}]).toStyle()).fillCircle(50,50,50);z.shockwaveImage=tm.graphics.Canvas().resize(100,100).setStrokeStyle("rgba(0,0,0,0)").setFillStyle(tm.graphics.RadialGradient(50,50,0,50,50,50).addColorStopList([{offset:0,color:"rgba(255,255,255,0)"},{offset:0.7,color:"rgba(255,255,255,0)"},{offset:0.95,color:"rgba(255,255,255,1)"},{offset:1,color:"rgba(255,255,255,0)"}]).toStyle()).fillCircle(50,50,50);z.shockwaveImage2=tm.graphics.Canvas().resize(100,100).setStrokeStyle("rgba(0,0,0,0)");
for(var b=0;50>b;b++){var a=2*Math.random()*Math.PI,c=S(45,50),f=S(5,10);z.shockwaveImage2.setFillStyle(tm.graphics.RadialGradient(Math.cos(a)*c+50,Math.sin(a)*c+50,0,Math.cos(a)*c+50,Math.sin(a)*c+50,f).addColorStopList([{offset:0,color:"rgba(255,255,255,1)"},{offset:1,color:"rgba(255,255,255,0)"}]).toStyle()).fillCircle(Math.cos(a)*c+50,Math.sin(a)*c+50,f)}z.particle16=G(16,1,0.9,tm.graphics.Canvas().resize(16,16).setFillStyle(tm.graphics.RadialGradient(8,8,0,8,8,8).addColorStopList([{offset:0,
color:"rgba(255,255,255,1.0)"},{offset:1,color:"rgba(255,128,  0,0.0)"}]).toStyle()).fillRect(0,0,16,16).element)},rb:function(b,a,c){b=z.particle16.clone().setPosition(b,a).addChildTo(c);a=S(5,20);c=S(Math.PI,2*Math.PI);b.ra=Math.cos(c)*a;b.sa=Math.sin(c)*a;b.scaleX=b.scaleY=(S(0.1,0.5)+S(0.1,0.5))/2;b.addEventListener("enterframe",function(){this.x+=this.ra;this.y+=this.sa;this.ra*=0.9;this.sa*=0.9})},Xe:function(b,a,c){var f=tm.app.Sprite().setPosition(b,a).setScale(0.1).setBlendMode("lighter").addChildTo(c);
f.image=z.shockwaveImage;f.tweener.clear().to({scaleX:1.4,scaleY:1.4,alpha:0},800,"easeOutQuad").call(function(){f.remove()})},pe:function(b,a,c){var f=tm.app.Sprite().setPosition(b,a).setScale(0.1).setBlendMode("lighter").addChildTo(c);f.image=z.shockwaveImage2;f.tweener.clear().to({scaleX:1.4,scaleY:1.4,alpha:0},800,"easeOutQuad").call(function(){f.remove()})},ge:function(b,a,c){P();var f=z.explosion.random().clone().addEventListener("animationend",function(){this.remove()}).setScale(0.5).setPosition(b,
a).setRotation(360*Math.random()).gotoAndPlay();f.vd=j;f.addChildTo(c);z.pe(b,a,c)},Re:function(b,a,c){P();var f=z.explosion.random().clone().addEventListener("animationend",function(){this.remove()}).setPosition(b,a).setRotation(360*Math.random()).gotoAndPlay();f.vd=j;f.addChildTo(c);for(f=0;10>f;f++)z.rb(b,a,c)}};var U=tm.createClass({superClass:tm.app.Scene,qc:k,init:function(){this.superInit()},Ce:function(b,a){"function"===typeof b?this.app.pushScene(b()):b instanceof tm.app.Scene&&this.app.pushScene(b);this.qc=a},finish:function(b){var a=this.app;a.popScene();(a=a.currentScene)&&a.qc&&a.qc.bind(a)(b)},update:function(b){b.pointing.getPointingEnd()&&aa(b.pointing).addChildTo(this)}}),aa=tm.createClass({superClass:tm.app.CircleShape,init:function(b){this.superInit(150,150,{strokeStyle:"rgba(0,0,0,0)",fillStyle:tm.graphics.RadialGradient(75,
75,0,75,75,75).addColorStopList([{offset:0,color:"rgba(255,255,255,0.0)"},{offset:0.6,color:"rgba(255,255,255,0.0)"},{offset:1,color:"rgba(255,255,255,0.8)"}]).toStyle()});this.setPosition(b.x,b.y);this.width=this.height=1;this.tweener.clear().to({width:150,height:150,alpha:0},300,"easeOutQuad").call(function(){this.remove()}.bind(this))}});var ba=tm.createClass({superClass:U,Gd:k,Kc:k,Cc:k,Sc:l,title:k,ib:[],description:k,ab:k,cursor:k,ia:0,cd:l,ad:l,init:function(b,a,c,f,g){this.superInit();this.Gd=b;this.Kc=a;this.ia=~~c;this.Sc=!!g;this.Cc=f?f:[].concat(a);this.Sc&&(a.push("exit"),this.Cc.push("\u524d\u306e\u753b\u9762\u3078\u623b\u308a\u307e\u3059"));b=Math.max(50*(1+a.length),50)+40;this.ab=tm.app.RectangleShape(384,b,{strokeStyle:"rgba(0,0,0,0)",fillStyle:"rgba(1,2,48,0.8)"}).setPosition(240,320);this.ab.width=1;this.ab.height=
1;this.ab.tweener.to({width:384,height:b},200,"easeOutExpo").call(this.Wd.bind(this));this.ab.addChildTo(this);this.description=tm.app.Label("",14).setPosition(240,630).addChildTo(this)},Wd:function(){var b=320-25*this.Kc.length;this.title=tm.app.Label(this.Gd,30).setPosition(240,b).addChildTo(this);this.ib=this.Kc.map(function(a,c){var f=this;b+=50;var g=tm.app.Label(a).setPosition(240,b).addChildTo(this);g.interactive=j;g.addEventListener("touchend",function(){f.ia===c?f.yc(f.ia):f.ia=c});g.width=
336;return g}.bind(this));this.Pd();this.cd=j},Pd:function(){this.cursor=tm.app.RectangleShape(336,10,{strokeStyle:"rgba(0,0,0,0)",fillStyle:tm.graphics.LinearGradient(0,0,336,0).addColorStopList([{offset:0,color:"rgba(  0,255,100,0.0)"},{offset:0.2,color:"rgba(  0,255,100,0.3)"},{offset:0.5,color:"rgba(  0,255,255,0.5)"},{offset:0.8,color:"rgba(  0,255,100,0.3)"},{offset:1,color:"rgba(  0,255,100,0.0)"}]).toStyle()}).addChildTo(this);this.cursor.blendMode="lighter";this.cursor.x=240;this.cursor.s=
this.ia;this.cursor.y=this.ib[this.ia].y;this.cursor.update=function(){this.s!==this.parent.ia&&(this.s=this.parent.ia,this.tweener.clear(),this.tweener.to({y:this.parent.ib[this.parent.ia].y},200,"easeOutExpo"))}},update:function(b){this.superClass.prototype.update.apply(this,arguments);this.description.text=this.Cc[this.ia];this.cd&&(this.ad?this.cursor.visible=0===~~(b.frame/2)%2:this.Sc&&b.keyboard.getKeyDown("x")?(this.ia=this.ib.length-1,this.yc(this.ia)):b.keyboard.getKeyDown("z")||b.keyboard.getKeyDown("space")?
this.yc(this.ia):b.keyboard.getKeyDown("down")?(this.ia+=1,this.ia=Q(this.ia,0,this.ib.length-1)):b.keyboard.getKeyDown("up")&&(this.ia-=1,this.ia=Q(this.ia,0,this.ib.length-1)))},yc:function(b){this.ad=j;this.tweener.clear().wait(200).call(function(){this.cursor.remove();this.title.remove();this.ib.each(function(a){a.remove()});this.ab.tweener.clear();this.ab.tweener.to({width:1,height:1},200,"easeInExpo").call(function(){this.finish(b)}.bind(this))}.bind(this))},draw:function(b){b.fillStyle="rgba(0,0,0,0.8)";
b.fillRect(0,0,480,640)}});function V(b,a,c,f,g,i,n){n===h&&(n=j);b.Ce(ba(a,c,g,i,n),f)};G=tm.createClass({superClass:tm.app.CanvasElement,alpha:1,tc:0.85,size:0,image:k,init:function(b,a,c,f){this.superInit();this.width=this.height=this.size=b;a!==h&&(this.alpha=a);c!==h&&(this.tc=c);this.blendMode="lighter";this.image=f?f:tm.graphics.Canvas().resize(b,b).setFillStyle(tm.graphics.RadialGradient(0.5*b,0.5*b,0,0.5*b,0.5*b,0.5*b).addColorStopList([{offset:0,color:"rgba(255,255,255,0.1)"},{offset:1,color:"rgba(  0,  0,  0,0.0)"}]).toStyle()).fillRect(0,0,b,b).element},update:function(){this.alpha*=
this.tc;0.0010>this.alpha?this.remove():1<this.alpha&&(this.alpha=1)},draw:function(b){b.context.drawImage(this.image,-this.width*this.origin.x,-this.height*this.origin.y,this.width,this.height)},clone:function(){return G(this.size,this.Ze,this.tc,this.image)}});
F=tm.createClass({superClass:G,Fa:k,init:function(b){this.superInit(20,1,0.8,tm.graphics.Canvas().resize(20,20).setFillStyle(tm.graphics.RadialGradient(10,10,0,10,10,10).addColorStopList([{offset:0,color:"rgba(255,255,255,0.5)"},{offset:1,color:"rgba(  0,  0,  0,0.0)"}]).toStyle()).fillRect(0,0,20,20).element);this.Fa=b},update:function(b){this.superClass.prototype.update.apply(this,b);this.x+=this.Fa.ra;this.y+=this.Fa.sa+0.2},clone:function(){return F(this.Fa)}});var ca=tm.createClass({superClass:tm.app.RectangleShape,label:k,Ba:k,init:function(b){this.superInit(b,64,{fillStyle:"rgba(1,2,48,0.5)",strokeStyle:"rgba(0,0,0,0)"});this.label=tm.app.Label("_",10).setAlign("left").setBaseline("top").setPosition(-this.width/2+4,-this.height/2+4).setFillStyle("rgba(255,255,255,0.5)").addChildTo(this);this.Ba=[]},Zd:function(b){5<this.Ba.length&&this.Ba.splice(1,this.Ba.length-4);this.Ba.push(b);return this},$d:function(){this.Ba.clear();return this},clear:function(){this.label.text=
"_";return this},update:function(b){var a=this.label.text,a=a.substring(0,a.length-1);if(0===b.frame%2&&0!==this.Ba.length)if(""!==this.Ba[0]){var c=this.Ba[0][0];this.Ba[0]=this.Ba[0].substring(1);a+=c}else this.Ba.shift(),c=a.split("\n"),3<c.length&&(c.shift(),a=c.join("\n")),a+="\n";this.label.text=a+(~~(b.frame/6)%2?"_":" ")}});(function(){var b=k,a=k;t=tm.createClass({superClass:U,result:k,ba:0,Db:[],$b:l,ud:k,zd:0,ec:0,init:function(){this.superInit();tm.app.Label("GL-Shooter 2",50).setPosition(240,160).addChildTo(this);tm.app.Label("version 1.0-beta",22).setPosition(432,192).setAlign("right").addChildTo(this);this.ud=tm.app.Label().setPosition(240,256).addChildTo(this);tm.app.Label("press space key").setPosition(240,576).addChildTo(this);this.addEventListener("enter",function(){this.$b=l;this.ud.text="HIGH SCORE: "+s.ac})},
draw:function(a){a.fillStyle="black";a.fillRect(0,0,480,640)},update:function(a){this.bd(80*Math.cos(0.01*this.ba)+240,80*Math.sin(0.01*this.ba)+320,0);this.bd(80*Math.cos(0.01*this.ba+Math.PI)+240,80*Math.sin(0.01*this.ba+Math.PI)+320,1);(a.keyboard.getKeyDown("space")||a.pointing.getPointingEnd())&&!this.$b&&this.Dd();this.ba+=1},bd:function(c,f,g){if(!this.$b){b===k&&(b=G(80,1,0.8,tm.graphics.Canvas().resize(80,80).setFillStyle(tm.graphics.RadialGradient(40,40,0,40,40,40).addColorStopList([{offset:0,
color:"rgba(255,255,255,0.1)"},{offset:1,color:"rgba(155,  0,  0,0.0)"}]).toStyle()).fillRect(0,0,80,80).element));a===k&&(a=G(80,1,0.8,tm.graphics.Canvas().resize(80,80).setFillStyle(tm.graphics.RadialGradient(40,40,0,40,40,40).addColorStopList([{offset:0,color:"rgba(255,255,255,0.1)"},{offset:1,color:"rgba(  0,  0,155,0.0)"}]).toStyle()).fillRect(0,0,80,80).element));g=0===g?b.clone().addChildTo(this):a.clone().addChildTo(this);g.speed=0.6;var i=S(0,2*Math.PI),n=W(0,20);g.setPosition(Math.cos(i)*
n+c,Math.sin(i)*n+f);var v=this;g.update=function(){this.x+=Math.cos(i)*this.speed;this.y+=Math.sin(i)*this.speed;if(-50>this.x||530<this.x||-50>this.y||690<this.y){this.remove();var a=v.Db.indexOf(this);-1!==a&&v.Db.splice(a,1)}};this.Db.push(g)}},Dd:function(){V(this,"MAIN MENU",["start","tutorial","setting","save score"],this.we,this.zd,["\u30b2\u30fc\u30e0\u3092\u958b\u59cb\u3057\u307e\u3059","\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3092\u958b\u59cb\u3057\u307e\u3059","\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u307e\u3059",
"\u30b2\u30fc\u30e0\u3092\u7d42\u4e86\u30579leap\u306b\u30b9\u30b3\u30a2\u3092\u767b\u9332\u3057\u307e\u3059"])},we:function(a){4!==a&&(this.zd=a);switch(a){case 0:this.tweener.clear().call(function(){this.$b=j;for(var a=0,b=this.Db.length;a<b;a++)this.Db[a].speed=8}.bind(this)).wait(1E3).call(function(){s.ha.oe(1);s.pushScene(s.ha)}.bind(this));break;case 2:this.Ta();break;case 3:s.fe()}},Ta:function(){V(this,"SETTING",["bgm volume","sound volume","difficulty"],this.Nc,this.ec,["BGM\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8a2d\u5b9a\u3057\u307e\u3059",
"\u52b9\u679c\u97f3\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8a2d\u5b9a\u3057\u307e\u3059","\u96e3\u6613\u5ea6\u3092\u8a2d\u5b9a\u3057\u307e\u3059"])},Nc:function(a){3!==a&&(this.ec=a);switch(a){case 0:this.Oc();break;case 1:this.Pc();break;case 2:this.Ae();break;default:this.Dd()}},Oc:function(){V(this,"BGM VOLUME","012345".split(""),this.Lc,s.Sb)},Lc:function(a){6!==a&&(s.Sb=a);this.Ta()},Pc:function(){V(this,"SE VOLUME","012345".split(""),this.Mc,s.tb)},Mc:function(a){6!==a&&(s.tb=a);this.Ta()},Ae:function(){V(this,
"DIFFICULTY",["easy","normal","hard","very hard","hell"],this.ve,s.md,["\u521d\u5fc3\u8005\u3067\u3082\u5b89\u5fc3\u3057\u3066\u6311\u6226\u53ef\u80fd\u306a\u5165\u9580\u30b3\u30fc\u30b9","\u666e\u901a\u306e\u96e3\u6613\u5ea6\u3002easy\u3067\u306f\u7269\u8db3\u308a\u306a\u3044\u4eba\u3078","\u4e00\u822c\u7684\u306a\u5f3e\u5e55STG\u306e\u96e3\u6613\u5ea6","hard\u306f\u30cc\u30eb\u3059\u304e\u308b\u3068\u3044\u3046\u4eba\u5411\u3051","\u6b7b\u306c\u304c\u3088\u3044"])},ve:function(a){5!==a&&(s.md=a);
this.Ta()},toString:function(){return"gls2.TitleScene"}})})();tm.createClass({superClass:U,init:function(){this.superInit();tm.app.Label("This is ShipSelectScene").setAlign("center").setBaseline("middle").setPosition(240,320).addChildTo(this)}});(function(){var b=k;A=tm.createClass({superClass:U,da:k,score:0,mb:k,Fa:k,Fb:3,td:k,Ed:k,qd:k,nd:k,od:k,gd:k,xd:k,Bc:k,Rc:0,init:function(){b!==k&&d(Error("class 'gls2.GameScene' is singleton!!"));this.superInit();b=this;this.Qd();this.td=tm.app.Object2D().addChildTo(this);this.qd=tm.app.Object2D().addChildTo(this);this.nd=tm.app.Object2D().addChildTo(this);this.Ed=tm.app.Object2D().addChildTo(this);this.od=tm.app.Object2D().addChildTo(this);this.gd=tm.app.Object2D().addChildTo(this);this.xd=tm.app.Object2D().addChildTo(this);
this.Bc=ca(200).setPosition(375,37).addChildTo(this.xd);tm.xa.Wa.zb.ed=this},Qc:function(a){this.Bc.Zd(a)},Qd:function(){var a=this.Fa=tm.app.CanvasElement().addChildTo(this);a.Fc=a.Gc=0;a.direction=0.5*Math.PI;a.Vb=20;a.speed=1;a.ra=0;a.sa=0;a.update=function(){this.ra=Math.cos(this.direction)*this.speed;this.sa=Math.sin(this.direction)*this.speed;this.Fc=(this.Fc+this.ra)%this.Vb;this.Gc=(this.Gc+this.sa)%this.Vb};a.blendMode="lighter";a.draw=function(a){a.lineWidth=0.2;a.strokeStyle="#rgba(255,255,255,0.5)";
a.beginPath();for(var b=this.Fc;480>b;b+=this.Vb)a.line(b,0,b,640);for(b=this.Gc;640>b;b+=this.Vb)a.line(0,b,480,b);a.stroke()}},addChild:function(a){a instanceof B?this.Ed.addChild(a):a instanceof H?a.$.Bb?this.td.addChild(a):this.qd.addChild(a):a instanceof F||a instanceof E||a instanceof C?this.nd.addChild(a):a instanceof G||a.vd?this.od.addChild(a):a instanceof K?this.gd.addChild(a):this.superClass.prototype.addChild.apply(this,arguments)},update:function(a){this.mb.update(a.frame);a.keyboard.getKeyDown("escape")?
this.app.popScene():a.keyboard.getKeyDown("space")?this.fc(0):a.keyboard.getKeyDown("p")&&(a.canvas.saveAsImage(),this.fc(0))},fc:function(a){V(this,"PAUSE",["resume","setting","exit game"],this.xe,a,["\u30b2\u30fc\u30e0\u3092\u518d\u958b\u3057\u307e\u3059","\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u307e\u3059","\u30b2\u30fc\u30e0\u3092\u4e2d\u65ad\u3057\u3001\u30bf\u30a4\u30c8\u30eb\u753b\u9762\u306b\u623b\u308a\u307e\u3059"],l)},xe:function(a){switch(a){case 1:this.Ta();break;case 2:this.ze()}},Ta:function(){V(this,
"SETTING",["bgm volume","sound volume"],this.Nc,this.ec,["BGM\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8a2d\u5b9a\u3057\u307e\u3059","\u52b9\u679c\u97f3\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8a2d\u5b9a\u3057\u307e\u3059"])},Nc:function(a){3!==a&&(this.ec=a);switch(a){case 0:this.Oc();break;case 1:this.Pc();break;default:this.fc()}},ze:function(){V(this,"REARY?",["yes","no"],this.ue,1,["\u30b2\u30fc\u30e0\u3092\u4e2d\u65ad\u3057\u3001\u30bf\u30a4\u30c8\u30eb\u753b\u9762\u306b\u623b\u308a\u307e\u3059","\u524d\u306e\u753b\u9762\u3078\u623b\u308a\u307e\u3059"],
l)},ue:function(a){0===a?this.app.popScene():this.fc(1)},Oc:function(){V(this,"BGM VOLUME","012345".split(""),this.Lc,s.Sb)},Lc:function(a){6!==a&&(s.Sb=a);this.Ta(1)},Pc:function(){V(this,"SE VOLUME","012345".split(""),this.Mc,s.tb)},Mc:function(a){6!==a&&(s.tb=a);this.Ta(1)},draw:function(a){this.mb!==k&&a.clearColor(this.mb.background,0,0)},oe:function(){this.Bc.$d().clear();this.da!==k&&this.da.remove();H.xb();E.xb();w.xb();this.da=B(this);this.De(0)},De:function(a){this.mb=T.create(this,a);this.Jc()},
Jc:function(){this.da.setPosition(240,672).setFrameIndex(3).addChildTo(this);this.da.bb=l;this.da.Cd=j;this.da.tweener.clear().wait(30).moveBy(0,-120).wait(120).call(function(){this.bb=j}.bind(this.da)).wait(120).call(function(){this.Cd=l}.bind(this.da))},$e:function(){this.da.remove();this.Fb-=1;0<this.Fb&&this.Jc()},Ve:function(){this.Jc()},Pe:m(),We:m(),Ue:m(),Ke:function(a){this.score+=a;for(var b=0;b<s.rd.length;b++){var f=s.rd[b];a<f&&f<=this.score&&this.ie()}s.ac=Math.max(s.ac,this.score)},
ie:function(){this.Fb+=1}})})();tm.createClass({superClass:U,init:function(){this.superInit()},update:function(b){this.superClass.prototype.update.apply(this,arguments)}});tm.createClass({superClass:U,init:function(){this.superInit()},update:function(b){this.superClass.prototype.update.apply(this,arguments)}});tm.createClass({superClass:U,init:function(){this.superInit()},update:function(b){this.superClass.prototype.update.apply(this,arguments)}});tm.createClass({superClass:U,init:function(){this.superInit()},update:function(b){this.superClass.prototype.update.apply(this,arguments)}});(function(){H=tm.createClass({superClass:tm.app.CanvasElement,ba:0,direction:0,speed:0,da:k,ha:k,mb:k,$:k,aa:k,eb:0,Xb:j,Ma:l,init:function(){this.superInit();this.addEventListener("completeattack",function(){this.gb()});this.addEventListener("added",function(){this.ba=0;this.Ma=l;this.Xb=j;b.push(this)});this.addEventListener("removed",function(){var c=[].concat(this._listeners.enterframe);if(c)for(var g=0,i=c.length;g<i;g++)c[g]&&c[g].Hc&&this.removeEventListener("enterframe",c[g]);this.tweener.clear();
this.scaleX=this.scaleY=1;a.push(this);c=b.indexOf(this);-1!==c&&b.splice(c,1)})},ka:function(a,b,c,n){this.ha=a;this.da=a.da;this.mb=b;this.aa=c;this.$=n;this.aa.ka.apply(this);this.$.ka.apply(this);this.Bb?this.shadowBlur=0:N(this);return this},hb:function(){this.aa.hb.apply(this);this.$.hb.apply(this)},gb:function(){this.aa.gb.apply(this);this.$.gb.apply(this)},update:function(){this.fb()&&(this.Ma=j);this.aa.update.apply(this);this.$.update.apply(this);this.Bb&&(this.x+=this.ha.Fa.ra,this.y+=
this.ha.Fa.sa);this.ba+=1},jd:function(a){if(!this.Ma)return l;this.eb-=a;return 0>=this.eb?(this.$.de.apply(this),a=W(0,2),0===a?this.ha.Qc("enemy destroy."):1===a?this.ha.Qc(this.name+" destroy."):2===a&&this.ha.Qc("ETR reaction gone."),this.remove(),this.mb.te(this),j):l},draw:function(a){this.$.draw.call(this,a)},fb:function(){var a=this.radius;return-a<=this.x&&this.x<480+a&&-a<=this.y&&this.y<640+a},ye:function(){return this.Xb}});H.xb=function(){for(var a=[].concat(b),c=0,i=a.length;c<i;c++)a[c].remove()};
for(var b=H.sc=[],a=H.Be=[],c=0;256>c;c++)a.push(H())})();(function(){var b=tm.createClass({superClass:tm.app.Sprite,init:function(a,b,f){this.superInit(a,b,f)},draw:function(a){var b=this.srcRect;a.context.drawImage(this._image.element,b.x,b.y,b.width,b.height,-this.width*this.origin.x,-this.height*this.origin.y,this.width,this.height)}});L=tm.createClass({ka:function(){this.name="abstract enemy";this.eb=9999},hb:m(),gb:m(),update:m(),draw:m(),de:function(){z.ge(this.x,this.y,this.ha)}});L.la=tm.createClass({superClass:L,init:function(){this.superInit()},
ka:function(){this.name="kujo";this.eb=3;this.Bb=l;this.na=b("tex1",64,64)},update:function(){this.scaleX=this.x<this.da.x?-1:1},draw:function(a){2>this.ba%4?this.na.setFrameIndex(7):this.na.setFrameIndex(8);this.na.draw(a)}});L.la=L.la();L.ca=tm.createClass({superClass:L,init:function(){this.superInit()},ka:function(){this.name="kiryu";this.eb=10;this.Bb=l;this.na=b("tex1",64,64)},update:function(){this.scaleX=this.x<this.da.x?-1:1},draw:function(a){2>this.ba%4?this.na.setFrameIndex(9):this.na.setFrameIndex(10);
this.na.draw(a)}});L.ca=L.ca();L.ga=tm.createClass({superClass:L,init:function(){this.superInit()},ka:function(){this.name="natsuki";this.eb=5;this.Bb=j;this.na=b("tex1",48,48);this.radius=24},update:function(){switch(this.dir){case 0:this.na.setFrameIndex(16,64,64);break;case 1:this.na.setFrameIndex(24,64,64);break;case 2:this.na.setFrameIndex(23,64,64);break;case 3:this.na.setFrameIndex(11,64,64);break;case 4:this.na.setFrameIndex(12,64,64);break;case 5:this.na.setFrameIndex(13,64,64);break;case 6:this.na.setFrameIndex(14,
64,64);break;case 7:this.na.setFrameIndex(15,64,64)}},draw:function(a){this.na.draw(a)}});L.ga=L.ga()})();(function(){function b(a,b){var f=w[b].Wb();a.addEventListener("enterframe",f);a.addEventListener("completeattack",function(){this.removeEventListener("enterframe",f)})}M=tm.createClass({ka:m(),hb:m(),gb:m(),update:m()});M.Da=tm.createClass({superClass:M,init:function(){this.superInit()},hb:function(){var a=S(64,192);this.tweener.clear().wait(W(10,500)).move(this.x,a,7*a,"easeOutQuad").call(function(){b(this,"basic0-0")}.bind(this))},gb:function(){this.tweener.clear().wait(1E3).moveBy(0,-640,2E3,
"easeInQuad").call(function(){this.remove()}.bind(this))}});M.Da=M.Da();M.Oa=tm.createClass({superClass:M,init:function(){this.superInit()},hb:function(){var a=S(192,320);this.tweener.clear().wait(W(10,500)).move(this.x,a,7*a,"easeOutQuad").call(function(){b(this,"basic0-0")}.bind(this))},gb:function(){this.tweener.clear().wait(1E3).moveBy(0,-640,2E3,"easeInQuad").call(function(){this.remove()}.bind(this))}});M.Oa=M.Oa();M.ca=tm.createClass({superClass:M,init:function(){this.superInit()},ka:function(){this.angle=
0.5*Math.PI;this.Tc=W(0,60);this.speed=0},update:function(){this.ba===this.Tc?this.speed=8:this.ba===this.Tc+10?b(this,"basic1-0"):this.Tc<this.ba&&this.y<this.da.y&&(this.angle+=Math.atan2(this.da.y-this.y,this.da.x-this.x)<this.angle?-0.02:0.02,this.angle=Q(this.angle,0.5,Math.PI-0.5));this.x+=Math.cos(this.angle)*this.speed;this.y+=Math.sin(this.angle)*this.speed;!this.fb()&&this.Ma&&this.remove();if(9E4>(this.x-this.da.x)*(this.x-this.da.x)+(this.y-this.da.y)*(this.y-this.da.y)||this.y>this.da.y)this.Xb=
l}});M.ca=M.ca();M.Xa=tm.createClass({superClass:M,init:function(){this.superInit()},ka:function(){b(this,"basic2-0");this.dir=0},update:function(){this.x+=1;this.Ma&&!this.fb()&&this.remove()}});M.Xa=M.Xa();M.Ya=tm.createClass({superClass:M,init:function(){this.superInit()},ka:function(){b(this,"basic2-0");this.dir=1},update:function(){this.x+=0.7;this.y+=0.7;this.Ma&&!this.fb()&&this.remove()}});M.Ya=M.Ya();M.ma=tm.createClass({superClass:M,init:function(){this.superInit()},ka:function(){b(this,
"basic2-0");this.dir=2},update:function(){this.y+=1;this.Ma&&!this.fb()&&this.remove()}});M.ma=M.ma();M.Yc=tm.createClass({superClass:M,init:function(){this.superInit()},ka:function(){b(this,"basic2-0");this.dir=3},update:function(){this.x-=0.7;this.y+=0.7;this.Ma&&!this.fb()&&this.remove()}});M.Yc=M.Yc();M.Xc=tm.createClass({superClass:M,init:function(){this.superInit()},ka:function(){b(this,"basic2-0");this.dir=4},update:function(){this.x-=1;this.Ma&&!this.fb()&&this.remove()}});M.Xc=M.Xc()})();var X=M,Y=L;
I={"heri1-left":[{aa:X.Da,$:Y.ca,x:48,y:-100},{aa:X.Oa,$:Y.ca,x:96,y:-100},{aa:X.Da,$:Y.ca,x:144,y:-100},{aa:X.Oa,$:Y.ca,x:192,y:-100},{aa:X.Da,$:Y.ca,x:240,y:-100}],"heri1-center":[{aa:X.Da,$:Y.ca,x:144,y:-100},{aa:X.Oa,$:Y.ca,x:192,y:-100},{aa:X.Da,$:Y.ca,x:240,y:-100},{aa:X.Oa,$:Y.ca,x:288,y:-100},{aa:X.Da,$:Y.ca,x:336,y:-100}],"heri1-right":[{aa:X.Da,$:Y.ca,x:240,y:-100},{aa:X.Oa,$:Y.ca,x:288,y:-100},{aa:X.Da,$:Y.ca,x:336,y:-100},{aa:X.Oa,$:Y.ca,x:384,y:-100},{aa:X.Da,$:Y.ca,x:432,y:-100}],"heri2-left":[{aa:X.ca,
$:Y.la,x:48,y:-100},{aa:X.ca,$:Y.la,x:96,y:-100},{aa:X.ca,$:Y.la,x:144,y:-100},{aa:X.ca,$:Y.la,x:192,y:-100},{aa:X.ca,$:Y.la,x:240,y:-100}],"heri2-center":[{aa:X.ca,$:Y.la,x:144,y:-100},{aa:X.ca,$:Y.la,x:192,y:-100},{aa:X.ca,$:Y.la,x:240,y:-100},{aa:X.ca,$:Y.la,x:288,y:-100},{aa:X.ca,$:Y.la,x:336,y:-100}],"heri2-right":[{aa:X.ca,$:Y.la,x:240,y:-100},{aa:X.ca,$:Y.la,x:288,y:-100},{aa:X.ca,$:Y.la,x:336,y:-100},{aa:X.ca,$:Y.la,x:384,y:-100},{aa:X.ca,$:Y.la,x:432,y:-100}],"tank-left":[{aa:X.Xa,$:Y.ga,
x:-64,y:192},{aa:X.Xa,$:Y.ga,x:-128,y:192},{aa:X.Xa,$:Y.ga,x:-192,y:192},{aa:X.Xa,$:Y.ga,x:-256,y:192},{aa:X.Xa,$:Y.ga,x:-320,y:192}],"tank-leftUpper":[{aa:X.Ya,$:Y.ga,x:-110,y:-46},{aa:X.Ya,$:Y.ga,x:-156,y:-92},{aa:X.Ya,$:Y.ga,x:-202,y:-138},{aa:X.Ya,$:Y.ga,x:-248,y:-184},{aa:X.Ya,$:Y.ga,x:-294,y:-230}],"tank-upper0":[{aa:X.ma,$:Y.ga,x:120,y:-64},{aa:X.ma,$:Y.ga,x:120,y:-128},{aa:X.ma,$:Y.ga,x:120,y:-192},{aa:X.ma,$:Y.ga,x:120,y:-256},{aa:X.ma,$:Y.ga,x:120,y:-320}],"tank-upper1":[{aa:X.ma,$:Y.ga,
x:240,y:-64},{aa:X.ma,$:Y.ga,x:240,y:-128},{aa:X.ma,$:Y.ga,x:240,y:-192},{aa:X.ma,$:Y.ga,x:240,y:-256},{aa:X.ma,$:Y.ga,x:240,y:-320}],"tank-upper2":[{aa:X.ma,$:Y.ga,x:360,y:-64},{aa:X.ma,$:Y.ga,x:360,y:-128},{aa:X.ma,$:Y.ga,x:360,y:-192},{aa:X.ma,$:Y.ga,x:360,y:-256},{aa:X.ma,$:Y.ga,x:360,y:-320}]};(function(){var b=[],a=[];K=tm.createClass({superClass:tm.app.Sprite,init:function(){this.superInit("tex0",20,20);this.addEventListener("removed",function(){b.push(this);var c=a.indexOf(this);-1!==c&&a.splice(c,1);this.clearEventListener("enterframe")})}});w={ka:function(){for(var c=0;255>c;c++)b.push(K());c=tm.xa.Wa.zb;c.Ic=function(a){return!(a instanceof K)||!(-50>a.x||530<a.x||-50>a.y||690<a.y)};c.fd=function(){var c=b.shift(0);if(c)return a.push(c),c.setFrameIndex(1),c.scaleX=1.2,c.scaleY=1.5,
c.addEventListener("enterframe",function(){this.rotation+=15}),c;console.warn("\u5f3e\u304c\u8db3\u308a\u306a\u3044\uff01")};c.kb=4},xb:function(){for(var b=[].concat(a),c=0,f=b.length;c<f;c++)b[c].remove()}};var c=p.fa,f=c.Yb(c.direction(0),c.ja());w["basic0-0"]=new p.za({top:c.action([f])});w["basic0-4"]=new p.za({top:c.action([c.repeat(3,[c.repeat(5,[c.Yb(c.direction(-20),c.speed("$loop.count*0.06+0.75"),c.ja()),c.Yb(c.direction(0),c.speed("$loop.count*0.06+0.75"),c.ja()),c.Yb(c.direction(20),
c.speed("$loop.count*0.06+0.75"),c.ja())]),c.wait(40)])])});w["basic1-0"]=new p.za({top:c.action([c.repeat(999,[f,c.wait(20)])])});w["basic2-0"]=new p.za({top:c.action([c.wait("120"),c.repeat(999,[c.wait("50*$rand*5"),f])])})})();var Q,R,S,W,$;Q=function(b,a,c){return b<a?a:b>c?c:b};$=Math.PI/180;R=function(b){return b*$};W=function(b,a){return window.Math.floor(Math.random()*(a-b+1))+b};S=function(b,a){return window.Math.random()*(a-b)+b};
